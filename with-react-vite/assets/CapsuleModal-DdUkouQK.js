const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/cpsl-alert_34.entry-DClgqLl6.js","assets/index-D-c5h5Hy.js","assets/index-BZcti3oU.css","assets/cpsl-col.entry-ZNZovZuW.js","assets/cpsl-grid.entry-DZZFH1fD.js","assets/cpsl-hero.entry-Cdc-b9i2.js","assets/cpsl-identicon.entry-CctVbZT3.js","assets/cpsl-info-box.entry-CybM1788.js","assets/cpsl-modal-v2.entry-C5rgrTLx.js","assets/cpsl-nav-button.entry-1LRY80xO.js","assets/cpsl-row.entry-CngKRPWI.js","assets/index-B3yjlFXt.js"])))=>i.map(i=>d[i]);
import{fY as ot,aX as m,b9 as Te,cc as Ie,bR as ie,eE as Ne,eF as Pe,fZ as Kc,bq as zc,f_ as Xc,f$ as ha,g0 as vn,g1 as Ds,g2 as js,g3 as qc,g4 as es,fy as Yc,eD as ze,g5 as Jc,g6 as Zc,g7 as Qc,eW as Yi,e$ as Ns,f0 as ks,eC as ut,g8 as Ji,g9 as Zi,ga as fa,eU as Ut,eZ as ri,eV as pa,eH as ma,gb as Wn,gc as eu,gd as tu,bb as Qi,d6 as at,aY as h,d1 as Tt,ge as nu,bf as T,eN as eo,eT as ts,eQ as Xe,eJ as qe,gf as su,eK as ga,eY as ya,eX as iu,gg as ou,eL as ru,gh as au,gi as lu}from"./index-D-c5h5Hy.js";const cu=e=>e.toLowerCase().split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(""),va=e=>e.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`),uu=(e,t,n={})=>{if(e instanceof Element){const s=du(e.classList,t,n);s!==""&&(e.className=s),Object.keys(t).forEach(i=>{if(!(i==="children"||i==="style"||i==="ref"||i==="class"||i==="className"||i==="forwardedRef"))if(i.indexOf("on")===0&&i[2]===i[2].toUpperCase()){const r=i.substring(2),o=r[0].toLowerCase()+r.substring(1);xa(o)||fu(e,o,t[i])}else e[i]=t[i],typeof t[i]==="string"&&e.setAttribute(va(i),t[i])})}},du=(e,t,n)=>{const s=t.className||t.class,i=n.className||n.class,r=ns(e),o=ns(s?s.split(" "):[]),a=ns(i?i.split(" "):[]),l=[];return r.forEach(u=>{o.has(u)?(l.push(u),o.delete(u)):a.has(u)||l.push(u)}),o.forEach(u=>l.push(u)),l.join(" ")},hu=e=>{switch(e){case"doubleclick":return"dblclick"}return e};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const xa=e=>{if(typeof document>"u")return!0;{const t="on"+hu(e);let n=t in document;if(!n){const s=document.createElement("div");s.setAttribute(t,"return;"),n=typeof s[t]=="function"}return n}},fu=(e,t,n)=>{const s=e.__events||(e.__events={}),i=s[t];i&&e.removeEventListener(t,i),e.addEventListener(t,s[t]=function(o){n&&n.call(this,o)})},ns=e=>{const t=new Map;return e.forEach(n=>t.set(n,n)),t},pu=(e,t)=>{typeof e=="function"?e(t):e!=null&&(e.current=t)},mu=(...e)=>t=>{e.forEach(n=>{pu(n,t)})},gu=(e,t)=>{const n=(s,i)=>ot.createElement(e,Object.assign({},s,{forwardedRef:i}));return n.displayName=t,ot.forwardRef(n)};var yu=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n};const te=(e,t,n,s)=>{const i=cu(e),r=class extends ot.Component{constructor(o){super(o),this.setComponentElRef=a=>{this.componentEl=a}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(o){uu(this.componentEl,this.props,o)}render(){const o=this.props,{children:a,forwardedRef:l,style:u,className:c,ref:d}=o,p=yu(o,["children","forwardedRef","style","className","ref"]);let f=Object.keys(p).reduce((v,x)=>{const C=p[x];if(x.indexOf("on")===0&&x[2]===x[2].toUpperCase()){const S=x.substring(2).toLowerCase();typeof document<"u"&&xa(S)&&(v[x]=C)}else{const S=typeof C;(S==="string"||S==="boolean"||S==="number")&&(v[va(x)]=C)}return v},{});const g=Object.assign(Object.assign({},f),{ref:mu(l,this.setComponentElRef),style:u});return m.createElement(e,g,a)}static get displayName(){return i}};return gu(r,i)},Ca=te("cpsl-alert"),vu=te("cpsl-auth-modal"),G=te("cpsl-button"),Sa=te("cpsl-code-input"),Fn=te("cpsl-divider"),xu=te("cpsl-hero"),M=te("cpsl-icon"),Cu=te("cpsl-icon-group"),Aa=te("cpsl-identicon"),Ea=te("cpsl-info-box"),ai=te("cpsl-input"),Ct=te("cpsl-qr-code"),wa=te("cpsl-select"),Ta=te("cpsl-select-item"),ge=te("cpsl-spinner"),Su=te("cpsl-tab"),Au=te("cpsl-tabs"),j=te("cpsl-text"),Eu=te("cpsl-tile-button"),wu="capsule",ba={allRenderFn:!0,appendChildSlotFix:!1,asyncLoading:!0,asyncQueue:!1,attachStyles:!0,cloneNodeFix:!1,cmpDidLoad:!0,cmpDidRender:!1,cmpDidUnload:!1,cmpDidUpdate:!1,cmpShouldUpdate:!1,cmpWillLoad:!0,cmpWillRender:!0,cmpWillUpdate:!1,connectedCallback:!1,constructableCSS:!0,cssAnnotations:!0,devTools:!1,disconnectedCallback:!0,element:!1,event:!0,experimentalScopedSlotChanges:!1,experimentalSlotFixes:!1,formAssociated:!1,hasRenderFn:!0,hostListener:!0,hostListenerTarget:!0,hostListenerTargetBody:!1,hostListenerTargetDocument:!1,hostListenerTargetParent:!1,hostListenerTargetWindow:!0,hotModuleReplacement:!1,hydrateClientSide:!1,hydrateServerSide:!1,hydratedAttribute:!1,hydratedClass:!0,hydratedSelectorName:"hydrated",initializeNextTick:!1,invisiblePrehydration:!0,isDebug:!1,isDev:!1,isTesting:!1,lazyLoad:!0,lifecycle:!0,lifecycleDOMEvents:!1,member:!0,method:!0,mode:!1,observeAttribute:!0,profile:!1,prop:!0,propBoolean:!0,propMutable:!0,propNumber:!0,propString:!0,reflect:!0,scoped:!1,scopedSlotTextContentFix:!1,scriptDataOpts:!1,shadowDelegatesFocus:!1,shadowDom:!0,slot:!0,slotChildNodesFix:!1,slotRelocation:!1,state:!0,style:!0,svg:!0,taskQueue:!0,transformTagName:!1,updatable:!0,vdomAttribute:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomPropOrAttr:!0,vdomRef:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,vdomXlink:!1,watchCallback:!0};var Tu=Object.defineProperty,bu=(e,t)=>{for(var n in t)Tu(e,n,{get:t[n],enumerable:!0})},li=new WeakMap,$e=e=>li.get(e),Gx=(e,t)=>li.set(t.$lazyInstance$=e,t),Iu=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return n.$onInstancePromise$=new Promise(s=>n.$onInstanceResolve$=s),n.$onReadyPromise$=new Promise(s=>n.$onReadyResolve$=s),e["s-p"]=[],e["s-rc"]=[],li.set(e,n)},to=(e,t)=>t in e,ae=(e,t)=>(0,console.error)(e,t),ss=new Map,_u=(e,t,n)=>{const s=e.$tagName$.replace(/-/g,"_"),i=e.$lazyBundleId$;if(!i)return;const r=ss.get(i);if(r)return r[s];{const o=a=>(ss.set(i,a),a[s]);switch(i){case"cpsl-alert_34":return Te(()=>import("./cpsl-alert_34.entry-DClgqLl6.js"),__vite__mapDeps([0,1,2])).then(o,ae);case"cpsl-col":return Te(()=>import("./cpsl-col.entry-ZNZovZuW.js"),__vite__mapDeps([3,1,2])).then(o,ae);case"cpsl-grid":return Te(()=>import("./cpsl-grid.entry-DZZFH1fD.js"),__vite__mapDeps([4,1,2])).then(o,ae);case"cpsl-hero":return Te(()=>import("./cpsl-hero.entry-Cdc-b9i2.js"),__vite__mapDeps([5,1,2])).then(o,ae);case"cpsl-identicon":return Te(()=>import("./cpsl-identicon.entry-CctVbZT3.js"),__vite__mapDeps([6,1,2])).then(o,ae);case"cpsl-info-box":return Te(()=>import("./cpsl-info-box.entry-CybM1788.js"),__vite__mapDeps([7,1,2])).then(o,ae);case"cpsl-modal-v2":return Te(()=>import("./cpsl-modal-v2.entry-C5rgrTLx.js"),__vite__mapDeps([8,1,2])).then(o,ae);case"cpsl-nav-button":return Te(()=>import("./cpsl-nav-button.entry-1LRY80xO.js"),__vite__mapDeps([9,1,2])).then(o,ae);case"cpsl-row":return Te(()=>import("./cpsl-row.entry-CngKRPWI.js"),__vite__mapDeps([10,1,2])).then(o,ae)}}return Te(()=>import(`./${i}.entry.js`),[]).then(o=>(ss.set(i,o),o[s]),ae)},Tn=new Map,Pu="{visibility:hidden}.hydrated{visibility:inherit}",Ia="slot-fb{display:contents}slot-fb[hidden]{display:none}",Xt=typeof window<"u"?window:{},be=Xt.document||{head:{}},ne={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,s)=>e.addEventListener(t,n,s),rel:(e,t,n,s)=>e.removeEventListener(t,n,s),ce:(e,t)=>new CustomEvent(e,t)},Lu=(()=>{let e=!1;try{be.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),Ru=e=>Promise.resolve(e),Ou=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Us=!1,no=[],_a=[],$u=(e,t)=>n=>{e.push(n),Us||(Us=!0,ne.$flags$&4?ci(Ws):ne.raf(Ws))},so=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){ae(n)}e.length=0},Ws=()=>{so(no),so(_a),(Us=no.length>0)&&ne.raf(Ws)},ci=e=>Ru().then(e),Du=$u(_a),io={},ju="http://www.w3.org/2000/svg",Nu="http://www.w3.org/1999/xhtml",ku=e=>e!=null,ui=e=>(e=typeof e,e==="object"||e==="function");function Pa(e){var t,n,s;return(s=(n=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?s:void 0}var Uu={};bu(Uu,{err:()=>La,map:()=>Wu,ok:()=>Fs,unwrap:()=>Fu,unwrapErr:()=>Mu});var Fs=e=>({isOk:!0,isErr:!1,value:e}),La=e=>({isOk:!1,isErr:!0,value:e});function Wu(e,t){if(e.isOk){const n=t(e.value);return n instanceof Promise?n.then(s=>Fs(s)):Fs(n)}if(e.isErr){const n=e.value;return La(n)}throw"should never get here"}var Fu=e=>{if(e.isOk)return e.value;throw e.value},Mu=e=>{if(e.isErr)return e.value;throw e.value},Ve=(e,t="")=>()=>{},Bu=(e,t)=>()=>{},Ra=(e,t,...n)=>{let s=null,i=null,r=!1,o=!1;const a=[],l=c=>{for(let d=0;d<c.length;d++)s=c[d],Array.isArray(s)?l(s):s!=null&&typeof s!="boolean"&&((r=typeof e!="function"&&!ui(s))&&(s=String(s)),r&&o?a[a.length-1].$text$+=s:a.push(r?bn(null,s):s),o=r)};if(l(n),t){t.key&&(i=t.key);{const c=t.className||t.class;c&&(t.class=typeof c!="object"?c:Object.keys(c).filter(d=>c[d]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,a,Gu);const u=bn(e,null);return u.$attrs$=t,a.length>0&&(u.$children$=a),u.$key$=i,u},bn=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n},Vu={},Hu=e=>e&&e.$tag$===Vu,Gu={forEach:(e,t)=>e.map(oo).forEach(t),map:(e,t)=>e.map(oo).map(t).map(Ku)},oo=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Ku=e=>{if(typeof e.vtag=="function"){const n={...e.vattrs};return e.vkey&&(n.key=e.vkey),e.vname&&(n.name=e.vname),Ra(e.vtag,n,...e.vchildren||[])}const t=bn(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},zu=(e,t)=>e!=null&&!ui(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,Xu=e=>$e(e).$hostElement$,Kx=(e,t,n)=>{const s=Xu(e);return{emit:i=>Oa(s,t,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:i})}},Oa=(e,t,n)=>{const s=ne.ce(t,n);return e.dispatchEvent(s),s},ro=new WeakMap,qu=(e,t,n)=>{let s=Tn.get(e);Ou&&n?(s=s||new CSSStyleSheet,typeof s=="string"?s=t:s.replaceSync(t)):s=t,Tn.set(e,s)},Yu=(e,t,n)=>{var s;const i=$a(t),r=Tn.get(i);if(e=e.nodeType===11?e:be,r)if(typeof r=="string"){e=e.head||e;let o=ro.get(e),a;if(o||ro.set(e,o=new Set),!o.has(i)){{a=be.createElement("style"),a.innerHTML=r;const l=(s=ne.$nonce$)!=null?s:Pa(be);l!=null&&a.setAttribute("nonce",l),e.insertBefore(a,e.querySelector("link"))}t.$flags$&4&&(a.innerHTML+=Ia),o&&o.add(i)}}else e.adoptedStyleSheets.includes(r)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,r]);return i},Ju=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,s=t.$flags$,i=Ve("attachStyles",t.$tagName$),r=Yu(n.shadowRoot?n.shadowRoot:n.getRootNode(),t);s&10&&(n["s-sc"]=r,n.classList.add(r+"-h")),i()},$a=(e,t)=>"sc-"+e.$tagName$,ao=(e,t,n,s,i,r)=>{if(n!==s){let o=to(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,u=lo(n),c=lo(s);l.remove(...u.filter(d=>d&&!c.includes(d))),l.add(...c.filter(d=>d&&!u.includes(d)))}else if(t==="style"){for(const l in n)(!s||s[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in s)(!n||s[l]!==n[l])&&(l.includes("-")?e.style.setProperty(l,s[l]):e.style[l]=s[l])}else if(t!=="key")if(t==="ref")s&&s(e);else if(!o&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):to(Xt,a)?t=a.slice(2):t=a[2]+t.slice(3),n||s){const l=t.endsWith(Da);t=t.replace(Qu,""),n&&ne.rel(e,t,n,l),s&&ne.ael(e,t,s,l)}}else{const l=ui(s);if((o||l&&s!==null)&&!i)try{if(e.tagName.includes("-"))e[t]=s;else{const u=s??"";t==="list"?o=!1:(n==null||e[t]!=u)&&(e[t]=u)}}catch{}s==null||s===!1?(s!==!1||e.getAttribute(t)==="")&&e.removeAttribute(t):(!o||r&4||i)&&!l&&(s=s===!0?"":s,e.setAttribute(t,s))}}},Zu=/\s/,lo=e=>e?e.split(Zu):[],Da="Capture",Qu=new RegExp(Da+"$"),ja=(e,t,n)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||io,r=t.$attrs$||io;for(const o of co(Object.keys(i)))o in r||ao(s,o,i[o],void 0,n,t.$flags$);for(const o of co(Object.keys(r)))ao(s,o,i[o],r[o],n,t.$flags$)};function co(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var xn,di,hi=!1,Ce=!1,In=(e,t,n,s)=>{const i=t.$children$[n];let r=0,o,a;if(i.$text$!==null)o=i.$elm$=be.createTextNode(i.$text$);else{if(Ce||(Ce=i.$tag$==="svg"),o=i.$elm$=be.createElementNS(Ce?ju:Nu,!hi&&ba.slotRelocation&&i.$flags$&2?"slot-fb":i.$tag$),Ce&&i.$tag$==="foreignObject"&&(Ce=!1),ja(null,i,Ce),ku(xn)&&o["s-si"]!==xn&&o.classList.add(o["s-si"]=xn),i.$children$)for(r=0;r<i.$children$.length;++r)a=In(e,i,r),a&&o.appendChild(a);i.$tag$==="svg"?Ce=!1:o.tagName==="foreignObject"&&(Ce=!0)}return o["s-hn"]=di,o},Na=(e,t,n,s,i,r)=>{let o=e,a;for(o.shadowRoot&&o.tagName===di&&(o=o.shadowRoot);i<=r;++i)s[i]&&(a=In(null,n,i),a&&(s[i].$elm$=a,Cn(o,a,t)))},ka=(e,t,n)=>{for(let s=t;s<=n;++s){const i=e[s];if(i){const r=i.$elm$;Ua(i),r&&r.remove()}}},ed=(e,t,n,s,i=!1)=>{let r=0,o=0,a=0,l=0,u=t.length-1,c=t[0],d=t[u],p=s.length-1,f=s[0],g=s[p],v,x;for(;r<=u&&o<=p;)if(c==null)c=t[++r];else if(d==null)d=t[--u];else if(f==null)f=s[++o];else if(g==null)g=s[--p];else if(on(c,f,i))dt(c,f,i),c=t[++r],f=s[++o];else if(on(d,g,i))dt(d,g,i),d=t[--u],g=s[--p];else if(on(c,g,i))dt(c,g,i),Cn(e,c.$elm$,d.$elm$.nextSibling),c=t[++r],g=s[--p];else if(on(d,f,i))dt(d,f,i),Cn(e,d.$elm$,c.$elm$),d=t[--u],f=s[++o];else{for(a=-1,l=r;l<=u;++l)if(t[l]&&t[l].$key$!==null&&t[l].$key$===f.$key$){a=l;break}a>=0?(x=t[a],x.$tag$!==f.$tag$?v=In(t&&t[o],n,a):(dt(x,f,i),t[a]=void 0,v=x.$elm$),f=s[++o]):(v=In(t&&t[o],n,o),f=s[++o]),v&&Cn(c.$elm$.parentNode,v,c.$elm$)}r>u?Na(e,s[p+1]==null?null:s[p+1].$elm$,n,s,o,p):o>p&&ka(t,r,u)},on=(e,t,n=!1)=>e.$tag$===t.$tag$?n?!0:e.$key$===t.$key$:!1,dt=(e,t,n=!1)=>{const s=t.$elm$=e.$elm$,i=e.$children$,r=t.$children$,o=t.$tag$,a=t.$text$;a===null?(Ce=o==="svg"?!0:o==="foreignObject"?!1:Ce,o==="slot"&&!hi||ja(e,t,Ce),i!==null&&r!==null?ed(s,i,t,r,n):r!==null?(e.$text$!==null&&(s.textContent=""),Na(s,null,t,r,0,r.length-1)):i!==null&&ka(i,0,i.length-1),Ce&&o==="svg"&&(Ce=!1)):e.$text$!==a&&(s.data=a)},Ua=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Ua)},Cn=(e,t,n)=>e==null?void 0:e.insertBefore(t,n),td=(e,t,n=!1)=>{const s=e.$hostElement$,i=e.$cmpMeta$,r=e.$vnode$||bn(null,null),o=Hu(t)?t:Ra(null,null,t);if(di=s.tagName,i.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},i.$attrsToReflect$.map(([a,l])=>o.$attrs$[l]=s[a])),n&&o.$attrs$)for(const a of Object.keys(o.$attrs$))s.hasAttribute(a)&&!["key","ref","style","class"].includes(a)&&(o.$attrs$[a]=s[a]);o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=r.$elm$=s.shadowRoot||s,xn=s["s-sc"],hi=(i.$flags$&1)!==0,dt(r,o,n)},Wa=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(n=>e.$onRenderResolve$=n))},Mn=(e,t)=>{if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}return Wa(e,e.$ancestorComponent$),Du(()=>nd(e,t))},nd=(e,t)=>{const n=e.$hostElement$,s=Ve("scheduleUpdate",e.$cmpMeta$.$tagName$),i=e.$lazyInstance$;if(!i)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let r;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map(([o,a])=>$t(i,o,a)),e.$queuedListeners$=void 0),r=$t(i,"componentWillLoad")),r=uo(r,()=>$t(i,"componentWillRender")),s(),uo(r,()=>id(e,i,t))},uo=(e,t)=>sd(e)?e.then(t).catch(n=>{console.error(n),t()}):t(),sd=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",id=async(e,t,n)=>{var s;const i=e.$hostElement$,r=Ve("update",e.$cmpMeta$.$tagName$),o=i["s-rc"];n&&Ju(e);const a=Ve("render",e.$cmpMeta$.$tagName$);od(e,t,i,n),o&&(o.map(l=>l()),i["s-rc"]=void 0),a(),r();{const l=(s=i["s-p"])!=null?s:[],u=()=>rd(e);l.length===0?u():(Promise.all(l).then(u),e.$flags$|=4,l.length=0)}},od=(e,t,n,s)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,td(e,t,s)}catch(i){ae(i,e.$hostElement$)}return null},rd=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,s=Ve("postUpdate",t),i=e.$lazyInstance$,r=e.$ancestorComponent$;e.$flags$&64?s():(e.$flags$|=64,Ma(n),$t(i,"componentDidLoad"),s(),e.$onReadyResolve$(n),r||Fa()),e.$onInstanceResolve$(n),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&ci(()=>Mn(e,!1)),e.$flags$&=-517},zx=e=>{{const t=$e(e),n=t.$hostElement$.isConnected;return n&&(t.$flags$&18)===2&&Mn(t,!1),n}},Fa=e=>{Ma(be.documentElement),ci(()=>Oa(Xt,"appload",{detail:{namespace:wu}}))},$t=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(s){ae(s)}},Ma=e=>{var t;return e.classList.add((t=ba.hydratedSelectorName)!=null?t:"hydrated")},ad=(e,t)=>$e(e).$instanceValues$.get(t),ld=(e,t,n,s)=>{const i=$e(e);if(!i)throw new Error(`Couldn't find host element for "${s.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const r=i.$hostElement$,o=i.$instanceValues$.get(t),a=i.$flags$,l=i.$lazyInstance$;n=zu(n,s.$members$[t][0]);const u=Number.isNaN(o)&&Number.isNaN(n),c=n!==o&&!u;if((!(a&8)||o===void 0)&&c&&(i.$instanceValues$.set(t,n),l)){if(s.$watchers$&&a&128){const d=s.$watchers$[t];d&&d.map(p=>{try{l[p](n,o,t)}catch(f){ae(f,r)}})}(a&18)===2&&Mn(i,!1)}},Ba=(e,t,n)=>{var s,i;const r=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);const o=Object.entries((s=t.$members$)!=null?s:{});if(o.map(([a,[l]])=>{l&31||n&2&&l&32?Object.defineProperty(r,a,{get(){return ad(this,a)},set(u){ld(this,a,u,t)},configurable:!0,enumerable:!0}):n&1&&l&64&&Object.defineProperty(r,a,{value(...u){var c;const d=$e(this);return(c=d==null?void 0:d.$onInstancePromise$)==null?void 0:c.then(()=>{var p;return(p=d.$lazyInstance$)==null?void 0:p[a](...u)})}})}),n&1){const a=new Map;r.attributeChangedCallback=function(l,u,c){ne.jmp(()=>{var d;const p=a.get(l);if(this.hasOwnProperty(p))c=this[p],delete this[p];else{if(r.hasOwnProperty(p)&&typeof this[p]=="number"&&this[p]==c)return;if(p==null){const f=$e(this),g=f==null?void 0:f.$flags$;if(g&&!(g&8)&&g&128&&c!==u){const v=f.$lazyInstance$,x=(d=t.$watchers$)==null?void 0:d[l];x==null||x.forEach(C=>{v[C]!=null&&v[C].call(v,c,u,l)})}return}}this[p]=c===null&&typeof this[p]=="boolean"?!1:c})},e.observedAttributes=Array.from(new Set([...Object.keys((i=t.$watchers$)!=null?i:{}),...o.filter(([l,u])=>u[0]&15).map(([l,u])=>{var c;const d=u[1]||l;return a.set(d,l),u[0]&512&&((c=t.$attrsToReflect$)==null||c.push([l,d])),d})]))}}return e},cd=async(e,t,n,s)=>{let i;if(!(t.$flags$&32)){if(t.$flags$|=32,n.$lazyBundleId$){const l=_u(n);if(l&&"then"in l){const c=Bu();i=await l,c()}else i=l;if(!i)throw new Error(`Constructor for "${n.$tagName$}#${t.$modeName$}" was not found`);i.isProxied||(n.$watchers$=i.watchers,Ba(i,n,2),i.isProxied=!0);const u=Ve("createInstance",n.$tagName$);t.$flags$|=8;try{new i(t)}catch(c){ae(c)}t.$flags$&=-9,t.$flags$|=128,u()}else{i=e.constructor;const l=e.localName;customElements.whenDefined(l).then(()=>t.$flags$|=128)}if(i&&i.style){let l;typeof i.style=="string"&&(l=i.style);const u=$a(n);if(!Tn.has(u)){const c=Ve("registerStyles",n.$tagName$);qu(u,l,!!(n.$flags$&1)),c()}}}const r=t.$ancestorComponent$,o=()=>Mn(t,!0);r&&r["s-rc"]?r["s-rc"].push(o):o()},ud=e=>{},dd=e=>{if(!(ne.$flags$&1)){const t=$e(e),n=t.$cmpMeta$,s=Ve("connectedCallback",n.$tagName$);if(t.$flags$&1)Va(e,t,n.$listeners$),t!=null&&t.$lazyInstance$||t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>ud());else{t.$flags$|=1;{let i=e;for(;i=i.parentNode||i.host;)if(i["s-p"]){Wa(t,t.$ancestorComponent$=i);break}}n.$members$&&Object.entries(n.$members$).map(([i,[r]])=>{if(r&31&&e.hasOwnProperty(i)){const o=e[i];delete e[i],e[i]=o}}),cd(e,t,n)}s()}},ho=e=>{$t(e,"disconnectedCallback")},hd=async e=>{if(!(ne.$flags$&1)){const t=$e(e);t.$rmListeners$&&(t.$rmListeners$.map(n=>n()),t.$rmListeners$=void 0),t!=null&&t.$lazyInstance$?ho(t.$lazyInstance$):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>ho(t.$lazyInstance$))}},fd=(e,t={})=>{var n;const s=Ve(),i=[],r=t.exclude||[],o=Xt.customElements,a=be.head,l=a.querySelector("meta[charset]"),u=be.createElement("style"),c=[];let d,p=!0;Object.assign(ne,t),ne.$resourcesUrl$=new URL(t.resourcesUrl||"./",be.baseURI).href;let f=!1;if(e.map(g=>{g[1].map(v=>{var x;const C={$flags$:v[0],$tagName$:v[1],$members$:v[2],$listeners$:v[3]};C.$flags$&4&&(f=!0),C.$members$=v[2],C.$listeners$=v[3],C.$attrsToReflect$=[],C.$watchers$=(x=v[4])!=null?x:{};const S=C.$tagName$,E=class extends HTMLElement{constructor(A){if(super(A),this.hasRegisteredEventListeners=!1,A=this,Iu(A,C),C.$flags$&1){if(!A.shadowRoot)A.attachShadow({mode:"open"});else if(A.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${C.$tagName$}! Mode is set to ${A.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}connectedCallback(){const A=$e(this);this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0,Va(this,A,C.$listeners$)),d&&(clearTimeout(d),d=null),p?c.push(this):ne.jmp(()=>dd(this))}disconnectedCallback(){ne.jmp(()=>hd(this))}componentOnReady(){return $e(this).$onReadyPromise$}};C.$lazyBundleId$=g[0],!r.includes(S)&&!o.get(S)&&(i.push(S),o.define(S,Ba(E,C,1)))})}),i.length>0&&(f&&(u.textContent+=Ia),u.textContent+=i.sort()+Pu,u.innerHTML.length)){u.setAttribute("data-styles","");const g=(n=ne.$nonce$)!=null?n:Pa(be);g!=null&&u.setAttribute("nonce",g),a.insertBefore(u,l?l.nextSibling:a.firstChild)}p=!1,c.length?c.map(g=>g.connectedCallback()):ne.jmp(()=>d=setTimeout(Fa,30)),s()},Xx=(e,t)=>t,Va=(e,t,n,s)=>{n&&n.map(([i,r,o])=>{const a=md(e,i),l=pd(t,o),u=gd(i);ne.ael(a,r,l,u),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>ne.rel(a,r,l,u))})},pd=(e,t)=>n=>{var s;try{e.$flags$&256?(s=e.$lazyInstance$)==null||s[t](n):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,n])}catch(i){ae(i)}},md=(e,t)=>t&8?Xt:e,gd=e=>Lu?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0;const yd=()=>{},vd=async(e,t)=>{if(!(typeof window>"u"))return await yd(),fd([["cpsl-hero",[[1,"cpsl-hero",{height:[2],hideFadeOut:[4,"hide-fade-out"],variant:[513],title:[513],subtitle:[513],withDefaultTheme:[4,"with-default-theme"]}]]],["cpsl-modal-v2",[[1,"cpsl-modal-v2",{enterTransitionDuration:[2,"enter-transition-duration"],exitTransitionDuration:[2,"exit-transition-duration"],elevated:[4],noOverlay:[4,"no-overlay"],open:[4],zIndexOverride:[2,"z-index-override"]},null,{open:["toggleHeight"]}]]],["cpsl-nav-button",[[1,"cpsl-nav-button",{disabled:[516],exactMainRouteMatch:[4,"exact-main-route-match"],exactSubRouteMatch:[4,"exact-sub-route-match"],route:[1],subRoutes:[16],path:[1]}]]],["cpsl-col",[[1,"cpsl-col",{offset:[1],offsetXs:[1,"offset-xs"],offsetSm:[1,"offset-sm"],offsetMd:[1,"offset-md"],offsetLg:[1,"offset-lg"],offsetXl:[1,"offset-xl"],pull:[1],pullXs:[1,"pull-xs"],pullSm:[1,"pull-sm"],pullMd:[1,"pull-md"],pullLg:[1,"pull-lg"],pullXl:[1,"pull-xl"],push:[1],pushXs:[1,"push-xs"],pushSm:[1,"push-sm"],pushMd:[1,"push-md"],pushLg:[1,"push-lg"],pushXl:[1,"push-xl"],size:[1],sizeXs:[1,"size-xs"],sizeSm:[1,"size-sm"],sizeMd:[1,"size-md"],sizeLg:[1,"size-lg"],sizeXl:[1,"size-xl"]},[[9,"resize","onResize"]]]]],["cpsl-grid",[[1,"cpsl-grid",{fixed:[4]}]]],["cpsl-identicon",[[1,"cpsl-identicon",{hash:[1],size:[2]}]]],["cpsl-info-box",[[1,"cpsl-info-box"]]],["cpsl-row",[[1,"cpsl-row"]]],["cpsl-alert_34",[[1,"cpsl-pagination",{initialPage:[2,"initial-page"],totalPages:[2,"total-pages"],visiblePages:[1026,"visible-pages"],currentPage:[32]},null,{currentPage:["watchChange"]}],[1,"cpsl-select",{anchorElId:[1,"anchor-el-id"],autoWidth:[4,"auto-width"],disabled:[4],dropdownMaxHeight:[2,"dropdown-max-height"],errorText:[1,"error-text"],formatValue:[16],helperText:[1,"helper-text"],id:[1],label:[1],placeholder:[1],required:[4],selectedValue:[1,"selected-value"],showFormattedSelectedItem:[4,"show-formatted-selected-item"],showOptionalLabel:[4,"show-optional-label"],showSearch:[4,"show-search"],searchPlaceholder:[1,"search-placeholder"],anchorEl:[32],hasFocus:[32],popoverOpen:[32],hasSelectedItem:[32]},[[0,"cpslSelectItemClick","selectItemClickHandler"],[0,"cpslOpen","onPopoverOpen"],[0,"cpslClose","onPopoverClose"]],{selectedValue:["onValueChange","handleValueChange"]}],[1,"cpsl-file-upload",{errorText:[1,"error-text"],externalFilename:[1,"external-filename"],externalSrc:[1,"external-src"],fileTypes:[16],helperText:[1,"helper-text"],label:[1],required:[4],showOptionalLabel:[4,"show-optional-label"],uploadFile:[16],file:[32],dragOver:[32],dragError:[32],isUploading:[32],uploadError:[32]}],[1,"cpsl-auth-modal",{enterTransitionDuration:[2,"enter-transition-duration"],exitTransitionDuration:[2,"exit-transition-duration"],noOverlay:[4,"no-overlay"],open:[4],zIndexOverride:[2,"z-index-override"],hasFooter:[32],isMobile:[32]},null,{open:["toggleModal"]}],[1,"cpsl-alert",{icon:[1],variant:[1]}],[1,"cpsl-checkbox",{checked:[4]}],[1,"cpsl-code-input",{code:[1025],errorText:[1,"error-text"],helperText:[1,"helper-text"],length:[2],type:[1]}],[1,"cpsl-drawer",{anchor:[1],anchorPosition:[2,"anchor-position"],noOverlay:[4,"no-overlay"],open:[4],size:[8],transitionDuration:[2,"transition-duration"],transitionFunction:[1,"transition-function"],variant:[1],zIndexOverride:[2,"z-index-override"],closedAnchorPosition:[32],showTransition:[32]}],[1,"cpsl-icon-group",{expandFrom:[1,"expand-from"],disabled:[4],icons:[16],isHovered:[32]}],[1,"cpsl-slide-button",{disabled:[4],endIcon:[1,"end-icon"],endText:[1,"end-text"],startIcon:[1,"start-icon"],startText:[1,"start-text"]}],[1,"cpsl-table",{hasHorizontalScroll:[32],hasVerticalScroll:[32]}],[1,"cpsl-tile-button",{src:[1],icon:[1]}],[1,"cpsl-app-bar",{height:[2],position:[1],zIndexOverride:[2,"z-index-override"]}],[1,"cpsl-avatar",{alt:[1],src:[1],variant:[1]}],[1,"cpsl-divider"],[1,"cpsl-dropdown",{width:[1],hasCpslSearch:[4,"has-cpsl-search"],items:[16],selectedItem:[1040],isOpen:[32],searchQuery:[32],filteredItems:[32]},[[9,"resize","handleResize"]],{selectedItem:["handleSelectedItemChange"],isOpen:["handleOpenChange"]}],[1,"cpsl-nav-button-group"],[1,"cpsl-pill",{text:[1]}],[1,"cpsl-progress-indicator",{totalSteps:[2,"total-steps"],step:[2]}],[1,"cpsl-qr-code",{url:[1],imageSrc:[1,"image-src"],size:[2]}],[1,"cpsl-radio",{checked:[4]}],[1,"cpsl-select-item",{selected:[4],value:[1]}],[1,"cpsl-switch",{checked:[4]}],[1,"cpsl-tab",{selected:[4],tab:[1]},[[8,"cpslTabsChanged","onTabsChanged"],[8,"cpslTabsInit","onTabsInit"]]],[1,"cpsl-tabs",{fullWidth:[4,"full-width"],selectedTab:[1,"selected-tab"],selectedTabRect:[32],loaded:[32]},null,{fullWidth:["updateSlider"],selectedTab:["updateTab"]}],[1,"cpsl-button-group",{selectedId:[1,"selected-id"]},null,{selectedId:["selectItem"]}],[1,"cpsl-input",{autocapitalize:[1],autocomplete:[1],autocorrect:[1],noAutoDisable:[4,"no-auto-disable"],autofocus:[4],disabled:[4],contrastText:[4,"contrast-text"],enterkeyhint:[1],errorText:[1,"error-text"],mask:[1],helperText:[1,"helper-text"],inputmode:[1],label:[1],max:[8],maxlength:[2],min:[8],minlength:[2],multiple:[4],name:[1],pattern:[1],placeholder:[1],readonly:[4],required:[4],showOptionalLabel:[4,"show-optional-label"],spellcheck:[4],startIconSrc:[1,"start-icon-src"],startIcon:[1,"start-icon"],step:[1],type:[1],value:[1025],hasFocus:[32],maskedInput:[32]},null,{disabled:["handleDisable"],mask:["handleSetupMask"],value:["handleValueChange"]}],[1,"cpsl-popover",{anchorEl:[16],anchorOriginHorizontal:[1,"anchor-origin-horizontal"],anchorOriginVertical:[1,"anchor-origin-vertical"],autoWidth:[4,"auto-width"],disabled:[4],preventBlur:[4,"prevent-blur"],transformOriginHorizontal:[1,"transform-origin-horizontal"],transformOriginVertical:[1,"transform-origin-vertical"],triggerAction:[1,"trigger-action"],trigger:[1],windowPadding:[2,"window-padding"],open:[32],positionX:[32],positionY:[32],closePopover:[64]},null,{trigger:["onTriggerChange"],triggerAction:["onTriggerChange"],preventBlur:["onTriggerChange"],anchorOriginHorizontal:["onAnchorChange"],anchorOriginVertical:["onAnchorChange"],open:["onOpenChange"]}],[1,"cpsl-spinner",{size:[2],speed:[2]}],[1,"cpsl-button",{as:[1],disabled:[516],fullWidth:[4,"full-width"],href:[1],size:[1],target:[1],variant:[513]}],[1,"cpsl-card"],[1,"cpsl-overlay",{enterTransitionDuration:[2,"enter-transition-duration"],exitTransitionDuration:[2,"exit-transition-duration"],open:[4],zIndexOverride:[2,"z-index-override"]},null,{open:["toggleHeight"]}],[1,"cpsl-text",{color:[1],variant:[1],weight:[1]}],[1,"cpsl-icon",{src:[1],icon:[1]}]]]],t)},qx=480,_n={foregroundColor:"#121212",backgroundColor:"#FAFAFA"},xd=[0,.04,.08,.16,.32,.48,.64,.8,.96],is={red:"rgba(240, 68, 56, 1)",yellow:"rgba(251, 188, 4, 1)",green:"rgba(52, 168, 83, 1)"},Yx={modalNoOverlay:0,appBar:1e4,overlay:10001,drawer:10004,modal:10005,popover:10006};function ht(e,t,n){return Math.min(Math.max(e,n),t)}class Cd extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var Lt=Cd;function Wt(e){if(typeof e!="string")throw new Lt(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=_d.test(e)?Ed(e):e;const n=wd.exec(t);if(n){const o=Array.from(n).slice(1);return[...o.slice(0,3).map(a=>parseInt(Ft(a,2),16)),parseInt(Ft(o[3]||"f",2),16)/255]}const s=Td.exec(t);if(s){const o=Array.from(s).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,16)),parseInt(o[3]||"ff",16)/255]}const i=bd.exec(t);if(i){const o=Array.from(i).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,10)),parseFloat(o[3]||"1")]}const r=Id.exec(t);if(r){const[o,a,l,u]=Array.from(r).slice(1).map(parseFloat);if(ht(0,100,a)!==a)throw new Lt(e);if(ht(0,100,l)!==l)throw new Lt(e);return[...Pd(o,a,l),Number.isNaN(u)?1:u]}throw new Lt(e)}function Sd(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0)%2341}const fo=e=>parseInt(e.replace(/_/g,""),36),Ad="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const n=fo(t.substring(0,3)),s=fo(t.substring(3)).toString(16);let i="";for(let r=0;r<6-s.length;r++)i+="0";return e[n]=`${i}${s}`,e},{});function Ed(e){const t=e.toLowerCase().trim(),n=Ad[Sd(t)];if(!n)throw new Lt(e);return`#${n}`}const Ft=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),wd=new RegExp(`^#${Ft("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Td=new RegExp(`^#${Ft("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),bd=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${Ft(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Id=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,_d=/^[a-z]+$/i,po=e=>Math.round(e*255),Pd=(e,t,n)=>{let s=n/100;if(t===0)return[s,s,s].map(po);const i=(e%360+360)%360/60,r=(1-Math.abs(2*s-1))*(t/100),o=r*(1-Math.abs(i%2-1));let a=0,l=0,u=0;i>=0&&i<1?(a=r,l=o):i>=1&&i<2?(a=o,l=r):i>=2&&i<3?(l=r,u=o):i>=3&&i<4?(l=o,u=r):i>=4&&i<5?(a=o,u=r):i>=5&&i<6&&(a=r,u=o);const c=s-r/2,d=a+c,p=l+c,f=u+c;return[d,p,f].map(po)};function Ld(e){if(e==="transparent")return 0;function t(r){const o=r/255;return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}const[n,s,i]=Wt(e);return .2126*t(n)+.7152*t(s)+.0722*t(i)}function Ha(e,t,n,s){return`rgba(${ht(0,255,e).toFixed()}, ${ht(0,255,t).toFixed()}, ${ht(0,255,n).toFixed()}, ${parseFloat(ht(0,1,s).toFixed(3))})`}function lt(e,t,n){const s=(I,N)=>N===3?I:I/255,[i,r,o,a]=Wt(e).map(s),[l,u,c,d]=Wt(t).map(s),p=d-a,f=n*2-1,v=((f*p===-1?f:f+p/(1+f*p))+1)/2,x=1-v,C=(i*x+l*v)*255,S=(r*x+u*v)*255,E=(o*x+c*v)*255,A=d*n+a*(1-n);return Ha(C,S,E,A)}function Rd(e){return Ld(e)>.179}function Od(e,t,n){return{r:255*n(e.r/255,t.r/255),g:255*n(e.g/255,t.g/255),b:255*n(e.b/255,t.b/255)}}function $d(e,t){return e*t}function Dd(e,t){return e+t-e*t}function jd(e,t){return Nd(t,e)}function Nd(e,t){return t<=.5?$d(e,2*t):Dd(e,2*t-1)}function rn(e,t,n){return Math.min(Math.max(e||0,t),n)}function os(e){return{r:rn(e.r,0,255),g:rn(e.g,0,255),b:rn(e.b,0,255),a:rn(e.a,0,1)}}function mo(e){return{r:255*e.r,g:255*e.g,b:255*e.b,a:e.a}}function kd(e){return{r:e.r/255,g:e.g/255,b:e.b/255,a:e.a}}function go(e,t){t===void 0&&(t=0);var n=Math.pow(10,t);return{r:Math.round(e.r*n)/n,g:Math.round(e.g*n)/n,b:Math.round(e.b*n)/n,a:e.a}}function rs(e,t,n,s,i,r){return(1-t/n)*s+t/n*Math.round((1-e)*i+e*r)}function Ud(e,t,n,s,i){i===void 0&&(i={unitInput:!1,unitOutput:!1,roundOutput:!0}),i.unitInput&&(e=mo(e),t=mo(t)),e=os(e);var r=(t=os(t)).a+e.a-t.a*e.a,o=n(e,t,s),a=os({r:rs(e.a,t.a,r,e.r,t.r,o.r),g:rs(e.a,t.a,r,e.g,t.g,o.g),b:rs(e.a,t.a,r,e.b,t.b,o.b),a:r});return a=i.unitOutput?kd(a):i.roundOutput?go(a):function(l){return go(l,9)}(a),a}function Wd(e,t){return Ud(e,t,Od,jd)}const as=e=>{const t=new Option().style;return t.color=e,t.color!==""},Fd=e=>e.replace(/([a-z0â€“9])([A-Z])/g,"$1-$2").toLowerCase(),fi=(e,t)=>{let n={};for(const s in t){const i=`${e}-${Fd(s)}`;typeof t[s]=="object"&&t[s]!==null?n=Object.assign(Object.assign({},n),fi(i,t[s])):n[i]=t[s]}return n},Md=e=>fi("--cpsl-color",e),Bd=e=>fi("--cpsl-border-radius",e),ls=(e,t)=>{const n=Wt(e),s=Wt(t),i=Wd({r:n[0],g:n[1],b:n[2],a:.1},{r:s[0],g:s[1],b:s[2],a:s[3]});return Ha(i.r,i.g,i.b,i.a)},Vd=({borderRadius:e,customBorderRadii:t})=>{let n,s,i=4;const r=1e3;let o=!1,a=!1;switch(e){case"none":{a=!0,n=0,s=0,i=0;break}case"xs":{n=2,s=4,i=2;break}case"sm":{n=4,s=8;break}case"md":{n=8,s=16;break}case"xl":{n=16,s=32;break}case"full":{n=24,s=32,o=!0;break}default:case"lg":{n=12,s=24;break}}if(document.documentElement.style.setProperty("--cpsl-border-radius-input",`${o?r:n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-select",`${o?r:n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-file",`${o?r:n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-alert",`${o?r:n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-tabs",`${a?0:r}px`),document.documentElement.style.setProperty("--cpsl-border-radius-primary-button",`${o?r:n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-secondary-button",`${o?r:n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-tertiary-button",`${o?r:n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-destructive-button",`${o?r:n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-tile-button",`${n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-qr-code",`${s}px`),document.documentElement.style.setProperty("--cpsl-border-radius-info-box",`${n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-table-container",`${n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-avatar",`${n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-button-group",`${n}px`),document.documentElement.style.setProperty("--cpsl-border-radius-card",`${s}px`),document.documentElement.style.setProperty("--cpsl-border-radius-modal",`${s}px`),document.documentElement.style.setProperty("--cpsl-border-radius-checkbox",`${i}px`),document.documentElement.style.setProperty("--cpsl-border-radius-switch",`${a?0:r}px`),document.documentElement.style.setProperty("--cpsl-border-radius-pill",`${a?0:r}px`),document.documentElement.style.setProperty("--cpsl-border-radius-radio",`${r}px`),t){const l=Bd(t);Object.entries(l).forEach(([u,c])=>document.documentElement.style.setProperty(u,c))}},Hd={body2XS:"body-2xs",bodyXS:"body-xs",bodyS:"body-s",bodyM:"body-m",bodyL:"body-l",bodyXL:"body-xl",headingXS:"heading-xs",headingS:"heading-s",headingM:"heading-m",headingL:"heading-l",headingXL:"heading-xl",heading2XL:"heading-2xl"},Gd=({font:e,customFontSizes:t})=>{e&&document.documentElement.style.setProperty("--cpsl-default-font",e),Object.entries(Hd).forEach(([n,s])=>{t!=null&&t[n]?document.documentElement.style.setProperty(`--cpsl-font-size-${s}`,t[n]):document.documentElement.style.removeProperty(`--cpsl-font-size-${s}`)})},Kd=({foregroundColor:e,backgroundColor:t,accentColor:n,isDarkTheme:s,customPalette:i})=>{(!e||!as(e))&&(e=_n.foregroundColor),(!t||!as(t))&&(t=_n.backgroundColor),(!n||!as(n))&&(n=e);const r=n?!Rd(n):!1,o={foregroundColors:[],backgroundColors:[],accentColors:[]},a=s?"#FFFFFF":"#000000",l=s?"#000000":"#FFFFFF",u=r?"#FFFFFF":"#000000";xd.forEach(v=>{o.foregroundColors.push(lt(e,l,v)),o.backgroundColors.push(lt(t,a,v)),o.accentColors.push(lt(n,u,v))}),document.documentElement.style.setProperty("--cpsl-color-background-0",o.backgroundColors[0]),document.documentElement.style.setProperty("--cpsl-color-background-4",o.backgroundColors[1]),document.documentElement.style.setProperty("--cpsl-color-background-8",o.backgroundColors[2]),document.documentElement.style.setProperty("--cpsl-color-background-16",o.backgroundColors[3]),document.documentElement.style.setProperty("--cpsl-color-background-32",o.backgroundColors[4]),document.documentElement.style.setProperty("--cpsl-color-background-48",o.backgroundColors[5]),document.documentElement.style.setProperty("--cpsl-color-background-64",o.backgroundColors[6]),document.documentElement.style.setProperty("--cpsl-color-background-80",o.backgroundColors[7]),document.documentElement.style.setProperty("--cpsl-color-background-96",o.backgroundColors[8]),document.documentElement.style.setProperty("--cpsl-color-foreground-0",o.foregroundColors[0]),document.documentElement.style.setProperty("--cpsl-color-foreground-4",o.foregroundColors[1]),document.documentElement.style.setProperty("--cpsl-color-foreground-8",o.foregroundColors[2]),document.documentElement.style.setProperty("--cpsl-color-foreground-16",o.foregroundColors[3]),document.documentElement.style.setProperty("--cpsl-color-foreground-32",o.foregroundColors[4]),document.documentElement.style.setProperty("--cpsl-color-foreground-48",o.foregroundColors[5]),document.documentElement.style.setProperty("--cpsl-color-foreground-64",o.foregroundColors[6]),document.documentElement.style.setProperty("--cpsl-color-foreground-80",o.foregroundColors[7]),document.documentElement.style.setProperty("--cpsl-color-foreground-96",o.foregroundColors[8]),document.documentElement.style.setProperty("--cpsl-color-accent-0",o.accentColors[0]),document.documentElement.style.setProperty("--cpsl-color-accent-4",o.accentColors[1]),document.documentElement.style.setProperty("--cpsl-color-accent-8",o.accentColors[2]),document.documentElement.style.setProperty("--cpsl-color-accent-16",o.accentColors[3]),document.documentElement.style.setProperty("--cpsl-color-accent-32",o.accentColors[4]),document.documentElement.style.setProperty("--cpsl-color-accent-48",o.accentColors[5]),document.documentElement.style.setProperty("--cpsl-color-accent-64",o.accentColors[6]),document.documentElement.style.setProperty("--cpsl-color-accent-80",o.accentColors[7]),document.documentElement.style.setProperty("--cpsl-color-accent-96",o.accentColors[8]),document.documentElement.style.setProperty("--cpsl-color-contrast",s?"#FFFFFF":"#000000");const c="#FFFFFF",d=.72,p=ls(e,is.red),f=ls(e,is.yellow),g=ls(e,is.green);if(document.documentElement.style.setProperty("--cpsl-color-utility-red",p),document.documentElement.style.setProperty("--cpsl-color-utility-yellow",f),document.documentElement.style.setProperty("--cpsl-color-utility-green",g),document.documentElement.style.setProperty("--cpsl-color-utility-red-light",lt(p,c,d)),document.documentElement.style.setProperty("--cpsl-color-utility-yellow-light",lt(f,c,d)),document.documentElement.style.setProperty("--cpsl-color-utility-green-light",lt(g,c,d)),i){const v=Md(i);Object.entries(v).forEach(([x,C])=>document.documentElement.style.setProperty(x,C))}},zd=({foregroundColor:e=_n.foregroundColor,backgroundColor:t=_n.backgroundColor,accentColor:n,darkForegroundColor:s,darkBackgroundColor:i,darkAccentColor:r,mode:o="light",font:a,customPalette:l,borderRadius:u,customFontSizes:c,customBorderRadii:d})=>{const p=o==="dark";Kd({foregroundColor:p?s??e:e,backgroundColor:p?i??t:t,accentColor:p?r??n:n,customPalette:l,isDarkTheme:p}),Gd({font:a,customFontSizes:c}),Vd({borderRadius:u,customBorderRadii:d})};var y;(function(e){e.AUTH_MAIN="AUTH_MAIN",e.AUTH_MORE="AUTH_MORE",e.EX_WALLET_MORE="EX_WALLET_MORE",e.EX_WALLET_SELECTED="EX_WALLET_SELECTED",e.VERIFICATIONS="VERIFICATIONS",e.AWAITING_OAUTH="AWAITING_OAUTH",e.FARCASTER_OAUTH="FARCASTER_OAUTH",e.BIOMETRIC_CREATION="BIOMETRIC_CREATION",e.AWAITING_BIOMETRIC_CREATION="AWAITING_BIOMETRIC_CREATION",e.AWAITING_WALLET_CREATION="AWAITING_WALLET_CREATION",e.WALLET_CREATION_DONE="WALLET_CREATION_DONE",e.SECRET="SECRET",e.BIOMETRIC_LOGIN="BIOMETRIC_LOGIN",e.AWAITING_BIOMETRIC_LOGIN="AWAITING_BIOMETRIC_LOGIN",e.LOGIN_DONE="LOGIN_DONE",e.SETUP_2FA="SETUP_2FA",e.VERIFY_2FA="VERIFY_2FA",e.TWO_FACTOR_DONE="TWO_FACTOR_DONE",e.ADD_FUNDS="ADD_FUNDS",e.ADD_FUNDS_AWAITING="ADD_FUNDS_AWAITING",e.ADD_FUNDS_SUCCESS="ADD_FUNDS_SUCCESS",e.ADD_FUNDS_FAILURE="ADD_FUNDS_FAILURE",e.ACCOUNT_MAIN="ACCOUNT_MAIN",e.CHAIN_SWITCH="CHAIN_SWITCH"})(y||(y={}));var Ke;(function(e){e.ACCOUNT_MAIN="ACCOUNT_MAIN",e.ADD_FUNDS="ADD_FUNDS",e.ADD_FUNDS_AWAITING="ADD_FUNDS_AWAITING",e.ADD_FUNDS_SUCCESS="ADD_FUNDS_SUCCESS",e.ADD_FUNDS_FAILURE="ADD_FUNDS_FAILURE",e.CHAIN_SWITCH="CHAIN_SWITCH"})(Ke||(Ke={}));const yo={[Ke.ACCOUNT_MAIN]:void 0,[Ke.ADD_FUNDS]:y.ACCOUNT_MAIN,[Ke.ADD_FUNDS_AWAITING]:y.ADD_FUNDS,[Ke.ADD_FUNDS_SUCCESS]:y.ACCOUNT_MAIN,[Ke.ADD_FUNDS_FAILURE]:y.ACCOUNT_MAIN,[Ke.CHAIN_SWITCH]:y.ACCOUNT_MAIN};var q;(function(e){e.AUTH_MAIN="AUTH_MAIN",e.AUTH_MORE="AUTH_MORE",e.EX_WALLET_MORE="EX_WALLET_MORE",e.EX_WALLET_SELECTED="EX_WALLET_SELECTED",e.VERIFICATIONS="VERIFICATIONS",e.AWAITING_OAUTH="AWAITING_OAUTH",e.FARCASTER_OAUTH="FARCASTER_OAUTH",e.BIOMETRIC_CREATION="BIOMETRIC_CREATION",e.AWAITING_BIOMETRIC_CREATION="AWAITING_BIOMETRIC_CREATION",e.AWAITING_WALLET_CREATION="AWAITING_WALLET_CREATION",e.WALLET_CREATION_DONE="WALLET_CREATION_DONE",e.SECRET="SECRET",e.SETUP_2FA="SETUP_2FA",e.VERIFY_2FA="VERIFY_2FA",e.TWO_FACTOR_DONE="TWO_FACTOR_DONE",e.ADD_FUNDS="ADD_FUNDS",e.ADD_FUNDS_AWAITING="ADD_FUNDS_AWAITING",e.ADD_FUNDS_SUCCESS="ADD_FUNDS_SUCCESS",e.ADD_FUNDS_FAILURE="ADD_FUNDS_FAILURE"})(q||(q={}));const vo={[q.AUTH_MAIN]:void 0,[q.AUTH_MORE]:y.AUTH_MAIN,[q.EX_WALLET_MORE]:y.AUTH_MAIN,[q.EX_WALLET_SELECTED]:y.AUTH_MAIN,[q.VERIFICATIONS]:y.AUTH_MAIN,[q.AWAITING_OAUTH]:y.AUTH_MAIN,[q.FARCASTER_OAUTH]:y.AUTH_MAIN,[q.BIOMETRIC_CREATION]:y.AUTH_MAIN,[q.AWAITING_BIOMETRIC_CREATION]:y.BIOMETRIC_CREATION,[q.AWAITING_WALLET_CREATION]:void 0,[q.WALLET_CREATION_DONE]:void 0,[q.SECRET]:void 0,[q.SETUP_2FA]:y.SECRET,[q.VERIFY_2FA]:y.SETUP_2FA,[q.TWO_FACTOR_DONE]:void 0,[q.ADD_FUNDS]:void 0,[q.ADD_FUNDS_AWAITING]:y.ADD_FUNDS,[q.ADD_FUNDS_SUCCESS]:void 0,[q.ADD_FUNDS_FAILURE]:void 0};var ee;(function(e){e.AUTH_MAIN="AUTH_MAIN",e.AUTH_MORE="AUTH_MORE",e.EX_WALLET_MORE="EX_WALLET_MORE",e.EX_WALLET_SELECTED="EX_WALLET_SELECTED",e.AWAITING_OAUTH="AWAITING_OAUTH",e.FARCASTER_OAUTH="FARCASTER_OAUTH",e.BIOMETRIC_LOGIN="BIOMETRIC_LOGIN",e.AWAITING_BIOMETRIC_LOGIN="AWAITING_BIOMETRIC_LOGIN",e.AWAITING_WALLET_CREATION="AWAITING_WALLET_CREATION",e.WALLET_CREATION_DONE="WALLET_CREATION_DONE",e.SECRET="SECRET",e.SETUP_2FA="SETUP_2FA",e.VERIFY_2FA="VERIFY_2FA",e.TWO_FACTOR_DONE="TWO_FACTOR_DONE",e.LOGIN_DONE="LOGIN_DONE",e.ADD_FUNDS="ADD_FUNDS",e.ADD_FUNDS_AWAITING="ADD_FUNDS_AWAITING",e.ADD_FUNDS_SUCCESS="ADD_FUNDS_SUCCESS",e.ADD_FUNDS_FAILURE="ADD_FUNDS_FAILURE"})(ee||(ee={}));const xo={[ee.AUTH_MAIN]:void 0,[ee.AUTH_MORE]:y.AUTH_MAIN,[q.EX_WALLET_MORE]:y.AUTH_MAIN,[q.EX_WALLET_SELECTED]:y.AUTH_MAIN,[ee.AWAITING_OAUTH]:y.AUTH_MAIN,[ee.FARCASTER_OAUTH]:y.AUTH_MAIN,[ee.BIOMETRIC_LOGIN]:y.AUTH_MAIN,[ee.AWAITING_BIOMETRIC_LOGIN]:y.BIOMETRIC_LOGIN,[ee.AWAITING_WALLET_CREATION]:void 0,[ee.WALLET_CREATION_DONE]:void 0,[ee.SECRET]:void 0,[ee.SETUP_2FA]:void 0,[ee.VERIFY_2FA]:y.SETUP_2FA,[ee.TWO_FACTOR_DONE]:void 0,[ee.LOGIN_DONE]:void 0,[ee.ADD_FUNDS]:y.LOGIN_DONE,[ee.ADD_FUNDS_AWAITING]:y.ADD_FUNDS,[ee.ADD_FUNDS_SUCCESS]:void 0,[ee.ADD_FUNDS_FAILURE]:void 0},Xd=(e,t)=>({resetState:()=>e(Ya),setOnModalStepChange:n=>e({onModalStepChange:n}),setStep:n=>{const s=t().onModalStepChange,i=t().step;e({step:n}),s==null||s({previousStep:i,currentStep:n,canGoBack:t().hasPreviousStep()})},decrementStep:()=>{const n=t().onModalStepChange,s=t().flow==="login",i=t().flow==="account",r=t().step;r===y.EX_WALLET_SELECTED&&e({selectedExternalWalletId:void 0,isExternalWalletConnecting:!1,externalWalletError:void 0});const o=(i?yo:s?xo:vo)[r];o&&(e({step:o,stepDirection:-1}),n==null||n({previousStep:r,currentStep:o,canGoBack:t().hasPreviousStep()}))},hasPreviousStep:()=>{const n=t().flow==="login",s=t().flow==="account",i=t().step;return!!(s?yo[i]:n?xo[i]:vo[i])},setLoginWindow:n=>{e({loginWindow:n})},setFlow:n=>e({flow:n}),isLogin:()=>t().flow==="login",isAccount:()=>t().flow==="account",setWebAuthURLForLogin:n=>e({webAuthURLForLogin:n}),setWebAuthURLForCreate:n=>e({webAuthURLForCreate:n}),setOnRampPurchase:n=>e(s=>({onRampPurchase:Object.assign(Object.assign({},s.onRampPurchase||{}),n)})),setOnRampConfig:n=>e({onRampConfig:n}),setNetworks:n=>e({networks:n}),setIsFullyLoggedIn:n=>e({isFullyLoggedIn:n}),setAccountAddFundTab:n=>e({accountAddFundTab:n}),setSelectedExternalWalletId:n=>e({selectedExternalWalletId:n}),setIsExternalWalletConnecting:n=>e({isExternalWalletConnecting:n}),setExternalWalletError:n=>e({externalWalletError:n}),setIsUsingMobileConnector:n=>e({isUsingMobileConnector:n}),setStepDirection:n=>e({stepDirection:n})});var qd=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Yd=Ie.pki.rsa,Ga="RSA-OAEP",Ka="794241bc819a125a7b78ea313decc0bc";function cs(e){const t=Ie.pki.publicKeyToRSAPublicKeyPem(e.publicKey);return ie.from(t,"utf-8").toString("hex")}function Jd(e){return ie.from(e,"hex").toString("utf-8")}function us(e,t){return qd(this,void 0,void 0,function*(){const s={bits:2048,e:65537,prng:Ie.random.createInstance()};if(!e.disableWorkers){s.workLoad=100,s.workers=-1;const i=yield fetch(`${Ne(e)}/static/js/prime.worker.min.js`),r=new Blob([yield i.text()],{type:"application/javascript"});s.workerScript=URL.createObjectURL(r)}return new Promise((i,r)=>Yd.generateKeyPair(s,(o,a)=>{o&&r(o),i(a)}))})}function Zd(e){const t=Ie.random.getBytesSync(16),n=Ie.cipher.createCipher("AES-CBC",t);n.start({iv:Ka}),n.update(Ie.util.createBuffer(e)),n.finish();const s=n.output.toHex();return{key:t,encryptedMessageHex:s}}function Qd(e,t){const n=Ie.cipher.createDecipher("AES-CBC",e);return n.start({iv:Ka}),n.update(Ie.util.createBuffer(Ie.util.hexToBytes(t))),n.finish(),n.output.toString()}function eh(e,t,n){const s=ie.from(n,"hex").toString("utf-8"),i=e.decrypt(s,Ga);return Qd(i,t)}function th(e,t){const{key:n,encryptedMessageHex:s}=Zd(t),i=Jd(e),o=Ie.pki.publicKeyFromPem(i).encrypt(n,Ga),a=ie.from(o,"utf-8").toString("hex");return{encryptedMessageHex:s,encryptedKeyHex:a}}function za(e){switch(e){case Pe.DEV:return"http://localhost:8080/";case Pe.SANDBOX:return"https://api.sandbox.usecapsule.com/";case Pe.BETA:return"https://api.beta.usecapsule.com/";case Pe.PROD:return"https://api.usecapsule.com/";default:throw new Error(`unsupported env: ${e}`)}}function Jx(e,t){const n=t?"ws":"http";switch(e){case Pe.DEV:return`${n}://localhost:3000`;case Pe.SANDBOX:return`${n}s://mpc-network.sandbox.usecapsule.com`;case Pe.BETA:return`${n}s://mpc-network.beta.usecapsule.com`;case Pe.PROD:return`${n}s://mpc-network.prod.usecapsule.com`;default:throw new Error(`unsupported env: ${e}`)}}function nh(e,t,n,s,i,r){return new Kc({userManagementHost:za(e),version:e===Pe.DEV?"dev":t,apiKey:n,opts:{useFetchAdapter:s},retrieveSessionCookie:i,persistSessionCookie:r})}function sh(e,t){const n=zc.create({baseURL:e});return t&&(n.defaults.adapter=function(s){return fetch(s.baseURL+s.url,{method:s.method,headers:s.headers,body:s.data,credentials:s.withCredentials?"include":void 0}).then(i=>i.text().then(r=>({data:r,status:i.status,statusText:i.statusText,headers:i.headers,config:s,request:fetch}))).catch(function(i){throw i})}),n}class Mt{constructor(t,n,s){this.walletId=t,this.keyshare=n,this.address=s,this.backupDecryptionKey=ie.from(Xc.random.getBytesSync(32),"binary").toString("hex")}static buildFrom(t){try{const n=JSON.parse(t);return Object.assign(new Mt("","",""),n)}catch{const s=new Mt("","","");return s.backupDecryptionKey=t.split("|")[0],s}}getPublicEncryptionKey(){return ie.from(ha.privateToPublic(ie.from(this.backupDecryptionKey,"hex")))}getPublicEncryptionKeyHex(){return this.getPublicEncryptionKey().toString("hex")}encryptForSelf(t){try{const n=this.getPublicEncryptionKey();return vn.Encrypt(n,ie.from(t,"ucs2")).toString("base64")}catch{throw Error("Error encrypting backup")}}static encryptWithPublicKey(t,n){try{return vn.Encrypt(t,ie.from(n,"ucs2")).toString("base64")}catch{throw Error("Error encrypting backup")}}decrypt(t){try{const n=ie.from(t,"base64");return vn.Decrypt(ie.from(this.backupDecryptionKey,"hex"),n).toString("ucs2")}catch{throw Error("Error decrypting backup")}}}var ih=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};function Xa(e,t,n,s,i,r=!1,o){return ih(this,void 0,void 0,function*(){if(r)return yield e.capsuleClient.uploadUserKeyShares(t,s.map(c=>Object.assign({walletId:n},c))),"";let a,l;const{recoveryPublicKeys:u}=yield e.capsuleClient.getRecoveryPublicKeys(t);if(u!=null&&u.length)a=u.map(c=>{const{id:d,publicKey:p}=c,f=Mt.encryptWithPublicKey(ie.from(p,"hex"),i);return{walletId:n,encryptedShare:f,type:Ds.USER,encryptor:js.RECOVERY,recoveryPublicKeyId:d}});else{l=new Mt(n,"","");const{recoveryPublicKeys:c}=yield e.capsuleClient.persistRecoveryPublicKeys(t,[l.getPublicEncryptionKeyHex()]),d=l.encryptForSelf(i);a=[{walletId:n,encryptedShare:d,type:Ds.USER,encryptor:js.RECOVERY,recoveryPublicKeyId:c[0].id}]}return yield e.capsuleClient.uploadUserKeyShares(t,[...s.map(c=>Object.assign({walletId:n},c)),...r?[]:a]),yield e.capsuleClient.distributeCapsuleShare(Object.assign({userId:t,walletId:n,useDKLS:e.useDKLS},o)),l?JSON.stringify(l):""})}var oh=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};function ds(e,t,n,s,i=!1,r,o){return oh(this,void 0,void 0,function*(){const l=(yield e.capsuleClient.getSessionPublicKeys(t)).data.keys.map(u=>{if(!u.publicKey)return;const{encryptedMessageHex:c,encryptedKeyHex:d}=th(u.sigDerivedPublicKey,s);return{encryptedShare:c,encryptedKey:d,type:Ds.USER,encryptor:js.BIOMETRICS,biometricPublicKey:u.sigDerivedPublicKey,partnerId:o}}).filter(Boolean);return yield Xa(e,t,n,l,s,i,r)})}var rh=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};function ah(e,t){return rh(this,void 0,void 0,function*(){let n,s;for(;;)try{n=qc.randomBytes(32).toString("hex"),s=ha.privateToPublic(es.from(n,"hex"));break}catch{continue}const i=es.from(s),r=vn.Encrypt(i,es.from(e,"ucs2")).toString("base64"),{data:{id:o}}=yield t.tempTrasmissionInit(r);return encodeURIComponent(o+"|"+n)})}const lh=new Yc.ec("secp256k1");function Zx(e){return e.startsWith("0x")&&(e=e.slice(2)),`${parseInt(e,16)}`}function Qx(e){return`0x${parseInt(e).toString(16)}`}function Co(e){var t;return!!(!((t=e[ze.COSMOS])===null||t===void 0)&&t.prefix)}function ch(e){switch(e.length){case 33:return e;case 65:return Uint8Array.from(lh.keyFromPublic(e).getPublic(!0,"array"));default:throw new Error("Invalid pubkey length")}}function uh(e){if(e.length!==33)throw new Error(`Invalid Secp256k1 pubkey length (compressed): ${e.length}`);return Zc(Qc(e))}function dh(e,t){const n=new Uint8Array(ie.from(e.startsWith("0x")?e.slice(2):e,"hex")),s=ch(n);return Jc.toBech32(t,uh(s))}var _=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const{pki:So,jsbn:hh}=Ie,fh=30*60*1e3,ph=60*60*1e3,mh="1.24.1";function Ao(e){return["USER","PREGEN"].includes(e.type)&&(e.isPregen=e.type==="PREGEN",e.type=e.scheme===ut.ED25519?ze.SOLANA:ze.EVM),e}var Eo;(function(e){e.INITIATED="INITIATED",e.READY="READY",e.EXPIRED="EXPIRED",e.FINISHED="FINISHED",e.CANCELLED="CANCELLED"})(Eo||(Eo={}));var xe;(function(e){e.EMAIL="EMAIL",e.PHONE="PHONE"})(xe||(xe={}));var he;(function(e){e.EVM="EVM",e.SOLANA="SOLANA",e.COSMOS="COSMOS"})(he||(he={}));const fe="@CAPSULE/",hs=`${fe}e-mail`,wo=`${fe}phone`,To=`${fe}countryCode`,gh=`${fe}farcasterUsername`,fs=`${fe}userId`,bo=`${fe}ed25519Wallets`,ct=`${fe}wallets`,ps=`${fe}externalWallets`,ms=`${fe}currentWalletIds`,gs=`${fe}currentExternalWalletAddresses`,bt=`${fe}sessionCookie`,an=`${fe}loginEncryptionKeyPair`,ln=2e3,Io=1e3;function yh(e,t){return e.env!==Pe.PROD?Date.now()-t<=ph:Date.now()-t<=fh}function qa(e){var t;return(t=fa(e))===null||t===void 0?void 0:t.formatInternational().replace(/[^\d+]/g,"")}function vh(e,t){return qa(`${e[0]!=="+"?"+":""}${e}${t}`)}function _o(e){return Object.entries(e).map(([t,n])=>n?`&${t}=${encodeURIComponent(n)}`:"").join("")}class pi{convertBigInt(t){const n=new hh.BigInteger(null);return n.data=t.data,n.s=t.s,n.t=t.t,n}convertEncryptionKeyPair(t){return{privateKey:So.setRsaPrivateKey(this.convertBigInt(t.privateKey.n),this.convertBigInt(t.privateKey.e),this.convertBigInt(t.privateKey.d),this.convertBigInt(t.privateKey.p),this.convertBigInt(t.privateKey.q),this.convertBigInt(t.privateKey.dP),this.convertBigInt(t.privateKey.dQ),this.convertBigInt(t.privateKey.qInv)),publicKey:So.setRsaPublicKey(this.convertBigInt(t.publicKey.n),this.convertBigInt(t.publicKey.e))}}isPortal(){return typeof window<"u"&&Ne(this.ctx).includes(window.location.host)}requireApiKey(){if(!this.ctx.apiKey)throw new Error(`in order to create a wallet or user with Capsule, you
        must provide an API key to the capsule instance`)}isWalletSupported(t){return Object.keys(this.supportedWalletTypes).some(n=>!!Yi[t.scheme][n])}isWalletOwned(t){return this.isWalletSupported(t)&&!t.pregenIdentifier&&!t.pregenIdentifierType&&!!this.userId&&t.userId===this.userId}isPregenWalletUnclaimed(t){return this.isWalletSupported(t)&&t.isPregen&&!!t.pregenIdentifier&&!!t.pregenIdentifierType}isPregenWalletClaimable(t){return this.isWalletSupported(t)&&this.isPregenWalletUnclaimed(t)&&(t.pregenIdentifier===this.email&&t.pregenIdentifierType===xe.EMAIL||qa(t.pregenIdentifier)===this.getPhoneNumber()&&t.pregenIdentifierType===xe.PHONE)}isWalletUsable(t,{type:n,scheme:s,forbidPregen:i}={},r=!1){let o;if(!this.wallets[t])o=`wallet with id ${t} does not exist`;else{const a=this.wallets[t],l=this.isPregenWalletUnclaimed(a);a.signer?i&&l?o=`pre-generated wallet with id ${a.id} cannot be selected`:!this.isWalletOwned(a)&&!l?o=`wallet with id ${a.id} is not owned by the current user`:this.isWalletSupported(a)?n&&!n.includes(a.type)?o=`wallet with id ${a.id} and type ${a.type} cannot be selected`:s&&!s.includes(a.scheme)&&(o=`wallet with id ${a.id} and scheme ${a.scheme} cannot be selected`):o=`wallet with id ${a.id} and type ${a.type} is not supported, supported types are: ${Object.keys(this.supportedWalletTypes).join(", ")}`:o=`wallet with id ${a.id} does not have a signer`}if(o){if(r)throw new Error(o);return!1}return!0}getDisplayAddress(t,{truncate:n=!1}={}){const s=this.wallets[t];if(!this.wallets[t])throw new Error("wallet does not exist");let i,r=6;switch(s.type){case ze.SOLANA:i=s.address;break;default:Co(this.supportedWalletTypes)?(r=this.cosmosPrefix.length+4,i=dh(s.publicKey,this.cosmosPrefix)):i=s.address;break}return n?`${i.slice(0,r)}...${i.slice(-4)}`:i}getWallets(){return this.wallets}getAddress(t){var n,s;return t?this.wallets[t].address:(s=(n=Object.values(this.wallets))===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.address}constructor(t,n,s){if(this.isAwaitingAccountCreation=!1,this.isAwaitingLogin=!1,this.isAwaitingFarcaster=!1,this.isAwaitingOAuth=!1,this.localStorageGetItem=f=>this.platformUtils.localStorage.get(f),this.localStorageSetItem=(f,g)=>this.platformUtils.localStorage.set(f,g),this.sessionStorageGetItem=f=>this.platformUtils.sessionStorage.get(f),this.sessionStorageSetItem=(f,g)=>this.platformUtils.sessionStorage.set(f,g),this.sessionStorageRemoveItem=f=>this.platformUtils.sessionStorage.removeItem(f),this.retrieveSessionCookie=()=>this.sessionCookie,this.clearStorage=(f="all")=>_(this,void 0,void 0,function*(){const g=f==="all";(g||f==="local")&&this.platformUtils.localStorage.clear(fe),(g||f==="session")&&this.platformUtils.sessionStorage.clear(fe),(g||f==="secure")&&this.platformUtils.secureStorage&&this.platformUtils.secureStorage.clear(fe)}),s||(s={}),this.emailPrimaryColor=s.emailPrimaryColor,this.emailTheme=s.emailTheme,this.homepageUrl=s.homepageUrl,this.supportUrl=s.supportUrl,this.xUrl=s.xUrl,this.githubUrl=s.githubUrl,this.linkedinUrl=s.linkedinUrl,this.portalBackgroundColor=s.portalBackgroundColor,this.portalPrimaryButtonColor=s.portalPrimaryButtonColor,this.portalTextColor=s.portalTextColor,this.portalPrimaryButtonTextColor=s.portalPrimaryButtonTextColor,this.portalTheme=s.portalTheme,this.platformUtils=this.getPlatformUtils(),this.disableProviderModal=this.platformUtils.disableProviderModal,this.supportedWalletTypes=s.supportedWalletTypes?(()=>{for(const f of Object.keys(s.supportedWalletTypes))this.assertIsValidWalletType(f,s.supportedWalletTypes);return s.supportedWalletTypes})():{[ze.EVM]:!0},s.useStorageOverrides&&(this.localStorageGetItem=s.localStorageGetItemOverride,this.localStorageSetItem=s.localStorageSetItemOverride,this.sessionStorageGetItem=s.sessionStorageGetItemOverride,this.sessionStorageSetItem=s.sessionStorageSetItemOverride,this.sessionStorageRemoveItem=s.sessionStorageRemoveItemOverride,this.clearStorage=s.clearStorageOverride),s.useSessionStorage&&(this.localStorageGetItem=this.sessionStorageGetItem,this.localStorageSetItem=this.sessionStorageSetItem),this.persistSessionCookie=f=>{this.sessionCookie=f,(s.useSessionStorage?this.sessionStorageSetItem:this.localStorageSetItem)(bt,f)},this.ctx={env:t,apiKey:n,capsuleClient:nh(t,pi.version,n,s.disableWorkers,this.retrieveSessionCookie,this.persistSessionCookie),disableWorkers:s.disableWorkers,offloadMPCComputationURL:s.offloadMPCComputationURL,useLocalFiles:s.useLocalFiles,useDKLS:s.useDKLSForCreation||!s.offloadMPCComputationURL,disableWebSockets:!!s.disableWebSockets,wasmOverride:s.wasmOverride,cosmosPrefix:this.cosmosPrefix},s.offloadMPCComputationURL&&(this.ctx.mpcComputationClient=sh(s.offloadMPCComputationURL,s.disableWorkers)),!this.platformUtils.isSyncStorage||s.useStorageOverrides)return;this.email=this.localStorageGetItem(hs)||void 0,this.countryCode=this.localStorageGetItem(To)||void 0,this.phone=this.localStorageGetItem(wo)||void 0,this.userId=this.localStorageGetItem(fs)||void 0;const i=this.localStorageGetItem(ms)||void 0;this.currentWalletIds=i?JSON.parse(i):void 0,this.sessionCookie=this.localStorageGetItem(bt)||this.sessionStorageGetItem(bt)||void 0;const r=this.platformUtils.secureStorage?this.platformUtils.secureStorage.get(ct):this.localStorageGetItem(ct),o=JSON.parse(r||"{}"),a=this.platformUtils.secureStorage?this.platformUtils.secureStorage.get(bo):this.localStorageGetItem(bo),l=JSON.parse(a||"{}");this.setWallets(Object.assign(Object.assign({},Object.keys(o).reduce((f,g)=>Object.assign(Object.assign({},f),{[g]:Ao(o[g])}),{})),Object.keys(l).reduce((f,g)=>Object.assign(Object.assign({},f),f[g]?{}:{[g]:Ao(l[g])}),{}))),Object.values(this.wallets).filter(f=>this.isWalletOwned(f)).length>0&&(!this.currentWalletIds||this.currentWalletIds.length===0)&&this.findWalletId(void 0,{forbidPregen:!0});const u=this.sessionStorageGetItem(an);u&&u!=="undefined"&&(this.loginEncryptionKeyPair=this.convertEncryptionKeyPair(JSON.parse(u)));const c=this.localStorageGetItem(ps),d=JSON.parse(c||"{}");this.setExternalWallets(d);const p=this.localStorageGetItem(gs)||void 0;this.currentExternalWalletAddresses=p?JSON.parse(p):void 0}getVerificationEmailProps(){return{brandColor:this.emailPrimaryColor,theme:this.emailTheme,supportUrl:this.supportUrl,homepageUrl:this.homepageUrl,xUrl:this.xUrl,githubUrl:this.githubUrl,linkedinUrl:this.linkedinUrl}}getBackupKitEmailProps(){return{brandColor:this.emailPrimaryColor,theme:this.emailTheme,homepageUrl:this.homepageUrl,xUrl:this.xUrl,linkedinUrl:this.linkedinUrl,githubUrl:this.githubUrl,supportUrl:this.supportUrl}}init(){return _(this,void 0,void 0,function*(){this.email=(yield this.localStorageGetItem(hs))||void 0,this.userId=(yield this.localStorageGetItem(fs))||void 0,this.sessionCookie=(yield this.localStorageGetItem(bt))||(yield this.sessionStorageGetItem(bt))||void 0;const t=this.platformUtils.secureStorage?yield this.platformUtils.secureStorage.get(ct):yield this.localStorageGetItem(ct);this.wallets=JSON.parse(t||"{}");const n=yield this.localStorageGetItem(ms),s=n?JSON.parse(n):void 0;this.currentWalletIds=s;const i=yield this.localStorageGetItem(ps);this.externalWallets=JSON.parse(i||"{}");const r=yield this.localStorageGetItem(gs),o=r?JSON.parse(r):void 0;this.currentExternalWalletAddresses=o;const a=yield this.sessionStorageGetItem(an);a&&a!=="undefined"&&(this.loginEncryptionKeyPair=this.convertEncryptionKeyPair(JSON.parse(a)))})}setEmail(t){return _(this,void 0,void 0,function*(){this.email=t,yield this.localStorageSetItem(hs,t)})}setPhoneNumber(t,n){return _(this,void 0,void 0,function*(){this.phone=t,this.countryCode=n,yield this.localStorageSetItem(wo,t),yield this.localStorageSetItem(To,n)})}setFarcasterUsername(t){return _(this,void 0,void 0,function*(){this.farcasterUsername=t,yield this.localStorageSetItem(gh,t)})}setExternalWallet(t,n){return _(this,void 0,void 0,function*(){this.externalWallets={[t]:{address:t,type:n}},this.currentExternalWalletAddresses=[t],this.setCurrentExternalWalletAddresses(this.currentExternalWalletAddresses),this.setExternalWallets(this.externalWallets),typeof window<"u"&&window.dispatchEvent(new Event(Ns))})}setUserId(t){return _(this,void 0,void 0,function*(){this.userId=t,yield this.localStorageSetItem(fs,t)})}setWallets(t){return _(this,void 0,void 0,function*(){if(this.wallets=t,this.platformUtils.secureStorage){yield this.platformUtils.secureStorage.set(ct,JSON.stringify(t));return}yield this.localStorageSetItem(ct,JSON.stringify(t))})}setExternalWallets(t){return _(this,void 0,void 0,function*(){this.externalWallets=t,yield this.localStorageSetItem(ps,JSON.stringify(t))})}setCurrentExternalWalletAddresses(t){return _(this,void 0,void 0,function*(){this.currentExternalWalletAddresses=t,yield this.localStorageSetItem(gs,JSON.stringify(t))})}setLoginEncryptionKeyPair(t){return _(this,void 0,void 0,function*(){this.loginEncryptionKeyPair=t,yield this.sessionStorageSetItem(an,JSON.stringify(t))})}deleteLoginEncryptionKeyPair(){return _(this,void 0,void 0,function*(){this.loginEncryptionKeyPair=void 0,yield this.sessionStorageRemoveItem(an)})}getUserId(){return this.userId}getEmail(){return this.email}getPhone(){return{phone:this.phone,countryCode:this.countryCode}}getPhoneNumber(){if(!(!this.phone||!this.countryCode))return vh(this.countryCode,this.phone)}setCurrentWalletIds(t,n,s=!1){return _(this,void 0,void 0,function*(){this.currentWalletIds=t,n?yield this.ctx.capsuleClient.setCurrentWalletIds(this.getUserId(),t,s,n):yield this.localStorageSetItem(ms,JSON.stringify(t)),typeof window<"u"&&window.dispatchEvent(new Event(ks))})}get cosmosPrefix(){return Co(this.supportedWalletTypes)?this.supportedWalletTypes.COSMOS.prefix:"cosmos"}findWalletId(t,n={}){var s;if(t)this.assertIsValidWalletId(t,n);else{for(const i of[...(s=this.currentWalletIds)!==null&&s!==void 0?s:[],...Object.keys(this.wallets)])if(this.isWalletUsable(i,n)){t=i;break}if(!t)throw new Error("no valid wallet id found")}return t}assertIsValidWalletId(t,n={}){this.isWalletUsable(t,n,!0)}assertIsValidWalletType(t,n=this.supportedWalletTypes){if(!t||!Object.values(ze).includes(t)||!n[t])throw new Error(`wallet type ${t} is not supported`);return t}getPartnerURL(t){return _(this,void 0,void 0,function*(){return(yield this.ctx.capsuleClient.getPartner(t)).data.partner.portalUrl})}getPortalURL(t){return _(this,void 0,void 0,function*(){return t&&(yield this.getPartnerURL(t))||Ne(this.ctx)})}getCommonLoginQueryParams(t,n,s){return _(this,void 0,void 0,function*(){return _o({newDeviceSessionId:n,newDeviceEncryptionKey:s,pregenWalletIds:Object.entries(this.wallets).filter(([i,r])=>this.isPregenWalletClaimable(r)&&r.partnerId===t).map(([i])=>i).join(",")})})}getCommonQueryParams(t,n){var s,i,r,o,a;return _(this,void 0,void 0,function*(){const l=(yield this.ctx.capsuleClient.getPartner(t)).data;return _o({apiKey:this.ctx.apiKey,partnerId:t,portalFont:l.font,portalBorderRadius:(s=this.portalTheme)===null||s===void 0?void 0:s.borderRadius,portalThemeMode:(i=this.portalTheme)===null||i===void 0?void 0:i.mode,portalAccentColor:(r=this.portalTheme)===null||r===void 0?void 0:r.accentColor,portalForegroundColor:l.foregroundColor||((o=this.portalTheme)===null||o===void 0?void 0:o.foregroundColor),portalBackgroundColor:l.backgroundColor||this.portalBackgroundColor||((a=this.portalTheme)===null||a===void 0?void 0:a.backgroundColor),portalPrimaryButtonColor:this.portalPrimaryButtonColor,portalTextColor:this.portalTextColor,portalPrimaryButtonTextColor:this.portalPrimaryButtonTextColor,isForNewDevice:n?n.toString():void 0,supportedWalletTypes:this.supportedWalletTypes?JSON.stringify(this.supportedWalletTypes):void 0})})}getWebAuthURLForCreate(t,n,s,i){return _(this,void 0,void 0,function*(){const r=yield this.getCommonQueryParams(s,i),o={email:`email=${encodeURIComponent(this.email)}`,phone:`phone=${encodeURIComponent(this.phone)}&countryCode=${encodeURIComponent(this.countryCode)}`,farcaster:`farcasterUsername=${encodeURIComponent(this.farcasterUsername)}`}[t];return`${s&&(yield this.getPartnerURL(s))||Ne(this.ctx)}/web/users/${this.userId}/biometrics/${n}?${o}${r}`})}getShortUrl(t){return`${Ne(this.ctx)}/short/${t}`}shortenLoginLink(t){return _(this,void 0,void 0,function*(){const n=yield ah(t,this.ctx.capsuleClient);return this.getShortUrl(n)})}getWebAuthURLForLogin(t,n,s,i,r,o="email"){return _(this,void 0,void 0,function*(){const a=yield this.getCommonQueryParams(s),l=yield this.getCommonLoginQueryParams(s,i,r),u={email:`email=${encodeURIComponent(this.email)}`,phone:`phone=${encodeURIComponent(this.phone)}&countryCode=${encodeURIComponent(this.countryCode)}`,farcaster:`farcasterUsername=${encodeURIComponent(this.farcasterUsername)}`}[o];return`${s&&(yield this.getPartnerURL(s))||Ne(this.ctx)}/web/biometrics/login?${u}&sessionId=${t}&encryptionKey=${n}${l}${a}`})}getWebAuthURLForLoginForPhone(t,n,s,i,r){return _(this,void 0,void 0,function*(){const o=yield this.getCommonQueryParams(s),a=yield this.getCommonLoginQueryParams(s,i,r);return`${s&&(yield this.getPartnerURL(s))||Ne(this.ctx)}/web/biometrics/login?phone=${encodeURIComponent(this.phone)}&countryCode=${encodeURIComponent(this.countryCode)}&sessionId=${t}&encryptionKey=${n}${a}${o}`})}getPrivateKey(t){return _(this,void 0,void 0,function*(){const n=Object.values(this.wallets),s=t?this.wallets[t]:n==null?void 0:n[0];if(!s)throw new Error("wallet not found");if(s.scheme!==ut.DKLS)throw new Error("invalid wallet scheme");return yield this.platformUtils.getPrivateKey(this.ctx,this.userId,s.id,s.signer,this.retrieveSessionCookie())})}fetchWallets(){return _(this,void 0,void 0,function*(){return(yield this.isPortal()?this.ctx.capsuleClient.getAllWallets(this.userId):this.ctx.capsuleClient.getWallets(this.userId,!0)).data.wallets.filter(n=>!!n.address&&this.isWalletSupported(n))})}populateWalletAddresses(){return _(this,void 0,void 0,function*(){(yield this.ctx.capsuleClient.getWallets(this.userId,!0)).data.wallets.forEach(s=>{this.wallets[s.id]&&(this.wallets[s.id]=Object.assign(Object.assign(Object.assign({},s),{scheme:s.scheme,type:s.type,pregenIdentifierType:s.pregenIdentifierType}),this.wallets[s.id]))}),yield this.setWallets(this.wallets)})}populatePregenWalletAddresses(t,n){return _(this,void 0,void 0,function*(){(yield this.ctx.capsuleClient.getPregenWallets(t,n)).wallets.forEach(r=>{this.wallets[r.id]&&(this.wallets[r.id]=Object.assign(Object.assign(Object.assign({},r),{scheme:r.scheme,type:r.type,pregenIdentifierType:r.pregenIdentifierType}),this.wallets[r.id]))}),yield this.setWallets(this.wallets)})}checkIfUserExists(t){return _(this,void 0,void 0,function*(){return(yield this.ctx.capsuleClient.checkUserExists(t,null,null)).data.exists})}checkIfUserExistsByPhone(t,n){return _(this,void 0,void 0,function*(){return(yield this.ctx.capsuleClient.checkUserExists(null,t,n)).data.exists})}createUser(t){return _(this,void 0,void 0,function*(){this.requireApiKey(),yield this.setEmail(t);const{userId:n}=yield this.ctx.capsuleClient.createUser(Object.assign({email:this.email},this.getVerificationEmailProps()));yield this.setUserId(n)})}createUserByPhone(t,n){return _(this,void 0,void 0,function*(){this.requireApiKey(),yield this.setPhoneNumber(t,n);const{userId:s}=yield this.ctx.capsuleClient.createUser({phone:this.phone,countryCode:this.countryCode});yield this.setUserId(s)})}externalWalletLogin(t,n,s){return _(this,void 0,void 0,function*(){this.requireApiKey();const{userId:i}=yield this.ctx.capsuleClient.externalWalletLogin({externalAddress:t,type:n,externalWalletProvider:s});yield this.setExternalWallet(t,n),yield this.setUserId(i)})}isUsingExternalWallet(){return!!Object.keys(this.externalWallets).length}verifyEmail(t){return _(this,void 0,void 0,function*(){return yield this.ctx.capsuleClient.verifyEmail(this.userId,{verificationCode:t}),this.getSetUpBiometricsURL(!1)})}verifyPhone(t){return _(this,void 0,void 0,function*(){return yield this.ctx.capsuleClient.verifyPhone(this.userId,{verificationCode:t}),this.getSetUpBiometricsURLForPhone(!1)})}verify2FA(t,n){return _(this,void 0,void 0,function*(){const s=yield this.ctx.capsuleClient.verify2FA(t,n);return{address:s.data.address,initiatedAt:s.data.initiatedAt,status:s.data.status,userId:s.data.userId,walletId:s.data.walletId}})}verify2FAForPhone(t,n,s){return _(this,void 0,void 0,function*(){const i=yield this.ctx.capsuleClient.verify2FAForPhone(t,n,s);return{address:i.data.address,initiatedAt:i.data.initiatedAt,status:i.data.status,userId:i.data.userId,walletId:i.data.walletId}})}setup2FA(){return _(this,void 0,void 0,function*(){return{uri:(yield this.ctx.capsuleClient.setup2FA(this.userId)).data.uri}})}enable2FA(t){return _(this,void 0,void 0,function*(){yield this.ctx.capsuleClient.enable2FA(this.userId,t)})}check2FAStatus(){return _(this,void 0,void 0,function*(){return this.userId?{isSetup:(yield this.ctx.capsuleClient.check2FAStatus(this.userId)).data.isSetup}:{isSetup:!1}})}resendVerificationCode(){return _(this,void 0,void 0,function*(){yield this.ctx.capsuleClient.resendVerificationCode(Object.assign({userId:this.userId},this.getVerificationEmailProps()))})}resendVerificationCodeByPhone(){return _(this,void 0,void 0,function*(){yield this.ctx.capsuleClient.resendVerificationCodeByPhone({userId:this.userId})})}getSetUpBiometricsURL(t,n="email"){return _(this,void 0,void 0,function*(){const s=yield this.ctx.capsuleClient.addSessionPublicKey(this.userId,{status:Ji.PENDING,type:Zi.WEB});return this.getWebAuthURLForCreate(n,s.data.id,s.data.partnerId,t)})}getSetUpBiometricsURLForPhone(t){return _(this,void 0,void 0,function*(){const n=yield this.ctx.capsuleClient.addSessionPublicKey(this.userId,{status:Ji.PENDING,type:Zi.WEB});return this.getWebAuthURLForCreate("phone",n.data.id,n.data.partnerId,t)})}isSessionActive(){return _(this,void 0,void 0,function*(){const t=yield this.ctx.capsuleClient.touchSession();return t.data.biometricVerifiedAt&&yh(this.ctx,t.data.biometricVerifiedAt)})}isFullyLoggedIn(){return _(this,void 0,void 0,function*(){return this.isUsingExternalWallet()?!0:(yield this.isSessionActive())&&this.currentWalletIds&&this.currentWalletIds.length>0&&this.currentWalletIds.reduce((n,s)=>n&&!!this.wallets[s],!0)})}initiateUserLogin(t,n,s="email",i){return _(this,void 0,void 0,function*(){s==="email"?yield this.setEmail(t):s==="phone"?yield this.setPhoneNumber(t,i):s==="farcaster"&&(yield this.setFarcasterUsername(t));const r=yield this.ctx.capsuleClient.touchSession(!0);if(!this.loginEncryptionKeyPair){const a=yield us(this.ctx);yield this.setLoginEncryptionKeyPair(a)}const o=yield this.getWebAuthURLForLogin(r.data.sessionId,cs(this.loginEncryptionKeyPair),r.data.partnerId,void 0,void 0,s);return n?this.shortenLoginLink(o):o})}initiateUserLoginForPhone(t,n,s){return _(this,void 0,void 0,function*(){yield this.setPhoneNumber(t,n);const i=yield this.ctx.capsuleClient.touchSession(!0);if(!this.loginEncryptionKeyPair){const o=yield us(this.ctx);yield this.setLoginEncryptionKeyPair(o)}const r=yield this.getWebAuthURLForLoginForPhone(i.data.sessionId,cs(this.loginEncryptionKeyPair),i.data.partnerId);return s?this.shortenLoginLink(r):r})}waitForAccountCreation(){return _(this,void 0,void 0,function*(){for(this.isAwaitingAccountCreation=!0;this.isAwaitingAccountCreation;)try{if(yield new Promise(t=>setTimeout(t,ln)),yield this.isSessionActive())return this.isAwaitingAccountCreation=!1,!0}catch(t){console.error(t)}return!1})}waitForPasskeyAndCreateWallet(){return _(this,void 0,void 0,function*(){yield this.waitForAccountCreation();let t,n;this.email!=null?(t=this.email,n=xe.EMAIL):(t=this.getPhoneNumber(),n=xe.PHONE);const s=(yield this.ctx.capsuleClient.getPregenWallets(t,n)).wallets.filter(o=>this.isWalletSupported(o));let i,r;if(s.length>0)i=yield this.claimPregenWallets(t,n),r=s.map(({id:o})=>o);else{const o=yield this.createWalletPerMissingType();i=o.recoverySecret,r=o.wallets.map(({id:a})=>a)}return{walletIds:r,recoverySecret:i}})}getFarcasterConnectURL(){return _(this,void 0,void 0,function*(){yield this.logout(),yield this.ctx.capsuleClient.touchSession(!0);const{data:{connect_uri:t}}=yield this.ctx.capsuleClient.initializeFarcasterLogin();return t})}waitForFarcasterStatus(){return _(this,void 0,void 0,function*(){for(this.isAwaitingFarcaster=!0;this.isAwaitingFarcaster;)try{yield new Promise(n=>setTimeout(n,ln));const t=yield this.ctx.capsuleClient.getFarcasterAuthStatus();if(t.data.state==="completed"){const{userId:n,userExists:s,username:i}=t.data;return yield this.setUserId(n),yield this.setFarcasterUsername(i),{userExists:s,username:i}}}catch(t){console.error(t),this.isAwaitingFarcaster=!1}})}getOAuthURL(t){return _(this,void 0,void 0,function*(){yield this.logout();const n=yield this.ctx.capsuleClient.touchSession(!0);return`${za(this.ctx.env)}auth/${t.toLowerCase()}?sessionLookupId=${encodeURIComponent(n.data.sessionLookupId)}`})}waitForOAuth(){return _(this,void 0,void 0,function*(){for(this.isAwaitingOAuth=!0;this.isAwaitingOAuth;)try{yield new Promise(n=>setTimeout(n,ln));const t=yield this.ctx.capsuleClient.touchSession();if(t.data.userId){const{userId:n,email:s}=t.data;return yield this.setUserId(n),yield this.setEmail(s),{userExists:yield this.checkIfUserExists(s),email:s}}}catch(t){console.error(t)}return{userExists:!1}})}waitForLoginAndSetup(t,n){var s;return _(this,void 0,void 0,function*(){for(this.isAwaitingLogin=!0;this.isAwaitingLogin;)try{if(yield new Promise(l=>setTimeout(l,ln)),!(yield this.isSessionActive())){if(t!=null&&t.closed)return{isComplete:!1,isError:!0};continue}const i=yield this.userSetupAfterLogin(),r=(s=i.data.needsWallet)!==null&&s!==void 0?s:!1;if(!r&&(!this.currentWalletIds||this.currentWalletIds.length===0)){if(t!=null&&t.closed)return{isComplete:!1,isError:!0};continue}const o=yield this.fetchWallets(),a=yield this.getTransmissionKeyShares();if(a.data.temporaryShares.length===o.length){yield this.setupAfterLogin(a.data.temporaryShares,n);for(const l of Object.values(this.wallets))this.isPregenWalletClaimable(l)&&(yield this.claimPregenWallets(l.pregenIdentifier,l.pregenIdentifierType));return{isComplete:!0,needsWallet:r||Object.values(this.wallets).length===0,partnerId:i.data.partnerId}}}catch(i){console.error(i)}return{isComplete:!1}})}refreshSession(t){return _(this,void 0,void 0,function*(){const n=yield this.ctx.capsuleClient.touchSession(!0);if(!this.loginEncryptionKeyPair){const i=yield us(this.ctx);yield this.setLoginEncryptionKeyPair(i)}const s=yield this.getWebAuthURLForLogin(n.data.sessionId,cs(this.loginEncryptionKeyPair));return t&&this.platformUtils.openPopup(s),s})}userSetupAfterLogin(){return _(this,void 0,void 0,function*(){const t=yield this.ctx.capsuleClient.touchSession();return yield this.setUserId(t.data.userId),t.data.currentWalletIds&&t.data.currentWalletIds!==this.currentWalletIds&&(yield this.setCurrentWalletIds(t.data.currentWalletIds,this.isPortal()?t.data.sessionLookupId:void 0)),t})}getTransmissionKeyShares(t){return _(this,void 0,void 0,function*(){const n=yield this.ctx.capsuleClient.touchSession(),s=t?`${n.data.sessionLookupId}-new-device`:n.data.sessionLookupId;return this.ctx.capsuleClient.getTransmissionKeyshares(this.userId,s)})}setupAfterLogin(t,n){return _(this,void 0,void 0,function*(){t||(t=(yield this.getTransmissionKeyShares()).data.temporaryShares),t.forEach(s=>{const i=eh(this.loginEncryptionKeyPair.privateKey,s.encryptedShare,s.encryptedKey);this.wallets[s.walletId]={id:s.walletId,signer:i}}),yield this.deleteLoginEncryptionKeyPair(),yield this.populateWalletAddresses(),yield this.ctx.capsuleClient.touchSession(!n)})}distributeNewWalletShare(t,n,s){return _(this,void 0,void 0,function*(){let i=n;return i||(i=this.wallets[t].signer),s?yield Xa(this.ctx,this.userId,t,[],i,!1,this.getBackupKitEmailProps()):yield ds(this.ctx,this.userId,t,i,!1,this.getBackupKitEmailProps())})}waitForWalletAddress(t){return _(this,void 0,void 0,function*(){let n=0;for(;;)try{if(n===10)break;++n;const i=(yield this.ctx.capsuleClient.getWallets(this.userId)).data.wallets.find(r=>r.id===t);if(i&&i.address)return;yield new Promise(r=>setTimeout(r,Io))}catch(s){console.error(s)}throw new Error("timed out waiting for wallet address")})}waitForPregenWalletAddress(t,n=xe.EMAIL,s){return _(this,void 0,void 0,function*(){let i=0;for(;;)try{if(i===10)break;++i;const o=(yield this.ctx.capsuleClient.getPregenWallets(t,n)).wallets.find(a=>a.id===s);if(o&&o.address)return;yield new Promise(a=>setTimeout(a,Io))}catch(r){console.error(r)}throw new Error("timed out waiting for wallet address")})}createWalletPerMissingType(t=!1){return _(this,void 0,void 0,function*(){const n=[];let s;const i=Object.assign({},this.supportedWalletTypes);i.EVM&&i.COSMOS&&delete i.EVM;for(const r of Object.keys(i))if(!Object.values(this.wallets).some(o=>!!Yi[o.scheme][r])){const[o,a]=yield this.createWallet(r,t);n.push(o),a&&(s=a)}return{wallets:n,recoverySecret:s}})}refreshShare({walletId:t,share:n,oldPartnerId:s,newPartnerId:i,redistributeBackupEncryptedShares:r}){return _(this,void 0,void 0,function*(){const{signer:o}=yield this.platformUtils.refresh(this.ctx,this.retrieveSessionCookie(),this.userId,t,n,s,i),a=yield ds(this.ctx,this.userId,t,o,!r,this.getBackupKitEmailProps(),i);return{signer:o,recoverySecret:a}})}createWallet(t=Object.keys(this.supportedWalletTypes)[0],n=!1,s){return _(this,void 0,void 0,function*(){this.requireApiKey();const i=this.assertIsValidWalletType(t);let r,o,a;switch(i){case ze.SOLANA:{a=yield this.platformUtils.ed25519Keygen(this.ctx,this.userId,this.retrieveSessionCookie(),this.getBackupKitEmailProps());break}default:{a=yield this.platformUtils.keygen(this.ctx,this.userId,i,null,this.retrieveSessionCookie(),this.getBackupKitEmailProps());break}}const l=a.walletId;r=a.signer,this.wallets[l]={id:l,signer:r},o=this.wallets[l],yield this.waitForWalletAddress(o.id),yield this.populateWalletAddresses();let u=null;return n||(u=yield ds(this.ctx,this.userId,o.id,r,!1,this.getBackupKitEmailProps())),[o,u]})}createWalletPreGen(t=Object.keys(this.supportedWalletTypes)[0],n,s=xe.EMAIL){return _(this,void 0,void 0,function*(){this.requireApiKey();const i=this.assertIsValidWalletType(t);let r;switch(i){case ze.SOLANA:r=yield this.platformUtils.ed25519PreKeygen(this.ctx,n,s,this.retrieveSessionCookie());break;default:r=yield this.platformUtils.preKeygen(this.ctx,void 0,n,s,i,null,this.retrieveSessionCookie());break}const{signer:o,walletId:a}=r;return this.wallets[a]={id:a,signer:o},yield this.waitForPregenWalletAddress(n,s,a),yield this.populatePregenWalletAddresses(n,s),this.wallets[a]})}claimPregenWallets(t,n=xe.EMAIL){return _(this,void 0,void 0,function*(){if(this.requireApiKey(),n===xe.EMAIL){if(!(yield this.checkIfUserExists(t)))throw new Error("user does not exist")}else{const r=fa(t),o=r.formatNational(),a=`+${r.countryCallingCode}`;if(!(yield this.checkIfUserExistsByPhone(o,a)))throw new Error("user does not exist")}const s=(yield this.ctx.capsuleClient.getPregenWallets(t,n)).wallets.filter(r=>this.isWalletSupported(r));if(s.length===0)throw new Error("wallets not found");let i;for(const r of s){yield this.ctx.capsuleClient.claimPregenWallet({userId:this.userId,walletId:r.id});const{signer:o,recoverySecret:a}=yield this.refreshShare({walletId:r.id,share:this.wallets[r.id].signer,oldPartnerId:r.partnerId,newPartnerId:r.partnerId,redistributeBackupEncryptedShares:!0});a&&(i=a),this.wallets[r.id]=Object.assign(Object.assign({},this.wallets[r.id]),{signer:o,userId:this.userId,pregenIdentifier:void 0,pregenIdentifierType:void 0}),yield this.setWallets(this.wallets)}return i})}updateWalletIdentifierPreGen(t,n,s=xe.EMAIL){return _(this,void 0,void 0,function*(){this.requireApiKey(),yield this.ctx.capsuleClient.updatePregenWallet(n,{pregenIdentifier:t,pregenIdentifierType:s})})}hasPregenWallet(t,n=xe.EMAIL){return _(this,void 0,void 0,function*(){return this.requireApiKey(),!!(yield this.ctx.capsuleClient.getPregenWallets(t,n)).wallets[0]})}getPregenWallets(t,n=xe.EMAIL){return _(this,void 0,void 0,function*(){return this.requireApiKey(),(yield this.ctx.capsuleClient.getPregenWallets(t,n,this.isPortal())).wallets.filter(i=>this.isWalletSupported(i))})}encodeWalletBase64(t){const n=JSON.stringify(t);return ie.from(n).toString("base64")}getUserShare(){return Object.values(this.wallets).length===0?null:Object.values(this.wallets).map(t=>this.encodeWalletBase64(t)).join("-")}setUserShare(t){return _(this,void 0,void 0,function*(){if(!t)return;const n=t.split("-");for(const s of n){const i=ie.from(s,"base64").toString(),r=JSON.parse(i);this.wallets[r.id]=r,yield this.setWallets(this.wallets)}})}getTransactionReviewUrl(t){return _(this,void 0,void 0,function*(){const n=yield this.ctx.capsuleClient.touchSession(),s=yield this.getCommonQueryParams(n.data.partnerId);return`${Ne(this.ctx)}/web/users/${this.userId}/transaction-review/${t}?email=${encodeURIComponent(this.email)}${s}`})}signMessage(t,n){return _(this,void 0,void 0,function*(){this.assertIsValidWalletId(t);const s=this.wallets[t];let i=this.userId;s.partnerId&&!s.userId&&(i=s.partnerId);let r;switch(s.scheme){case ut.ED25519:r=yield this.platformUtils.ed25519Sign(this.ctx,i,t,s.signer,n,this.retrieveSessionCookie());break;default:r=yield this.platformUtils.signMessage(this.ctx,i,t,s.signer,n,this.retrieveSessionCookie(),s.scheme===ut.DKLS);break}return r.pendingTransactionId?Object.assign(Object.assign({},r),{transactionReviewUrl:yield this.getTransactionReviewUrl(r.pendingTransactionId)}):r})}signTransaction(t,n,s){return _(this,void 0,void 0,function*(){this.assertIsValidWalletId(t);const i=this.wallets[t];let r=this.userId;i.partnerId&&!i.userId&&(r=i.partnerId);const o=yield this.platformUtils.signTransaction(this.ctx,r,t,this.wallets[t].signer,n,s,this.retrieveSessionCookie(),i.scheme===ut.DKLS);return o.pendingTransactionId?Object.assign(Object.assign({},o),{transactionReviewUrl:yield this.getTransactionReviewUrl(o.pendingTransactionId)}):o})}sendTransaction(t,n,s){return _(this,void 0,void 0,function*(){const i=this.wallets[t],r=yield this.platformUtils.sendTransaction(this.ctx,this.userId,t,this.wallets[t].signer,n,s,this.retrieveSessionCookie(),i.scheme===ut.DKLS);return r.pendingTransactionId?Object.assign(Object.assign({},r),{transactionReviewUrl:yield this.getTransactionReviewUrl(r.pendingTransactionId)}):r})}isProviderModalDisabled(){return!!this.disableProviderModal}createOnRampPurchase(t){var n,s,{provider:i,network:r,asset:o,testMode:a=!1,walletId:l=(n=this.currentWalletIds)===null||n===void 0?void 0:n[0],externalWalletAddress:u=(s=this.currentExternalWalletAddresses)===null||s===void 0?void 0:s[0]}=t;return _(this,void 0,void 0,function*(){return!l&&!u?void 0:(yield this.ctx.capsuleClient.createOnRampPurchase({userId:this.getUserId(),walletId:l,externalWalletAddress:u,provider:Ut(i),network:ri(r),asset:pa(o),testMode:a})).data})}updateOnRampPurchase({walletId:t,externalWalletAddress:n,purchaseId:s,updates:i}){return _(this,void 0,void 0,function*(){return!t&&!n?void 0:(yield this.ctx.capsuleClient.updateOnRampPurchase({userId:this.getUserId(),walletId:t,externalWalletAddress:n,purchaseId:s,updates:i})).data})}getOnRampPurchase({walletId:t,externalWalletAddress:n,purchaseId:s}){return _(this,void 0,void 0,function*(){return(yield this.ctx.capsuleClient.getOnRampPurchase({userId:this.getUserId(),walletId:t,externalWalletAddress:n,purchaseId:s})).data})}keepSessionAlive(){return _(this,void 0,void 0,function*(){try{return yield this.ctx.capsuleClient.keepSessionAlive(this.userId),!0}catch{return!1}})}exportSession(){const t={email:this.email,userId:this.userId,wallets:this.wallets,currentWalletIds:this.currentWalletIds,sessionCookie:this.sessionCookie};return ie.from(JSON.stringify(t)).toString("base64")}importSession(t){return _(this,void 0,void 0,function*(){const n=ie.from(t,"base64").toString("utf8"),s=JSON.parse(n);yield this.setEmail(s.email),yield this.setUserId(s.userId),yield this.setWallets(s.wallets);for(const i of Object.keys(this.wallets))this.wallets[i].userId||(this.wallets[i].userId=this.userId);yield this.setCurrentWalletIds(s.currentWalletIds),this.persistSessionCookie(s.sessionCookie)})}exitAccountCreation(){this.isAwaitingAccountCreation=!1}exitLogin(){this.isAwaitingLogin=!1}exitFarcaster(){this.isAwaitingFarcaster=!1}exitOAuth(){this.isAwaitingOAuth=!1}exitLoops(){this.exitAccountCreation(),this.exitLogin(),this.exitFarcaster(),this.exitOAuth()}logout(t){return _(this,void 0,void 0,function*(){yield this.ctx.capsuleClient.logout(),yield this.clearStorage(),t?(Object.entries(this.wallets).forEach(([n,s])=>{s.pregenIdentifier||delete this.wallets[n]}),yield this.setWallets(this.wallets)):this.wallets={},this.currentWalletIds=void 0,this.currentExternalWalletAddresses=void 0,this.externalWallets={},this.loginEncryptionKeyPair=void 0,this.email=void 0,this.phone=void 0,this.countryCode=void 0,this.userId=void 0,this.sessionCookie=void 0})}toString(){const t=Object.keys(this.wallets).reduce((s,i)=>Object.assign(Object.assign({},s),{[i]:Object.assign(Object.assign({},this.wallets[i]),{signer:this.wallets[i].signer?"[REDACTED]":void 0})}),{}),n={supportedWalletTypes:this.supportedWalletTypes,cosmosPrefix:this.cosmosPrefix,email:this.email,phone:this.phone,countryCode:this.countryCode,userId:this.userId,currentWalletIds:this.currentWalletIds,wallets:t,loginEncryptionKeyPair:this.loginEncryptionKeyPair?"[REDACTED]":void 0,ctx:{apiKey:this.ctx.apiKey,disableWorkers:this.ctx.disableWorkers,disableWebSockets:this.ctx.disableWebSockets,env:this.ctx.env,offloadMPCComputationURL:this.ctx.offloadMPCComputationURL,useLocalFiles:this.ctx.useLocalFiles,useDKLS:this.ctx.useDKLS,cosmosPrefix:this.ctx.cosmosPrefix}};return`Capsule ${JSON.stringify(n,null,2)}`}}pi.version=mh;function xh(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function Ch(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function Sh(){return typeof navigator<"u"&&(/iPad/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)}function Ah(){return Ch()||Sh()}function _e(){return xh()||Ah()}function Eh(){return typeof navigator<"u"&&/AppleWebKit/i.test(navigator.userAgent)&&!/CriOS/i.test(navigator.userAgent)}function wh(){return _e()&&Eh()}const Ya={flow:void 0,stepDirection:1,webAuthURLForLogin:void 0,webAuthURLForCreate:void 0,onModalStepChange:void 0,onRampPurchase:void 0,networks:[ma.ETHEREUM],loginWindow:void 0,isFullyLoggedIn:!1,accountAddFundTab:void 0,isExternalWalletConnecting:!1,externalWalletError:void 0},w=Wn()(eu((e,t)=>Object.assign(Object.assign({step:y.AUTH_MAIN,onRampConfig:void 0},Ya),Xd(e,t)),{version:1,name:"@CAPSULE/modalState",storage:tu(()=>sessionStorage),partialize:e=>({step:e.step,webAuthURLForLogin:e.webAuthURLForLogin,webAuthURLForCreate:e.webAuthURLForCreate,onRampConfig:e.onRampConfig,onRampPurchase:e.onRampPurchase,networks:e.networks,selectedExternalWalletId:e.selectedExternalWalletId,isUsingMobileConnector:e.isUsingMobileConnector})})),Th=e=>({setCapsule:t=>{e({capsule:t})}}),Q=Wn(e=>Object.assign({capsule:void 0},Th(e))),Po="https://connect.usecapsule.com/",bh="https://capsule-org.notion.site/Terms-and-Conditions-d4a23d32c6a64acba9cec29a11cc09e9",Ja={[Qi.STRIPE]:{name:"Stripe",feeLower:.99,feeUpper:4.49,methods:[at.ACH,at.DEBIT,at.CREDIT],icon:h.jsx(M,{icon:"stripeBrand"}),backgroundColors:["#6772E5","#808AF4"]},[Qi.RAMP]:{name:"Ramp",feeLower:.99,feeUpper:4.49,methods:[at.ACH,at.DEBIT,at.CREDIT],icon:h.jsx(M,{icon:"rampNetworkBrand"}),backgroundColors:["#21BF73","#3AE492"]}},ys={[Tt.ETHEREUM]:"Ethereum",[Tt.ARBITRUM]:"Arbitrum",[Tt.BASE]:"Base",[Tt.OPTIMISM]:"Optimism",[Tt.POLYGON]:"Polygon"},mi=480,Za="network not supported",Ih=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Qa={enter:e=>({scale:e>0?.9:1.1,opacity:0}),center:{scale:1,opacity:1},exit:e=>({scale:e<0?.9:1.1,opacity:0})},el={duration:.2},_h=e=>e.length===1?ys[e[0]]:`${e.map(t=>ys[t]).slice(0,-1).join(", ")}${e.length>2?",":""} and ${ys[e[e.length-1]]}`,Ph=(e,t)=>nu(e,{defaultCallingCode:t}).formatNational(),Bt=e=>`${e.slice(0,6)}...${e.slice(e.length-4,e.length)}`,Lh=(e,t)=>({resetState:()=>{e(tl)},setIdentifier:n=>{e({identifier:n})},setIdentifierType:n=>{e({identifierType:n})},setCountryCode:n=>{e({countryCode:n})},getUsername:()=>{var n,s;const i=t().identifierType,r=t().identifier;let o=r;if(i==="phone"){const l=(s=(n=t().countryCode)===null||n===void 0?void 0:n.split("+")[1])!==null&&s!==void 0?s:"1";o=r.length>2?Ph(r,l):""}return o},setRecoveryShare:n=>{e({recoveryShare:n})}}),tl={identifier:"",identifierType:void 0,countryCode:"+1",recoveryShare:null},Z=Wn((e,t)=>Object.assign(Object.assign({},tl),Lh(e,t))),Rh=(e,t)=>({updateState:n=>{e(n)},getLogo:()=>{var n;return(n=t().logo)!==null&&n!==void 0?n:void 0},setAuthLayout:n=>{const s=[],i=[];n.map(r=>{const o=r.split(":")[0];s.includes(o)?console.warn(`${r} is a duplicate ${o} layout type. Please remove the duplicate type from your config.`):(i.push(r),s.push(o))}),e({authLayout:i})}});var Le;(function(e){e.AUTH_FULL="AUTH:FULL",e.AUTH_CONDENSED="AUTH:CONDENSED",e.EXTERNAL_FULL="EXTERNAL:FULL",e.EXTERNAL_CONDENSED="EXTERNAL:CONDENSED"})(Le||(Le={}));const Oh={isDark:!1,logo:void 0,appName:void 0,bareModal:!1,oAuthLogoVariant:void 0,authLayout:[Le.AUTH_FULL,Le.EXTERNAL_FULL]},pe=Wn((e,t)=>Object.assign(Object.assign({},Oh),Rh(e,t))),gi=T.div`
  display: flex;
  align-items: center;
  justify-content: center;
`,St=T.div`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 286px;
  height: 286px;
`,$h=T.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,Dh=T.div`
  display: flex;
  align-items: center;
  gap: 4px;

  cpsl-icon {
    --height: 20px;
    --width: 20px;
  }
`,nl=T(ai)`
  --container-border-color: var(--cpsl-color-input-border-placeholder);
  --container-background-color: var(--cpsl-color-background-0);
  --input-background-color: transparent;
  --input-font-weight: 500;
`,Re=T(j)`
  width: 100%;
  text-align: center;
`,U=T.div`
  width: 100%;
  align-self: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
`,oe=T(U)`
  gap: ${({$wide:e})=>e?"32px":"24px"};
`,Ae=T(Re)``,Bn=T(Eu)`
  --button-width: 100%;
  --button-height: 87px;
  --button-icon-height: 32px;
  --button-icon-width: 32px;
`;var cn=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const jh=()=>{const e=Z(A=>A.identifierType),t=Z(A=>A.getUsername()),n=w(A=>A.setStep),s=w(A=>A.setWebAuthURLForCreate),i=Q(A=>A.capsule),r=m.useRef(null),[o,a]=m.useState(""),[l,u]=m.useState(""),[c,d]=m.useState("Resend."),[p,f]=m.useState(!1),[g,v]=m.useState(!1),x=e==="email";m.useEffect(()=>{setTimeout(()=>{var A,I;(I=(A=r.current.shadowRoot.querySelectorAll("input"))===null||A===void 0?void 0:A[0])===null||I===void 0||I.focus()},10)},[]),m.useEffect(()=>{o.length===6&&E()},[o]);const C=()=>cn(void 0,void 0,void 0,function*(){p||(d("Resent!"),f(!0),x?yield i.resendVerificationCode():yield i.resendVerificationCodeByPhone(),setTimeout(()=>{d("Resend."),f(!1)},3e3))}),S=A=>{l&&u(""),a(A.detail.value.trim())},E=()=>cn(void 0,void 0,void 0,function*(){if(v(!0),o.length===6&&/^\d+$/.test(o))try{const A=x?yield i.verifyEmail(o):yield i.verifyPhone(o);s(A),n(y.BIOMETRIC_CREATION)}catch(A){A.message.includes("429")?u("Too many incorrect attempts. Please try again in 10 minutes."):u("Incorrect code.")}else u("Incorrect code.");v(!1)});return h.jsxs(oe,{$wide:!0,children:[h.jsxs(U,{children:[h.jsxs(Ae,{variant:"headingS",weight:"bold",children:["Verify ",x?"Email":"Phone Number"]}),h.jsxs(Sn,{variant:"bodyS",color:"secondary",children:["Please enter the code we sent to ",h.jsx(Sn,{variant:"bodyS",children:t})]})]}),h.jsx(U,{children:g?h.jsx(ge,{}):h.jsxs(h.Fragment,{children:[h.jsx("form",{onSubmit:A=>cn(void 0,void 0,void 0,function*(){A.preventDefault(),yield E()}),children:h.jsx(Nh,{ref:r,length:6,type:"number",code:o,onCpslInput:S,errorText:l,onKeyDown:A=>cn(void 0,void 0,void 0,function*(){return A.key==="Enter"&&(yield E())})})}),h.jsxs(Sn,{variant:"bodyS",color:"secondary",children:["Didnâ€™t receive a code?"," ",h.jsx(kh,{variant:"bodyS",style:{cursor:p?"default":"pointer"},onClick:C,children:c})]})]})})]})},Nh=T(Sa)`
  align-self: center;
`,Sn=T(j)`
  text-align: center;
  display: inline-block;
`,kh=T(Sn)`
  cursor: pointer;
  display: inline-block;
`;function Pn(e,t,n){let i;switch(n){case"LOGIN_PASSKEY":{i=798;break}case"CREATE_PASSKEY":{i=464;break}case"OAUTH":default:{i=768;break}}const r=window.screenLeft!==void 0?window.screenLeft:window.screenX,o=window.screenTop!==void 0?window.screenTop:window.screenY,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,l=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=(a-550)/2+r,c=(l-i)/2+o,d=`toolbar=no, menubar=no, width=550, 
    height=${i}, top=${c}, left=${u}`;let p=window.open(e,t,d);return p||setTimeout(()=>{p=window.open(e,"_blank")},0),p}var Uh=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};function At(){const[e,t]=m.useState(!1),n=()=>{setTimeout(()=>{t(!1)},3e3)},s=m.useCallback(i=>Uh(this,void 0,void 0,function*(){if(!(navigator!=null&&navigator.clipboard))return console.warn("Clipboard not supported"),!1;try{return yield navigator.clipboard.writeText(i),t(!0),n(),!0}catch(r){return console.warn("Copy failed",r),t(!1),!1}}),[]);return[e,s]}var Wh=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Fh=()=>{const[e,t]=At(),n=w(v=>v.webAuthURLForLogin),s=w(v=>v.step),i=w(v=>v.setStep),r=w(v=>v.setLoginWindow),o=Q(v=>v.capsule),a=Z(v=>v.getUsername()),[l,u]=m.useState(),[c,d]=m.useState();m.useEffect(()=>{if(s!==y.BIOMETRIC_LOGIN&&u(null),!n)return;function v(){return Wh(this,void 0,void 0,function*(){const x=yield o.shortenLoginLink(n);u(x);const C=yield o.shortenLoginLink(`${n}&skipAutoLogin=true`);d(C)})}v()},[n]);const p=()=>{const v=Pn(l,"CapsulePasskey","LOGIN_PASSKEY");r(v),i(y.AWAITING_BIOMETRIC_LOGIN)},f=()=>{Pn(c,"CapsulePasskey","LOGIN_PASSKEY"),i(y.AWAITING_BIOMETRIC_LOGIN)},g=()=>{t(l)};return h.jsxs(oe,{$wide:!0,children:[h.jsxs(U,{children:[h.jsx(Ae,{variant:"headingS",weight:"bold",children:"Welcome back,"}),h.jsx(Mh,{children:h.jsx(Hh,{variant:"bodyS",weight:"medium",children:a})})]}),h.jsxs(Bh,{children:[h.jsxs(G,{fullWidth:!0,onClick:p,children:[h.jsx(M,{slot:"start",icon:"key"}),"Login with this device"]}),h.jsx(Fn,{children:"or"}),h.jsxs(U,{children:[!_e()&&h.jsxs(h.Fragment,{children:[h.jsx(j,{weight:"semiBold",children:"Scan with your mobile device"}),h.jsx(St,{children:l?h.jsx(Ct,{url:l}):h.jsx(ge,{size:100})})]}),h.jsxs(G,{size:"small",variant:"ghost",onClick:g,children:[h.jsx(M,{slot:"start",icon:e?"check":"copy"}),e?"Copied":"Copy Link"]})]}),h.jsx(Vh,{variant:"bodyXS",weight:"medium",onClick:f,children:"Iâ€™m having trouble logging in"})]})]})},Mh=T.div`
  padding: 8px 16px;
  border-radius: 1000px;
  background-color: var(--cpsl-color-background-4);
`,Bh=T(U)`
  gap: 16px;
`,Vh=T(j)`
  text-decoration: underline;
  cursor: pointer;
`,Hh=T(j)`
  color: var(--cpsl-color-background-96);
`;var un=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Gh=({onClose:e})=>{const t=w(k=>k.isLogin()),n=w(k=>k.setStep),s=Q(k=>k.capsule),i=w(k=>k.step===y.VERIFY_2FA),[r,o]=At(),a=m.useRef(null),[l,u]=m.useState(null),[c,d]=m.useState(""),[p,f]=m.useState(""),[g,v]=m.useState(!1),x=l?new URL(l).searchParams:void 0,C=x==null?void 0:x.get("secret");m.useEffect(()=>{function k(){return un(this,void 0,void 0,function*(){try{const{uri:b}=yield s.setup2FA();u(b)}catch(b){console.error("Error fetching OTPAuth URL:",b)}})}k()},[]),m.useEffect(()=>{setTimeout(()=>{var k,b,W;(W=(b=(k=a==null?void 0:a.current)===null||k===void 0?void 0:k.shadowRoot.querySelectorAll("input"))===null||b===void 0?void 0:b[0])===null||W===void 0||W.focus()},10)},[i]),m.useEffect(()=>{c.length===6&&I()},[c]);const S=()=>{n(y.VERIFY_2FA)},E=()=>{t?n(y.LOGIN_DONE):e()},A=k=>{p&&f(""),d(k.detail.value.trim())},I=()=>un(void 0,void 0,void 0,function*(){if(v(!0),c.length===6&&/^\d+$/.test(c))try{yield s.enable2FA(c),n(y.TWO_FACTOR_DONE)}catch{f("Incorrect Code")}else f("Incorrect Code");v(!1)}),N=()=>{o(C)};return h.jsxs(oe,{children:[h.jsxs(U,{children:[h.jsx(Ae,{variant:"headingS",weight:"bold",children:"Turn on Two-Factor authentication"}),i&&h.jsx(j,{variant:"bodyS",color:"secondary",weight:"medium",children:"Please enter the code from your authenticator app."})]}),h.jsx(U,{children:i?h.jsx(h.Fragment,{children:g?h.jsx(ge,{}):h.jsx("form",{onSubmit:k=>un(void 0,void 0,void 0,function*(){k.preventDefault(),yield I()}),children:h.jsx(Kh,{ref:a,code:c,onCpslInput:A,errorText:p,length:6,onKeyDown:k=>un(void 0,void 0,void 0,function*(){return k.key==="Enter"&&(yield I())})})})}):h.jsxs(h.Fragment,{children:[h.jsx(j,{variant:"bodyS",color:"secondary",weight:"medium",children:"Scan with your preferred authenticator app."}),h.jsx(St,{children:l?h.jsx(Ct,{url:l}):h.jsx(ge,{size:100})})]})}),!i&&h.jsxs(h.Fragment,{children:[h.jsx(U,{children:h.jsx(Fn,{children:"or enter the code manually"})}),h.jsx(U,{children:h.jsx(nl,{disabled:!0,value:C,noAutoDisable:!0,children:h.jsx(G,{slot:"end",variant:"ghost",onClick:N,children:h.jsx(M,{icon:r?"check":"copy"})})})}),h.jsxs(U,{children:[h.jsx(G,{fullWidth:!0,onClick:S,children:"Continue"}),h.jsx(zh,{variant:"ghost",onClick:E,children:"Skip"})]})]})]})},Kh=T(Sa)`
  align-self: center;
`,zh=T(G)`
  margin-top: 8px;
  text-decoration: underline;
`,sl=()=>{var e;const t=Q(o=>o.capsule),n=(e=t.currentWalletIds)===null||e===void 0?void 0:e[0];if(!n)return null;const s=t.wallets[n],i=s.address,r=s.name;return h.jsx(Xh,{children:h.jsxs(qh,{children:[h.jsx(Zh,{hash:i}),h.jsxs(Yh,{children:[h.jsx(Jh,{color:"contrast",variant:"bodyL",weight:"semiBold",children:r}),h.jsx(j,{color:"secondary",variant:"bodyS",weight:"medium",children:Bt(i)})]})]})})},Xh=T.div`
  width: 100%;
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  background-color: var(--cpsl-color-background-0);
  border: 1px solid var(--cpsl-color-background-32);
  border-radius: 16px;
`,qh=T.div`
  display: flex;
  justify-content: flex-start;
  gap: 8px;
  align-items: center;
`,Yh=T.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
  align-items: flex-start;
`,Jh=T(j)`
  line-height: 100%;
`,Zh=T(Aa)`
  height: 30px;
  width: 30px;
`,Qh=({onClose:e})=>{const n=Q(s=>s.capsule).isUsingExternalWallet();return m.useEffect(()=>{setTimeout(()=>{e()},800)},[]),h.jsx(oe,{children:n?h.jsx(Ae,{variant:"headingS",weight:"bold",children:"You're logged in!"}):h.jsx(sl,{})})},yi=({heading:e,subheading:t})=>h.jsxs(oe,{$wide:!0,children:[h.jsx(gi,{children:h.jsx(ge,{size:100})}),h.jsxs(U,{children:[h.jsx(Ae,{variant:"headingS",weight:"bold",children:e}),h.jsx(j,{variant:"bodyS",color:"secondary",weight:"medium",children:t})]})]}),ef=()=>{const e=w(t=>t.isLogin());return h.jsx(yi,{heading:e?"Waiting for Passkey":"Creating Passkey",subheading:"Follow the prompts presented by your browser."})},tf=()=>{const[e,t]=m.useState(!1),n=m.useRef();return m.useEffect(()=>(n.current=window.setTimeout(()=>{t(!0)},4e3),()=>clearTimeout(n.current)),[]),h.jsxs(oe,{$wide:!0,children:[h.jsx(yi,{heading:"Creating Your Wallet",subheading:"This should only take a couple of seconds."}),e&&h.jsx(Ea,{children:h.jsxs($h,{children:[h.jsxs(Dh,{children:[h.jsx(M,{icon:"clock"}),h.jsx(j,{weight:"medium",children:"Hang on"})]}),h.jsx(j,{variant:"bodyS",weight:"medium",color:"secondary",children:"Creating your wallet is taking a little longer than expected, but weâ€™re working on it!"})]})})]})},il=()=>{const e=w(s=>s.setStep),t=w(s=>s.onRampConfig);return m.useCallback(()=>{e(y.ADD_FUNDS)},[t])};var nf=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const sf=({twoFactorAuthEnabled:e,recoverySecretStepEnabled:t,onClose:n})=>{const s=w(l=>l.setStep),i=w(l=>l.isLogin()),r=Q(l=>l.capsule),o=il(),a=()=>nf(void 0,void 0,void 0,function*(){if(i){if(!e){s(y.LOGIN_DONE);return}const l=yield r.check2FAStatus();s(l?y.LOGIN_DONE:y.SETUP_2FA)}else e?s(y.SETUP_2FA):n()});return h.jsxs(oe,{$wide:!0,children:[h.jsx(Ae,{variant:"headingS",weight:"bold",children:"Wallet Created"}),h.jsxs(U,{children:[h.jsx(sl,{}),!t&&h.jsx(Ea,{children:h.jsxs(of,{children:[h.jsx(M,{icon:"shield"}),h.jsxs(ol,{variant:"bodyXS",weight:"medium",children:["Donâ€™t lose your wallet."," ",h.jsx("a",{href:"https://connect.usecapsule.com",target:"blank",children:h.jsx(rf,{color:"primary",variant:"bodyXS",weight:"medium",children:"Visit Capsule Connect"})})," ","to set up your Recovery Secret."]})]})})]}),h.jsxs(U,{children:[h.jsx(G,{fullWidth:!0,onClick:o,children:"Buy Crypto"}),h.jsx(G,{variant:"secondary",fullWidth:!0,onClick:a,children:e?"Continue":"Done"})]})]})},of=T.div`
  display: flex;
  gap: 8px;

  cpsl-icon {
    --icon-color: var(--cpsl-color-foreground-0);
  }
`,ol=T(j)`
  display: inline-block;
  color: var(--cpsl-color-background-96);
`,rf=T(ol)`
  cursor: pointer;
  text-decoration: underline;
  color: var(--cpsl-color-text-primary);
`;function af(e,t){const n=`Hello,%0D%0DBelow is your Capsule Recovery Secret. Keep this safe!%0D%0D${t}%0D%0DPlease get in touch via support@usecapsule.com if you have any questions`;return`mailto:${e}?subject=Capsule%20Recovery%20Secret&body=${n}`}var lf=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const cf=({email:e,value:t,onComplete:n})=>{const[s,i]=m.useState(!1),[r,o]=At(),a=()=>{o(t),i(!0)},l=()=>{const c=document.createElement("a"),d=new Blob([t],{type:"text/plain"});c.href=URL.createObjectURL(d),c.download="recovery.txt",document.body.appendChild(c),c.click(),i(!0)},u=()=>{window.open(af(e,t),"_self"),i(!0)};return h.jsxs(h.Fragment,{children:[h.jsxs(U,{children:[h.jsx(Ae,{variant:"headingXS",weight:"semiBold",children:"Save your Recovery Secret"}),h.jsxs(df,{children:[h.jsx(vs,{icon:"download",onClick:l,children:h.jsx(j,{variant:"bodyXS",color:"secondary",weight:"medium",children:"Download"})}),h.jsx(vs,{icon:r?"check":"copy",onClick:a,children:h.jsx(j,{variant:"bodyXS",color:"secondary",weight:"medium",children:r?"Copied!":"Copy"})}),h.jsx(vs,{icon:"send",onClick:u,children:h.jsx(j,{variant:"bodyXS",color:"secondary",weight:"medium",children:"Email"})})]})]}),h.jsx(U,{children:h.jsx(G,{fullWidth:!0,onClick:n,disabled:!s,children:s?"Iâ€™ve saved my recovery secret":"Choose an option above to continue"})})]})},uf=()=>{const e=w(o=>o.setStep),t=Z(o=>o.identifier),n=Z(o=>o.identifierType),s=Z(o=>o.recoveryShare),i=JSON.parse(s||"{}").backupDecryptionKey,r=()=>lf(void 0,void 0,void 0,function*(){e(y.WALLET_CREATION_DONE)});return h.jsxs(oe,{children:[h.jsxs(U,{children:[h.jsx(Ae,{variant:"headingS",weight:"bold",children:"Donâ€™t lose your wallet"}),h.jsxs(Lo,{variant:"bodyS",color:"secondary",weight:"medium",children:["Your"," ",h.jsx(Lo,{variant:"bodyS",weight:"medium",children:"Recovery Secret"})," ","ensures you will be able to regain access to your wallet if you lose your Passkey."]})]}),h.jsx(cf,{email:n==="email"?t:void 0,value:i,onComplete:r})]})},vs=T(Bn)`
  flex: 1;

  --button-icon-color: var(--cpsl-color-text-primary);
`,df=T.div`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
`,Lo=T(j)`
  text-align: center;
  display: inline-block;
`,hf=({onClose:e})=>h.jsxs(oe,{children:[h.jsxs(U,{children:[h.jsx(Ae,{variant:"headingXS",weight:"semiBold",children:"Success"}),h.jsx(j,{variant:"bodyS",color:"secondary",weight:"medium",children:"Your wallet is now protected by 2FA"})]}),h.jsx(G,{fullWidth:!0,onClick:e,children:"Done"})]});var ff=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const pf=()=>{const e=w(a=>a.webAuthURLForCreate),t=w(a=>a.step),n=w(a=>a.setStep),s=Q(a=>a.capsule),[i,r]=m.useState();m.useEffect(()=>{if(t!==y.BIOMETRIC_LOGIN&&r(null),!e)return;function a(){return ff(this,void 0,void 0,function*(){const l=yield s.shortenLoginLink(e);r(l)})}a()},[e]);const o=()=>{Pn(i,"CapsulePasskey","CREATE_PASSKEY"),n(y.AWAITING_BIOMETRIC_CREATION)};return h.jsxs(oe,{$wide:!0,children:[h.jsxs(U,{children:[h.jsx(Ae,{variant:"headingS",weight:"bold",children:"Create Passkey"}),h.jsx(j,{variant:"bodyS",color:"secondary",weight:"medium",children:"Your Passkey keeps your account safe."})]}),h.jsx(G,{fullWidth:!0,onClick:o,children:"Create"})]})},mf=()=>h.jsx(yi,{heading:"Complete Login",subheading:"Follow the prompts presented by your browser."});class vi extends Error{constructor(t){super(`On-ramp configuration error: ${t}.`),this.name="OnRampConfigError"}}function gf({providers:e}){if(!e||e.length<1)throw new vi("No providers are configured")}function yf({providers:e}){e.forEach(({id:t},n)=>{const s=Ut(t);if(e.findIndex(i=>Ut(i.id)===s)!==n)throw new vi(`Provider ${s} is configured more than once`)})}function vf({network:e,asset:t,providers:n}){var s;const[i,r]=[ri(e),pa(t)];if(!(!((s=eo[i])===null||s===void 0)&&s[r]))throw new Error(`Asset ${r} does not exist on network ${i}`);n.forEach(({id:o})=>{var a,l;const u=Ut(o);if(!(!((l=(a=eo[i])===null||a===void 0?void 0:a[r])===null||l===void 0)&&l[u]))throw new vi(`Provider ${u} does not support buying ${r} on ${i}`)})}function xf(e){return e?(gf(e),yf(e),vf(e),!0):!1}var Cf=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Sf=({config:e,index:t})=>{const n=Q(C=>C.capsule),s=w(C=>C.setStep),i=w(C=>C.setOnRampPurchase),[r,o]=m.useState(!1),a=e.providers[t],{feeLower:l,feeUpper:u,methods:c,name:d,icon:p,backgroundColors:f}=Ja[a.id],g=`Fee ${l}% - ${u}%`,v=m.useMemo(()=>{const C=[];return(c.includes(ts.DEBIT)||c.includes(ts.CREDIT))&&C.push(h.jsx(Ro,{icon:"creditCard"},"creditCard")),c.includes(ts.ACH)&&C.push(h.jsx(Ro,{icon:"bank"},"bank")),C},[]),x=()=>Cf(void 0,void 0,void 0,function*(){o(!0);const C=yield n.createOnRampPurchase({provider:a.id,network:e.network,asset:e.asset,testMode:e.testMode});i(C),s(y.ADD_FUNDS_AWAITING)});return m.useEffect(()=>{i(void 0)},[]),h.jsx(Af,{$gradientColors:f,fullWidth:!0,onClick:x,children:h.jsxs(Ef,{$backgroundColor:f[1],children:[h.jsx(bf,{children:p}),h.jsxs(wf,{children:[h.jsx(xs,{variant:"bodyL",weight:"medium",children:d}),h.jsxs(Tf,{children:[h.jsx(xs,{variant:"bodyXS",weight:"medium",children:g}),h.jsxs(If,{children:[h.jsx(xs,{variant:"bodyXS",weight:"medium",children:"Accepts"}),v]})]})]}),r?h.jsx(ge,{size:16}):h.jsx(_f,{icon:"chevronUp"})]})})},Af=T(G)`
  --button-primary-background-color: ${({$gradientColors:e})=>`linear-gradient(90deg, ${e[0]} 0%, ${e[1]} 100%)`};
  --button-primary-hover-background-color: ${({$gradientColors:e})=>`linear-gradient(90deg, ${e[0]} 0%, ${e[0]} 100%)`};
  --button-primary-active-background-color: ${({$gradientColors:e})=>`linear-gradient(90deg, ${e[0]} 0%, ${e[0]} 100%)`};
`,Ef=T.div`
  display: flex;
  gap: 4px;
  flex: 1;
  align-items: center;

  & cpsl-spinner {
    --background-color: ${({$backgroundColor:e})=>`${e}`};
  }
`,wf=T.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: start;
  gap: 2px;
`,Tf=T.div`
  display: flex;
  gap: 16px;
`,bf=T.span`
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #fff;
  border-radius: 100%;
  height: 48px;
  width: 48px;
`,xs=T(j)`
  color: #fff;
`,If=T.div`
  align-items: center;
  display: flex;
  gap: 2px;
`,Ro=T(M)`
  --height: 16px;
  --width: 16px;
  --icon-color: #fff;
`,_f=T(M)`
  transform: rotate(90deg);
  --icon-color: #fff;
`,Pf={wallet:void 0,switchEmbeddedWallet:()=>{}},rl=m.createContext(Pf);function Lf({children:e}){var t,n,s,i;const r=Q(g=>g.capsule),[o,a]=m.useState((n=(t=r.currentExternalWalletAddresses)===null||t===void 0?void 0:t[0])!==null&&n!==void 0?n:""),[l,u]=m.useState((i=(s=r.currentWalletIds)===null||s===void 0?void 0:s[0])!==null&&i!==void 0?i:"");m.useEffect(()=>(window.addEventListener(Ns,c),window.addEventListener(ks,d),()=>{window.removeEventListener(Ns,c),window.removeEventListener(ks,d)}),[]);const c=()=>{var g,v;a((v=(g=r.currentExternalWalletAddresses)===null||g===void 0?void 0:g[0])!==null&&v!==void 0?v:"")},d=()=>{var g,v;u((v=(g=r.currentWalletIds)===null||g===void 0?void 0:g[0])!==null&&v!==void 0?v:"")},p=g=>{var v,x;const C=(x=(v=r.currentWalletIds)===null||v===void 0?void 0:v.filter(S=>S!==g))!==null&&x!==void 0?x:[];r.setCurrentWalletIds([g,...C])},f=m.useMemo(()=>{const g=l,v=r.wallets[g];return r.isUsingExternalWallet()?{id:o,address:o,name:""}:v?{id:v.id,address:v.address,name:v.name}:void 0},[l,o]);return h.jsx(rl.Provider,{value:m.useMemo(()=>({wallet:f,switchEmbeddedWallet:p}),[f,p]),children:e})}const Vn=()=>m.useContext(rl),Rf=[[Xe.BUY,"Buy"],[Xe.RECEIVE,"Receive"]],Of=({hasFinishedAnimation:e})=>{const[t,n]=At(),s=pe(A=>A.appName),i=w(A=>A.onRampConfig),r=w(A=>A.networks),o=w(A=>A.isAccount()),a=w(A=>A.accountAddFundTab),{wallet:l}=Vn(),u=!i.enabledFlows,c=Rf.filter(([A])=>u||i.enabledFlows.some(I=>A===Xe[I])),d=u||c.length>1,p=c[0][0],[f,g]=m.useState(p),[v,x]=m.useState(),C=o?a:f,S=A=>{g(A.detail.tab)},E=()=>{n(l==null?void 0:l.address)};return m.useEffect(()=>{try{xf(i),x(void 0)}catch(A){x(A)}},[i]),h.jsxs(oe,{children:[!o&&d&&h.jsx(U,{children:h.jsx(Au,{selectedTab:e?C:"",onCpslTabsChanged:S,children:Object.entries(c).map(([A,I])=>h.jsxs(Su,{tab:A,children:[h.jsx(M,{slot:"start",icon:A==="buy"?"creditCard":"qrCode"}),I]},A))})}),h.jsx(h.Fragment,{children:C===Xe.BUY?h.jsx(h.Fragment,{children:v?h.jsx(Ca,{children:h.jsxs(j,{variant:"bodyS",children:["There was an on-ramp configuration error when instantiating this Capsule Modal:",h.jsx("br",{}),h.jsx("br",{}),h.jsx("span",{style:{fontFamily:"monospace"},children:v.toString().split(": ").pop()}),h.jsx("br",{}),h.jsx("br",{}),"If you are a user of ",s,", please contact support."]})}):h.jsxs(h.Fragment,{children:[h.jsx(Ae,{variant:"headingS",weight:"bold",children:"Choose Provider"}),h.jsx(U,{children:i.providers.map((A,I)=>h.jsx(Sf,{config:i,index:I},A.id))})]})}):h.jsxs(h.Fragment,{children:[h.jsxs(U,{children:[h.jsx(j,{weight:"semiBold",color:"secondary",children:"Copy wallet address"}),h.jsx(nl,{disabled:!0,value:l==null?void 0:l.address,noAutoDisable:!0,children:h.jsx(G,{slot:"end",variant:"ghost",onClick:E,children:h.jsx(M,{icon:t?"check":"copy"})})})]}),!_e()&&h.jsxs(h.Fragment,{children:[h.jsx(Fn,{children:"or"}),h.jsxs(U,{children:[h.jsx(j,{weight:"semiBold",color:"secondary",children:"Scan with your crypto wallet"}),h.jsx(St,{children:l!=null&&l.address?h.jsx(Ct,{url:l==null?void 0:l.address}):h.jsx(ge,{size:100})})]})]}),h.jsxs(U,{children:[h.jsxs(Re,{weight:"semiBold",children:[s??"This App"," Only Supports:"]}),h.jsx(Re,{weight:"medium",color:"secondary",children:_h(r)})]})]})})]})};var $f=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Df="pk_live_51MvquNGrzDeP5yP9EgVSMBPQbrbg0oHDjPIIXypePd0jzOFjbadyfO7wBKLHhUtbKIUiEUVC3YYcTJyAmJ8xA7JE00T2UDfYKz",jf="pk_test_51MvquNGrzDeP5yP98WgPaAUgQ50I3OpfPhVfiLO47FBHepJnZRPO62IzZY2uxT5ovhSS10RwcTcnaVil1mcJOzIi00dHapODdS",Nf=ot.createContext(null);Nf.displayName="CryptoElementsContext";const Oo=(e,t,n)=>{ot.useEffect(()=>{if(t&&n){const s=i=>n(i.payload);return t.addEventListener(e,s),()=>{t.removeEventListener(e,s)}}return()=>{}},[t,n,e])},kf=()=>{const e=pe(x=>x.isDark),t=Q(x=>x.capsule),n=w(x=>x.onRampConfig),s=w(x=>x.onRampPurchase),i=w(x=>x.setOnRampPurchase),[r,o]=m.useState(!1),a=m.useMemo(()=>s.provider===qe.STRIPE,[s]),l=m.useMemo(()=>(s==null?void 0:s.provider)===qe.STRIPE?s==null?void 0:s.providerKey:void 0,[s==null?void 0:s.provider,s==null?void 0:s.providerKey]),[u,c]=m.useState(),d=ot.useRef(null),[p,f]=ot.useState();m.useEffect(()=>{const x=d.current;x&&(x.innerHTML="",l&&u&&f(u.createSession({clientSecret:l,appearance:{theme:e?"dark":"light"}}).mount(x)))},[l,u]),m.useEffect(()=>{su(n!=null&&n.testMode?jf:Df).then(c)},[]);const g=m.useCallback(()=>{o(!0)},[]),v=m.useCallback(x=>$f(void 0,[x],void 0,function*({session:C}){if(a)switch(C.status){case"fulfillment_processing":case"fulfillment_complete":const S=yield t.updateOnRampPurchase({walletId:s.walletId,externalWalletAddress:s.externalWalletAddress,purchaseId:s.id,updates:{status:ga.FINISHED,fiatQuantity:C.quote.source_amount,fiatCurrency:C.quote.source_currency.asset_code,asset:ya(qe.STRIPE,C.quote.destination_currency.asset_code),assetQuantity:C.quote.destination_amount,providerKey:null}});i(S);break}}),[a]);return Oo("onramp_ui_loaded",p,g),Oo("onramp_session_updated",p,v),h.jsxs("div",{style:{minHeight:"480px",display:"flex",alignItems:"center",justifyContent:"center"},children:[h.jsx("div",{style:{display:r?"block":"none"},ref:d}),!r&&h.jsx(gi,{style:{width:"100%",height:"100%"},children:h.jsx(ge,{size:100})})]})},Uf=()=>{const e=w(t=>t.onRampPurchase);return h.jsxs(h.Fragment,{children:[h.jsx(gi,{children:h.jsx(ge,{size:100})}),h.jsxs(j,{children:["Follow the prompts presented by"," ",ga?Ja[e.provider].name:"the provider","."]})]})};var dn=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Wf={wallets:[],chains:[],chainId:void 0,wallet:void 0,qrUri:void 0,chainIdSwitchingTo:void 0,walletDisplayHelpers:{showExtension:!1,showMobile:!1,isSolanaMobileSafari:!1,isCosmosMobileWallet:!1},username:void 0,avatar:void 0,connectExternalWallet:()=>{},disconnectExternalWallet:()=>Promise.resolve(),switchChain:()=>Promise.resolve(),setChainIdSwitchingTo:()=>{}},al=m.createContext(Wf);function Ff({children:e,evmContext:t,solanaContext:n,cosmosContext:s,walletSort:i}){const{wallets:r,disconnect:o,chains:a,chainId:l,switchChain:u,username:c,avatar:d}=m.useContext(t),{wallets:p,disconnect:f}=m.useContext(n),{wallets:g,disconnect:v,chains:x,chainId:C,switchChain:S}=m.useContext(s),E=w(R=>R.setStep),A=w(R=>R.setStepDirection),I=w(R=>R.setIsExternalWalletConnecting),N=w(R=>R.isExternalWalletConnecting),k=w(R=>R.setSelectedExternalWalletId),b=w(R=>R.selectedExternalWalletId),W=w(R=>R.setExternalWalletError),B=w(R=>R.setIsUsingMobileConnector),re=w(R=>R.isUsingMobileConnector),K=Q(R=>R.capsule),[de,ye]=m.useState(),[O,H]=m.useState(),P=[...r,...p,...g].filter(R=>i.includes(R.id.toUpperCase())).sort((R,F)=>i.indexOf(R.id.toUpperCase())-i.indexOf(F.id.toUpperCase())).sort((R,F)=>R.installed===F.installed?0:R.installed?-1:1),L=m.useMemo(()=>P.find(R=>R.id===b),[P,b]),me=()=>dn(this,void 0,void 0,function*(){var R;const F=yield(R=L==null?void 0:L.getQrUri)===null||R===void 0?void 0:R.call(L);ye(F)});m.useEffect(()=>{L?de||me():de&&ye(void 0)},[L]);const je=m.useMemo(()=>{var R,F,X;const z=(X=K.externalWallets[(F=(R=K.currentExternalWalletAddresses)===null||R===void 0?void 0:R[0])!==null&&F!==void 0?F:""])===null||X===void 0?void 0:X.type;if(z)switch(z){case he.COSMOS:return x;case he.EVM:return a;default:return[]}},[x,a,b]),ve=m.useMemo(()=>{var R,F,X;const z=(X=K.externalWallets[(F=(R=K.currentExternalWalletAddresses)===null||R===void 0?void 0:R[0])!==null&&F!==void 0?F:""])===null||X===void 0?void 0:X.type;if(z)switch(z){case he.COSMOS:return C;case he.EVM:return l==null?void 0:l.toString();default:return}},[x,a,b]),Qt=m.useCallback(R=>dn(this,void 0,void 0,function*(){var F,X,z;const wt=(z=K.externalWallets[(X=(F=K.currentExternalWalletAddresses)===null||F===void 0?void 0:F[0])!==null&&X!==void 0?X:""])===null||z===void 0?void 0:z.type;if(wt){let $;switch(W(),H(R),wt){case he.COSMOS:{E(y.CHAIN_SWITCH),$=yield S(R);break}case he.EVM:{E(y.CHAIN_SWITCH),$=yield u(parseInt(R));break}}$.error?W($.error):(H(void 0),A(-1),E(y.ACCOUNT_MAIN))}}),[u,S]),en=m.useCallback((R,F)=>dn(this,void 0,void 0,function*(){if(!N){W(),I(!0),B(F);const{address:X,error:z}=yield F?R.connectMobile():R.connect();z?(W([z]),B()):X&&E(y.LOGIN_DONE),I(!1)}}),[N]),tn=()=>dn(this,void 0,void 0,function*(){yield o(),yield f(),yield v(),k()}),nn={showExtension:!_e()&&((L==null?void 0:L.isExtension)&&(L==null?void 0:L.installed)||!(L!=null&&L.isMobile)),showMobile:_e()&&(L==null?void 0:L.isMobile)||!_e()&&!(L!=null&&L.installed),isSolanaMobileSafari:wh()&&(L==null?void 0:L.type)===he.SOLANA,isCosmosMobileWallet:(L==null?void 0:L.type)===he.COSMOS&&re},rt=m.useMemo(()=>{var R,F;let X;const z=K.externalWallets[(F=(R=K.currentExternalWalletAddresses)===null||R===void 0?void 0:R[0])!==null&&F!==void 0?F:""];if(z)switch(z==null?void 0:z.type){case he.EVM:{X=c?c.startsWith("0x")?Bt(c):c:void 0;break}default:{X=z.address?Bt(z.address):void 0;break}}return X},[c,L]),sn=m.useMemo(()=>{var R,F,X;const z=(X=K.externalWallets[(F=(R=K.currentExternalWalletAddresses)===null||R===void 0?void 0:R[0])!==null&&F!==void 0?F:""])===null||X===void 0?void 0:X.type;if(z)switch(z){case he.EVM:return d;default:return}},[d,L]);return h.jsx(al.Provider,{value:m.useMemo(()=>({wallets:P,chains:je,chainId:ve,wallet:L,qrUri:de,walletDisplayHelpers:nn,chainIdSwitchingTo:O,username:rt,avatar:sn,connectExternalWallet:en,disconnectExternalWallet:tn,switchChain:Qt,setChainIdSwitchingTo:H}),[P,je,ve,L,de,nn,O,rt,sn,tn,en,Qt,H]),children:e})}const De=()=>m.useContext(al),Hn=()=>{const e=w(r=>r.step),t=w(r=>r.decrementStep),n=w(r=>r.resetState),{setChainIdSwitchingTo:s}=De();return()=>{switch(t(),e){case y.VERIFY_2FA:case y.BIOMETRIC_CREATION:case y.BIOMETRIC_LOGIN:{n();break}}switch(e){case y.CHAIN_SWITCH:{s();break}}}};var $o=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Mf=({hostApiKey:e})=>{const t=pe(l=>l.appName),n=w(l=>l.onRampConfig),s=w(l=>l.onRampPurchase),i=w(l=>l.setOnRampPurchase),r=Q(l=>l.capsule),o=Hn(),{wallet:a}=Vn();return m.useEffect(()=>{const l=iu(n.network,n.asset,qe.RAMP,n.testMode)[0],u=new ou({hostAppName:t,defaultAsset:l,hostLogoUrl:`${Ne(r.ctx)}/wordmark_black.svg`,hostApiKey:e,userAddress:a==null?void 0:a.address,userEmailAddress:r.getEmail(),url:n!=null&&n.testMode?"https://app.demo.ramp.network":"https://app.ramp.network",enabledFlows:["ONRAMP"]}).on("PURCHASE_CREATED",c=>$o(void 0,void 0,void 0,function*(){const d=c.payload.purchase,p=yield r.updateOnRampPurchase({walletId:s.walletId,externalWalletAddress:s.externalWalletAddress,purchaseId:s.id,updates:{providerKey:d.id,fiatQuantity:d.fiatValue,fiatCurrency:d.fiatCurrency,asset:ya(qe.RAMP,d.asset.symbol),assetQuantity:d.cryptoAmount}});i(p)})).on("WIDGET_CLOSE",()=>$o(void 0,void 0,void 0,function*(){o()}));u.show(),u.domNodes.overlay.style.zIndex="2147483647"},[]),h.jsx(Uf,{})},Bf={CANCELLED:y.ADD_FUNDS_FAILURE,FINISHED:y.ADD_FUNDS_SUCCESS},Vf=()=>{const e=w(i=>i.setStep),t=w(i=>i.onRampConfig),n=w(i=>i.onRampPurchase),s=m.useMemo(()=>{switch(n==null?void 0:n.provider){case qe.STRIPE:return h.jsx(kf,{});case qe.RAMP:const i=t.providers.find(({id:r})=>Ut(r)===qe.RAMP);return h.jsx(Mf,{hostApiKey:i.hostApiKey})}},[n==null?void 0:n.provider]);return m.useEffect(()=>{let i;return n!=null&&n.status&&["CANCELLED","FINISHED"].includes(n.status)&&(i=setTimeout(()=>{e(Bf[n.status])},5e3)),()=>clearTimeout(i)},[n==null?void 0:n.status]),h.jsx(oe,{$wide:!0,children:s})},Do=({isSuccess:e,onClose:t})=>{const n=w(l=>l.setStep),s=w(l=>l.onRampPurchase),i=m.useMemo(()=>new Intl.NumberFormat("en-US",{style:"currency",currency:(s==null?void 0:s.fiatCurrency)||"USD"}),[s==null?void 0:s.fiatCurrency]),r=e?"Transaction Successful":"Something Went Wrong",o=e?`${i.format(parseFloat(s==null?void 0:s.fiatQuantity))} is now available in your wallet.`:"No funds were added to your wallet.",a=e?"Done":"Try Again";return h.jsxs(oe,{children:[h.jsxs(U,{children:[h.jsx(Ae,{variant:"headingS",weight:"bold",children:r}),h.jsx(j,{variant:"bodyS",color:"secondary",children:o})]}),h.jsx(G,{fullWidth:!0,onClick:()=>{e?t():n(y.ADD_FUNDS)},children:a})]})};var jo=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Hf=()=>{const[e,t]=m.useState(""),n=w(a=>a.setStep),s=w(a=>a.setWebAuthURLForCreate),i=w(a=>a.setWebAuthURLForLogin),r=Q(a=>a.capsule),o=w(a=>a.setFlow);return m.useEffect(()=>{jo(void 0,void 0,void 0,function*(){const l=yield r.getFarcasterConnectURL();t(l)})},[]),m.useEffect(()=>{if(e)return jo(void 0,void 0,void 0,function*(){const{userExists:l,username:u}=yield r.waitForFarcasterStatus();if(n(y.AWAITING_OAUTH),l){const c=yield r.initiateUserLogin(u,!1,"farcaster");o("login"),i(c),n(y.BIOMETRIC_LOGIN)}else{const c=yield r.getSetUpBiometricsURL(!1,"farcaster");o("signUp"),s(c),n(y.BIOMETRIC_CREATION)}}),()=>{t("")}},[e]),h.jsxs(oe,{$wide:!0,children:[h.jsx(Ae,{variant:"headingS",weight:"bold",children:"Sign in using Farcaster"}),h.jsxs(U,{children:[h.jsx(j,{variant:"bodyS",color:"secondary",weight:"medium",children:"Scan the QR code with your phone's camera to proceed."}),h.jsx(St,{children:e?h.jsx(Ct,{url:e}):h.jsx(ge,{size:100})})]})]})},Gf=()=>{const e=w(i=>i.isLogin()),t=w(i=>i.step),{chainId:n}=De();return{title:m.useMemo(()=>({[y.AUTH_MAIN]:"",[y.AUTH_MORE]:"Sign Up or Log In",[y.EX_WALLET_MORE]:"Connect Wallet",[y.VERIFICATIONS]:"Sign Up",[y.AWAITING_OAUTH]:e?"Login":"Sign Up",[y.FARCASTER_OAUTH]:e?"Login":"Sign Up",[y.BIOMETRIC_CREATION]:"Sign Up",[y.AWAITING_BIOMETRIC_CREATION]:"Sign Up",[y.AWAITING_WALLET_CREATION]:e?"Login":"Sign Up",[y.WALLET_CREATION_DONE]:e?"Login":"Sign Up",[y.SECRET]:e?"Login":"Sign Up",[y.BIOMETRIC_LOGIN]:"Login",[y.AWAITING_BIOMETRIC_LOGIN]:"Login",[y.LOGIN_DONE]:"",[y.SETUP_2FA]:"2FA",[y.VERIFY_2FA]:"2FA",[y.TWO_FACTOR_DONE]:"2FA",[y.ADD_FUNDS]:"Fund Wallet",[y.ADD_FUNDS_AWAITING]:"Fund Wallet",[y.ADD_FUNDS_SUCCESS]:"Fund Wallet",[y.ADD_FUNDS_FAILURE]:"Fund Wallet",[y.ACCOUNT_MAIN]:"",[y.CHAIN_SWITCH]:""}),[e,n])[t]}},xi=m.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Gn=m.createContext({}),Kn=m.createContext(null),Ci=typeof window<"u",ll=Ci?m.useLayoutEffect:m.useEffect,cl=m.createContext({strict:!1}),zn=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Kf="framerAppearId",ul="data-"+zn(Kf),zf={skipAnimations:!1,useManualTiming:!1};function Xf(e){let t=new Set,n=new Set,s=!1,i=!1;const r=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){r.has(u)&&(l.schedule(u),e()),u(o)}const l={schedule:(u,c=!1,d=!1)=>{const f=d&&s?t:n;return c&&r.add(u),f.has(u)||f.add(u),u},cancel:u=>{n.delete(u),r.delete(u)},process:u=>{if(o=u,s){i=!0;return}s=!0,[t,n]=[n,t],n.clear(),t.forEach(a),s=!1,i&&(i=!1,l.process(u))}};return l}const hn=["read","resolveKeyframes","update","preRender","render","postRender"],qf=40;function dl(e,t){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,o=hn.reduce((C,S)=>(C[S]=Xf(r),C),{}),{read:a,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:p}=o,f=()=>{const C=performance.now();n=!1,i.delta=s?1e3/60:Math.max(Math.min(C-i.timestamp,qf),1),i.timestamp=C,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),d.process(i),p.process(i),i.isProcessing=!1,n&&t&&(s=!1,e(f))},g=()=>{n=!0,s=!0,i.isProcessing||e(f)};return{schedule:hn.reduce((C,S)=>{const E=o[S];return C[S]=(A,I=!1,N=!1)=>(n||g(),E.schedule(A,I,N)),C},{}),cancel:C=>{for(let S=0;S<hn.length;S++)o[hn[S]].cancel(C)},state:i,steps:o}}const{schedule:Si,cancel:e0}=dl(queueMicrotask,!1);function ft(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const hl=m.createContext({});let No=!1;function Yf(e,t,n,s,i){var r;const{visualElement:o}=m.useContext(Gn),a=m.useContext(cl),l=m.useContext(Kn),u=m.useContext(xi).reducedMotion,c=m.useRef();s=s||a.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const d=c.current,p=m.useContext(hl);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&Zf(c.current,n,i,p),m.useInsertionEffect(()=>{d&&d.update(n,l)});const f=n[ul],g=m.useRef(!!f&&!window.MotionHandoffIsComplete&&((r=window.MotionHasOptimisedAnimation)===null||r===void 0?void 0:r.call(window,f)));return ll(()=>{d&&(d.updateFeatures(),Si.render(d.render),g.current&&d.animationState&&d.animationState.animateChanges())}),m.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current=!1,No||(No=!0,queueMicrotask(Jf)))}),d}function Jf(){window.MotionHandoffIsComplete=!0}function Zf(e,t,n,s){const{layoutId:i,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:fl(e.parent)),e.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!o||a&&ft(a),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,layoutScroll:l,layoutRoot:u})}function fl(e){if(e)return e.options.allowProjection!==!1?e.projection:fl(e.parent)}function Qf(e,t,n){return m.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):ft(n)&&(n.current=s))},[t])}function Vt(e){return typeof e=="string"||Array.isArray(e)}function Ht(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Ai=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ei=["initial",...Ai];function Xn(e){return Ht(e.animate)||Ei.some(t=>Vt(e[t]))}function pl(e){return!!(Xn(e)||e.variants)}function ep(e,t){if(Xn(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Vt(n)?n:void 0,animate:Vt(s)?s:void 0}}return e.inherit!==!1?t:{}}function tp(e){const{initial:t,animate:n}=ep(e,m.useContext(Gn));return m.useMemo(()=>({initial:t,animate:n}),[ko(t),ko(n)])}function ko(e){return Array.isArray(e)?e.join(" "):e}const Uo={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vt={};for(const e in Uo)vt[e]={isEnabled:t=>Uo[e].some(n=>!!t[n])};function np(e){for(const t in e)vt[t]={...vt[t],...e[t]}}const wi=m.createContext({}),sp=Symbol.for("motionComponentSymbol"),ue=e=>e;let Ms=ue;function ip({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:i}){e&&np(e);function r(a,l){let u;const c={...m.useContext(xi),...a,layoutId:op(a)},{isStatic:d}=c,p=tp(a),f=s(a,d);if(!d&&Ci){rp();const g=ap(c);u=g.MeasureLayout,p.visualElement=Yf(i,f,c,t,g.ProjectionNode)}return h.jsxs(Gn.Provider,{value:p,children:[u&&p.visualElement?h.jsx(u,{visualElement:p.visualElement,...c}):null,n(i,a,Qf(f,p.visualElement,l),f,d,p.visualElement)]})}const o=m.forwardRef(r);return o[sp]=i,o}function op({layoutId:e}){const t=m.useContext(wi).id;return t&&e!==void 0?t+"-"+e:e}function rp(e,t){m.useContext(cl).strict}function ap(e){const{drag:t,layout:n}=vt;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function lp(e){function t(s,i={}){return ip(e(s,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(s,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const cp=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ti(e){return typeof e!="string"||e.includes("-")?!1:!!(cp.indexOf(e)>-1||/[A-Z]/u.test(e))}const Ln={};function up(e){Object.assign(Ln,e)}const qt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ze=new Set(qt);function ml(e,{layout:t,layoutId:n}){return Ze.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ln[e]||e==="opacity")}const ce=e=>!!(e&&e.getVelocity),gl=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ye=(e,t,n)=>n>t?t:n<e?e:n,Et={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Dt={...Et,transform:e=>Ye(0,1,e)},fn={...Et,default:1},jt=e=>Math.round(e*1e5)/1e5,bi=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,dp=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,hp=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function Yt(e){return typeof e=="string"}function fp(e){return e==null}const Jt=e=>({test:t=>Yt(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ge=Jt("deg"),Oe=Jt("%"),D=Jt("px"),pp=Jt("vh"),mp=Jt("vw"),Wo={...Oe,parse:e=>Oe.parse(e)/100,transform:e=>Oe.transform(e*100)},Fo={...Et,transform:Math.round},Ii={borderWidth:D,borderTopWidth:D,borderRightWidth:D,borderBottomWidth:D,borderLeftWidth:D,borderRadius:D,radius:D,borderTopLeftRadius:D,borderTopRightRadius:D,borderBottomRightRadius:D,borderBottomLeftRadius:D,width:D,maxWidth:D,height:D,maxHeight:D,size:D,top:D,right:D,bottom:D,left:D,padding:D,paddingTop:D,paddingRight:D,paddingBottom:D,paddingLeft:D,margin:D,marginTop:D,marginRight:D,marginBottom:D,marginLeft:D,rotate:Ge,rotateX:Ge,rotateY:Ge,rotateZ:Ge,scale:fn,scaleX:fn,scaleY:fn,scaleZ:fn,skew:Ge,skewX:Ge,skewY:Ge,distance:D,translateX:D,translateY:D,translateZ:D,x:D,y:D,z:D,perspective:D,transformPerspective:D,opacity:Dt,originX:Wo,originY:Wo,originZ:D,zIndex:Fo,backgroundPositionX:D,backgroundPositionY:D,fillOpacity:Dt,strokeOpacity:Dt,numOctaves:Fo},gp={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yp=qt.length;function vp(e,t,n){let s="",i=!0;for(let r=0;r<yp;r++){const o=qt[r],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=gl(a,Ii[o]);if(!l){i=!1;const c=gp[o]||o;s+=`${c}(${u}) `}n&&(t[o]=u)}}return s=s.trim(),n?s=n(t,i?"":s):i&&(s="none"),s}const yl=e=>t=>typeof t=="string"&&t.startsWith(e),vl=yl("--"),xp=yl("var(--"),_i=e=>xp(e)?Cp.test(e.split("/*")[0].trim()):!1,Cp=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Pi(e,t,n){const{style:s,vars:i,transformOrigin:r}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(Ze.has(l)){o=!0;continue}else if(vl(l)){i[l]=u;continue}else{const c=gl(u,Ii[l]);l.startsWith("origin")?(a=!0,r[l]=c):s[l]=c}}if(t.transform||(o||n?s.transform=vp(t,e.transform,n):s.transform&&(s.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=r;s.transformOrigin=`${l} ${u} ${c}`}}const Li=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xl(e,t,n){for(const s in t)!ce(t[s])&&!ml(s,n)&&(e[s]=t[s])}function Sp({transformTemplate:e},t){return m.useMemo(()=>{const n=Li();return Pi(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Ap(e,t){const n=e.style||{},s={};return xl(s,n,e),Object.assign(s,Sp(e,t)),s}function Ep(e,t){const n={},s=Ap(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const wp=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Rn(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||wp.has(e)}let Cl=e=>!Rn(e);function Tp(e){e&&(Cl=t=>t.startsWith("on")?!Rn(t):e(t))}try{Tp(require("@emotion/is-prop-valid").default)}catch{}function bp(e,t,n){const s={};for(const i in e)i==="values"&&typeof e.values=="object"||(Cl(i)||n===!0&&Rn(i)||!t&&!Rn(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}function Mo(e,t,n){return typeof e=="string"?e:D.transform(t+n*e)}function Ip(e,t,n){const s=Mo(t,e.x,e.width),i=Mo(n,e.y,e.height);return`${s} ${i}`}const _p={offset:"stroke-dashoffset",array:"stroke-dasharray"},Pp={offset:"strokeDashoffset",array:"strokeDasharray"};function Lp(e,t,n=1,s=0,i=!0){e.pathLength=1;const r=i?_p:Pp;e[r.offset]=D.transform(-s);const o=D.transform(t),a=D.transform(n);e[r.array]=`${o} ${a}`}function Ri(e,{attrX:t,attrY:n,attrScale:s,originX:i,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,d){if(Pi(e,u,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:f,dimensions:g}=e;p.transform&&(g&&(f.transform=p.transform),delete p.transform),g&&(i!==void 0||r!==void 0||f.transform)&&(f.transformOrigin=Ip(g,i!==void 0?i:.5,r!==void 0?r:.5)),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),s!==void 0&&(p.scale=s),o!==void 0&&Lp(p,o,a,l,!1)}const Sl=()=>({...Li(),attrs:{}}),Oi=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Rp(e,t,n,s){const i=m.useMemo(()=>{const r=Sl();return Ri(r,t,Oi(s),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};xl(r,e.style,e),i.style={...r,...i.style}}return i}function Op(e=!1){return(n,s,i,{latestValues:r},o)=>{const l=(Ti(n)?Rp:Ep)(s,r,o,n),u=bp(s,typeof n=="string",e),c=n!==m.Fragment?{...u,...l,ref:i}:{},{children:d}=s,p=m.useMemo(()=>ce(d)?d.get():d,[d]);return m.createElement(n,{...c,children:p})}}function Al(e,{style:t,vars:n},s,i){Object.assign(e.style,t,i&&i.getProjectionStyles(s));for(const r in n)e.style.setProperty(r,n[r])}const El=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wl(e,t,n,s){Al(e,t,void 0,s);for(const i in t.attrs)e.setAttribute(El.has(i)?i:zn(i),t.attrs[i])}function $i(e,t,n){var s;const{style:i}=e,r={};for(const o in i)(ce(i[o])||t.style&&ce(t.style[o])||ml(o,e)||((s=n==null?void 0:n.getValue(o))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(r[o]=i[o]);return n&&i&&typeof i.willChange=="string"&&(n.applyWillChange=!1),r}function Tl(e,t,n){const s=$i(e,t,n);for(const i in e)if(ce(e[i])||ce(t[i])){const r=qt.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=e[i]}return s}function Bo(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function Di(e,t,n,s){if(typeof t=="function"){const[i,r]=Bo(s);t=t(n!==void 0?n:e.custom,i,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,r]=Bo(s);t=t(n!==void 0?n:e.custom,i,r)}return t}function ji(e){const t=m.useRef(null);return t.current===null&&(t.current=e()),t.current}const Bs=e=>Array.isArray(e),$p=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Dp=e=>Bs(e)?e[e.length-1]||0:e;function An(e){const t=ce(e)?e.get():e;return $p(t)?t.toValue():t}const bl=new Set(["opacity","clipPath","filter","transform"]);function Il(e){if(Ze.has(e))return"transform";if(bl.has(e))return zn(e)}function qn(e,t){e.indexOf(t)===-1&&e.push(t)}function Yn(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function jp({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:n,onMount:s},i,r,o,a){const l={latestValues:kp(i,r,o,a?!1:e,t),renderState:n()};return s&&(l.mount=u=>s(i,u,l)),l}const _l=e=>(t,n)=>{const s=m.useContext(Gn),i=m.useContext(Kn),r=()=>jp(e,t,s,i,n);return n?r():ji(r)};function Np(e,t){const n=Il(t);n&&qn(e,n)}function Vo(e,t,n){const s=Array.isArray(t)?t:[t];for(let i=0;i<s.length;i++){const r=Di(e,s[i]);if(r){const{transitionEnd:o,transition:a,...l}=r;n(l,o)}}}function kp(e,t,n,s,i){var r;const o={},a=[],l=s&&((r=e.style)===null||r===void 0?void 0:r.willChange)===void 0,u=i(e,{});for(const x in u)o[x]=An(u[x]);let{initial:c,animate:d}=e;const p=Xn(e),f=pl(e);t&&f&&!p&&e.inherit!==!1&&(c===void 0&&(c=t.initial),d===void 0&&(d=t.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const v=g?d:c;return v&&typeof v!="boolean"&&!Ht(v)&&Vo(e,v,(x,C)=>{for(const S in x){let E=x[S];if(Array.isArray(E)){const A=g?E.length-1:0;E=E[A]}E!==null&&(o[S]=E)}for(const S in C)o[S]=C[S]}),l&&(d&&c!==!1&&!Ht(d)&&Vo(e,d,x=>{for(const C in x)Np(a,C)}),a.length&&(o.willChange=a.join(","))),o}const{schedule:V,cancel:He,state:se,steps:Cs}=dl(typeof requestAnimationFrame<"u"?requestAnimationFrame:ue,!0),Up={useVisualState:_l({scrapeMotionValuesFromProps:Tl,createRenderState:Sl,onMount:(e,t,{renderState:n,latestValues:s})=>{V.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),V.render(()=>{Ri(n,s,Oi(t.tagName),e.transformTemplate),wl(t,n)})}})},Wp={useVisualState:_l({applyWillChange:!0,scrapeMotionValuesFromProps:$i,createRenderState:Li})};function Fp(e,{forwardMotionProps:t=!1},n,s){return{...Ti(e)?Up:Wp,preloadedFeatures:n,useRender:Op(t),createVisualElement:s,Component:e}}function ke(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}const Pl=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Jn(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const Mp=e=>t=>Pl(t)&&e(t,Jn(t));function Ue(e,t,n,s){return ke(e,t,Mp(n),s)}const Bp=(e,t)=>n=>t(e(n)),We=(...e)=>e.reduce(Bp);function Ll(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Ho=Ll("dragHorizontal"),Go=Ll("dragVertical");function Rl(e){let t=!1;if(e==="y")t=Go();else if(e==="x")t=Ho();else{const n=Ho(),s=Go();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function Ol(){const e=Rl(!0);return e?(e(),!1):!0}class Qe{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Ko(e,t){const n=t?"pointerenter":"pointerleave",s=t?"onHoverStart":"onHoverEnd",i=(r,o)=>{if(r.pointerType==="touch"||Ol())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t);const l=a[s];l&&V.postRender(()=>l(r,o))};return Ue(e.current,n,i,{passive:!e.getProps()[s]})}class Vp extends Qe{mount(){this.unmount=We(Ko(this.node,!0),Ko(this.node,!1))}unmount(){}}class Hp extends Qe{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=We(ke(this.node.current,"focus",()=>this.onFocus()),ke(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const $l=(e,t)=>t?e===t?!0:$l(e,t.parentElement):!1;function Ss(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Jn(n))}class Gp extends Qe{constructor(){super(...arguments),this.removeStartListeners=ue,this.removeEndListeners=ue,this.removeAccessibleListeners=ue,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),r=Ue(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:d}=this.node.getProps(),p=!d&&!$l(this.node.current,a.target)?c:u;p&&V.update(()=>p(a,l))},{passive:!(s.onTap||s.onPointerUp)}),o=Ue(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=We(r,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=r=>{if(r.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Ss("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&V.postRender(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=ke(this.node.current,"keyup",o),Ss("down",(a,l)=>{this.startPress(a,l)})},n=ke(this.node.current,"keydown",t),s=()=>{this.isPressing&&Ss("cancel",(r,o)=>this.cancelPress(r,o))},i=ke(this.node.current,"blur",s);this.removeAccessibleListeners=We(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&V.postRender(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Ol()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&V.postRender(()=>s(t,n))}mount(){const t=this.node.getProps(),n=Ue(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=ke(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=We(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Vs=new WeakMap,As=new WeakMap,Kp=e=>{const t=Vs.get(e.target);t&&t(e)},zp=e=>{e.forEach(Kp)};function Xp({root:e,...t}){const n=e||document;As.has(n)||As.set(n,{});const s=As.get(n),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(zp,{root:e,...t})),s[i]}function qp(e,t,n){const s=Xp(t);return Vs.set(e,n),s.observe(e),()=>{Vs.delete(e),s.unobserve(e)}}const Yp={some:0,all:1};class Jp extends Qe{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:r}=t,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:Yp[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),p=u?c:d;p&&p(l)};return qp(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Zp(t,n))&&this.startObserver()}unmount(){}}function Zp({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Qp={inView:{Feature:Jp},tap:{Feature:Gp},focus:{Feature:Hp},hover:{Feature:Vp}};function Dl(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function Zn(e,t,n){const s=e.getProps();return Di(s,t,n!==void 0?n:s.custom,e)}const Fe=e=>e*1e3,Me=e=>e/1e3,em={type:"spring",stiffness:500,damping:25,restSpeed:10},tm=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),nm={type:"keyframes",duration:.8},sm={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},im=(e,{keyframes:t})=>t.length>2?nm:Ze.has(e)?e.startsWith("scale")?tm(t[1]):em:sm;function om({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function Ni(e,t){return e[t]||e.default||e}const rm=e=>e!==null;function Qn(e,{repeat:t,repeatType:n="loop"},s){const i=e.filter(rm),r=t&&n!=="loop"&&t%2===1?0:i.length-1;return!r||s===void 0?i[r]:s}const jl=e=>/^0[^.\s]+$/u.test(e);function am(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||jl(e):!0}const Nl=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),lm=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function cm(e){const t=lm.exec(e);if(!t)return[,];const[,n,s,i]=t;return[`--${n??s}`,i]}function kl(e,t,n=1){const[s,i]=cm(e);if(!s)return;const r=window.getComputedStyle(t).getPropertyValue(s);if(r){const o=r.trim();return Nl(o)?parseFloat(o):o}return _i(i)?kl(i,t,n+1):i}const um=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),zo=e=>e===Et||e===D,Xo=(e,t)=>parseFloat(e.split(", ")[t]),qo=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/u);if(i)return Xo(i[1],t);{const r=s.match(/^matrix\((.+)\)$/u);return r?Xo(r[1],e):0}},dm=new Set(["x","y","z"]),hm=qt.filter(e=>!dm.has(e));function fm(e){const t=[];return hm.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const xt={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:qo(4,13),y:qo(5,14)};xt.translateX=xt.x;xt.translateY=xt.y;const Ul=e=>t=>t.test(e),pm={test:e=>e==="auto",parse:e=>e},Wl=[Et,D,Oe,Ge,mp,pp,pm],Yo=e=>Wl.find(Ul(e)),it=new Set;let Hs=!1,Gs=!1;function Fl(){if(Gs){const e=Array.from(it).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const i=fm(s);i.length&&(n.set(s,i),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([r,o])=>{var a;(a=s.getValue(r))===null||a===void 0||a.set(o)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Gs=!1,Hs=!1,it.forEach(e=>e.complete()),it.clear()}function Ml(){it.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Gs=!0)})}function mm(){Ml(),Fl()}class ki{constructor(t,n,s,i,r,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(it.add(this),Hs||(Hs=!0,V.read(Ml),V.resolveKeyframes(Fl))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:i}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const o=i==null?void 0:i.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(s&&n){const l=s.readValue(n,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),i&&o===void 0&&i.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),it.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,it.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ui=(e,t)=>n=>!!(Yt(n)&&hp.test(n)&&n.startsWith(e)||t&&!fp(n)&&Object.prototype.hasOwnProperty.call(n,t)),Bl=(e,t,n)=>s=>{if(!Yt(s))return s;const[i,r,o,a]=s.match(bi);return{[e]:parseFloat(i),[t]:parseFloat(r),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},gm=e=>Ye(0,255,e),Es={...Et,transform:e=>Math.round(gm(e))},st={test:Ui("rgb","red"),parse:Bl("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+Es.transform(e)+", "+Es.transform(t)+", "+Es.transform(n)+", "+jt(Dt.transform(s))+")"};function ym(e){let t="",n="",s="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const Ks={test:Ui("#"),parse:ym,transform:st.transform},pt={test:Ui("hsl","hue"),parse:Bl("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Oe.transform(jt(t))+", "+Oe.transform(jt(n))+", "+jt(Dt.transform(s))+")"},le={test:e=>st.test(e)||Ks.test(e)||pt.test(e),parse:e=>st.test(e)?st.parse(e):pt.test(e)?pt.parse(e):Ks.parse(e),transform:e=>Yt(e)?e:e.hasOwnProperty("red")?st.transform(e):pt.transform(e)};function vm(e){var t,n;return isNaN(e)&&Yt(e)&&(((t=e.match(bi))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(dp))===null||n===void 0?void 0:n.length)||0)>0}const Vl="number",Hl="color",xm="var",Cm="var(",Jo="${}",Sm=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Gt(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},i=[];let r=0;const a=t.replace(Sm,l=>(le.test(l)?(s.color.push(r),i.push(Hl),n.push(le.parse(l))):l.startsWith(Cm)?(s.var.push(r),i.push(xm),n.push(l)):(s.number.push(r),i.push(Vl),n.push(parseFloat(l))),++r,Jo)).split(Jo);return{values:n,split:a,indexes:s,types:i}}function Gl(e){return Gt(e).values}function Kl(e){const{split:t,types:n}=Gt(e),s=t.length;return i=>{let r="";for(let o=0;o<s;o++)if(r+=t[o],i[o]!==void 0){const a=n[o];a===Vl?r+=jt(i[o]):a===Hl?r+=le.transform(i[o]):r+=i[o]}return r}}const Am=e=>typeof e=="number"?0:e;function Em(e){const t=Gl(e);return Kl(e)(t.map(Am))}const Je={test:vm,parse:Gl,createTransformer:Kl,getAnimatableNone:Em},wm=new Set(["brightness","contrast","saturate","opacity"]);function Tm(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(bi)||[];if(!s)return e;const i=n.replace(s,"");let r=wm.has(t)?1:0;return s!==n&&(r*=100),t+"("+r+i+")"}const bm=/\b([a-z-]*)\(.*?\)/gu,zs={...Je,getAnimatableNone:e=>{const t=e.match(bm);return t?t.map(Tm).join(" "):e}},Im={...Ii,color:le,backgroundColor:le,outlineColor:le,fill:le,stroke:le,borderColor:le,borderTopColor:le,borderRightColor:le,borderBottomColor:le,borderLeftColor:le,filter:zs,WebkitFilter:zs},Wi=e=>Im[e];function zl(e,t){let n=Wi(e);return n!==zs&&(n=Je),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const _m=new Set(["auto","none","0"]);function Pm(e,t,n){let s=0,i;for(;s<e.length&&!i;){const r=e[s];typeof r=="string"&&!_m.has(r)&&Gt(r).values.length&&(i=e[s]),s++}if(i&&n)for(const r of t)e[r]=zl(n,i)}class Xl extends ki{constructor(t,n,s,i,r){super(t,n,s,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),_i(u))){const c=kl(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!um.has(s)||t.length!==2)return;const[i,r]=t,o=Yo(i),a=Yo(r);if(o!==a)if(zo(o)&&zo(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let i=0;i<t.length;i++)am(t[i])&&s.push(i);s.length&&Pm(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xt[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(s,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:s,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const r=n.getValue(s);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=xt[s](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function ql(e){let t;return()=>(t===void 0&&(t=e()),t)}let En;function Lm(){En=void 0}const Be={now:()=>(En===void 0&&Be.set(se.isProcessing||zf.useManualTiming?se.timestamp:performance.now()),En),set:e=>{En=e,queueMicrotask(Lm)}},Zo=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Je.test(e)||e==="0")&&!e.startsWith("url("));function Rm(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Om(e,t,n,s){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],o=Zo(i,t),a=Zo(r,t);return!o||!a?!1:Rm(e)||n==="spring"&&s}const $m=40;class Yl{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Be.now(),this.options={autoplay:t,delay:n,type:s,repeat:i,repeatDelay:r,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>$m?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&mm(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Be.now(),this.hasAttemptedResolve=!0;const{name:s,type:i,velocity:r,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!Om(t,s,i,r))if(o)this.options.duration=0;else{l==null||l(Qn(t,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,n);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function Jl(e,t){return t?e*(1e3/t):0}const Dm=5;function Zl(e,t,n){const s=Math.max(t-Dm,0);return Jl(n-e(s),t-s)}const ws=.001,jm=.01,Nm=10,km=.05,Um=1;function Wm({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let i,r,o=1-t;o=Ye(km,Um,o),e=Ye(jm,Nm,Me(e)),o<1?(i=u=>{const c=u*o,d=c*e,p=c-n,f=Xs(u,o),g=Math.exp(-d);return ws-p/f*g},r=u=>{const d=u*o*e,p=d*n+n,f=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-d),v=Xs(Math.pow(u,2),o);return(-i(u)+ws>0?-1:1)*((p-f)*g)/v}):(i=u=>{const c=Math.exp(-u*e),d=(u-n)*e+1;return-ws+c*d},r=u=>{const c=Math.exp(-u*e),d=(n-u)*(e*e);return c*d});const a=5/e,l=Mm(i,r,a);if(e=Fe(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*s;return{stiffness:u,damping:o*2*Math.sqrt(s*u),duration:e}}}const Fm=12;function Mm(e,t,n){let s=n;for(let i=1;i<Fm;i++)s=s-e(s)/t(s);return s}function Xs(e,t){return e*Math.sqrt(1-t*t)}const Bm=["duration","bounce"],Vm=["stiffness","damping","mass"];function Qo(e,t){return t.some(n=>e[n]!==void 0)}function Hm(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Qo(e,Vm)&&Qo(e,Bm)){const n=Wm(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function Ql({keyframes:e,restDelta:t,restSpeed:n,...s}){const i=e[0],r=e[e.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:d,isResolvedFromDuration:p}=Hm({...s,velocity:-Me(s.velocity||0)}),f=d||0,g=l/(2*Math.sqrt(a*u)),v=r-i,x=Me(Math.sqrt(a/u)),C=Math.abs(v)<5;n||(n=C?.01:2),t||(t=C?.005:.5);let S;if(g<1){const E=Xs(x,g);S=A=>{const I=Math.exp(-g*x*A);return r-I*((f+g*x*v)/E*Math.sin(E*A)+v*Math.cos(E*A))}}else if(g===1)S=E=>r-Math.exp(-x*E)*(v+(f+x*v)*E);else{const E=x*Math.sqrt(g*g-1);S=A=>{const I=Math.exp(-g*x*A),N=Math.min(E*A,300);return r-I*((f+g*x*v)*Math.sinh(N)+E*v*Math.cosh(N))/E}}return{calculatedDuration:p&&c||null,next:E=>{const A=S(E);if(p)o.done=E>=c;else{let I=0;g<1&&(I=E===0?Fe(f):Zl(S,E,A));const N=Math.abs(I)<=n,k=Math.abs(r-A)<=t;o.done=N&&k}return o.value=o.done?r:A,o}}}function er({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],p={done:!1,value:d},f=b=>a!==void 0&&b<a||l!==void 0&&b>l,g=b=>a===void 0?l:l===void 0||Math.abs(a-b)<Math.abs(l-b)?a:l;let v=n*t;const x=d+v,C=o===void 0?x:o(x);C!==x&&(v=C-d);const S=b=>-v*Math.exp(-b/s),E=b=>C+S(b),A=b=>{const W=S(b),B=E(b);p.done=Math.abs(W)<=u,p.value=p.done?C:B};let I,N;const k=b=>{f(p.value)&&(I=b,N=Ql({keyframes:[p.value,g(p.value)],velocity:Zl(E,b,p.value),damping:i,stiffness:r,restDelta:u,restSpeed:c}))};return k(0),{calculatedDuration:null,next:b=>{let W=!1;return!N&&I===void 0&&(W=!0,A(b),k(b)),I!==void 0&&b>=I?N.next(b-I):(!W&&A(b),p)}}}const ec=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Gm=1e-7,Km=12;function zm(e,t,n,s,i){let r,o,a=0;do o=t+(n-t)/2,r=ec(o,s,i)-e,r>0?n=o:t=o;while(Math.abs(r)>Gm&&++a<Km);return o}function Zt(e,t,n,s){if(e===t&&n===s)return ue;const i=r=>zm(r,0,1,e,n);return r=>r===0||r===1?r:ec(i(r),t,s)}const Xm=Zt(.42,0,1,1),qm=Zt(0,0,.58,1),tc=Zt(.42,0,.58,1),Ym=e=>Array.isArray(e)&&typeof e[0]!="number",nc=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,sc=e=>t=>1-e(1-t),Fi=e=>1-Math.sin(Math.acos(e)),ic=sc(Fi),Jm=nc(Fi),oc=Zt(.33,1.53,.69,.99),Mi=sc(oc),Zm=nc(Mi),Qm=e=>(e*=2)<1?.5*Mi(e):.5*(2-Math.pow(2,-10*(e-1))),tr={linear:ue,easeIn:Xm,easeInOut:tc,easeOut:qm,circIn:Fi,circInOut:Jm,circOut:ic,backIn:Mi,backInOut:Zm,backOut:oc,anticipate:Qm},nr=e=>{if(Array.isArray(e)){Ms(e.length===4);const[t,n,s,i]=e;return Zt(t,n,s,i)}else if(typeof e=="string")return Ms(tr[e]!==void 0),tr[e];return e},Kt=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},Y=(e,t,n)=>e+(t-e)*n;function Ts(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function eg({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let i=0,r=0,o=0;if(!t)i=r=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=Ts(l,a,e+1/3),r=Ts(l,a,e),o=Ts(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:s}}function On(e,t){return n=>n>0?t:e}const bs=(e,t,n)=>{const s=e*e,i=n*(t*t-s)+s;return i<0?0:Math.sqrt(i)},tg=[Ks,st,pt],ng=e=>tg.find(t=>t.test(e));function sr(e){const t=ng(e);if(!t)return!1;let n=t.parse(e);return t===pt&&(n=eg(n)),n}const ir=(e,t)=>{const n=sr(e),s=sr(t);if(!n||!s)return On(e,t);const i={...n};return r=>(i.red=bs(n.red,s.red,r),i.green=bs(n.green,s.green,r),i.blue=bs(n.blue,s.blue,r),i.alpha=Y(n.alpha,s.alpha,r),st.transform(i))},qs=new Set(["none","hidden"]);function sg(e,t){return qs.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function ig(e,t){return n=>Y(e,t,n)}function Bi(e){return typeof e=="number"?ig:typeof e=="string"?_i(e)?On:le.test(e)?ir:ag:Array.isArray(e)?rc:typeof e=="object"?le.test(e)?ir:og:On}function rc(e,t){const n=[...e],s=n.length,i=e.map((r,o)=>Bi(r)(r,t[o]));return r=>{for(let o=0;o<s;o++)n[o]=i[o](r);return n}}function og(e,t){const n={...e,...t},s={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(s[i]=Bi(e[i])(e[i],t[i]));return i=>{for(const r in s)n[r]=s[r](i);return n}}function rg(e,t){var n;const s=[],i={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const o=t.types[r],a=e.indexes[o][i[o]],l=(n=e.values[a])!==null&&n!==void 0?n:0;s[r]=l,i[o]++}return s}const ag=(e,t)=>{const n=Je.createTransformer(t),s=Gt(e),i=Gt(t);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?qs.has(e)&&!i.values.length||qs.has(t)&&!s.values.length?sg(e,t):We(rc(rg(s,i),i.values),n):On(e,t)};function ac(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Y(e,t,n):Bi(e)(e,t)}function lg(e,t,n){const s=[],i=n||ac,r=e.length-1;for(let o=0;o<r;o++){let a=i(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||ue:t;a=We(l,a)}s.push(a)}return s}function cg(e,t,{clamp:n=!0,ease:s,mixer:i}={}){const r=e.length;if(Ms(r===t.length),r===1)return()=>t[0];if(r===2&&e[0]===e[1])return()=>t[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=lg(t,s,i),a=o.length,l=u=>{let c=0;if(a>1)for(;c<e.length-2&&!(u<e[c+1]);c++);const d=Kt(e[c],e[c+1],u);return o[c](d)};return n?u=>l(Ye(e[0],e[r-1],u)):l}function ug(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const i=Kt(0,t,s);e.push(Y(n,1,i))}}function dg(e){const t=[0];return ug(t,e.length-1),t}function hg(e,t){return e.map(n=>n*t)}function fg(e,t){return e.map(()=>t||tc).splice(0,e.length-1)}function $n({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const i=Ym(s)?s.map(nr):nr(s),r={done:!1,value:t[0]},o=hg(n&&n.length===t.length?n:dg(t),e),a=cg(o,t,{ease:Array.isArray(i)?i:fg(t,i)});return{calculatedDuration:e,next:l=>(r.value=a(l),r.done=l>=e,r)}}const or=2e4;function pg(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<or;)t+=n,s=e.next(t);return t>=or?1/0:t}const mg=e=>{const t=({timestamp:n})=>e(n);return{start:()=>V.update(t,!0),stop:()=>He(t),now:()=>se.isProcessing?se.timestamp:Be.now()}},gg={decay:er,inertia:er,tween:$n,keyframes:$n,spring:Ql},yg=e=>e/100;class Vi extends Yl{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:s,element:i,keyframes:r}=this.options,o=(i==null?void 0:i.KeyframeResolver)||ki,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(r,a,n,s,i),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=this.options,a=gg[n]||$n;let l,u;a!==$n&&typeof t[0]!="number"&&(l=We(yg,ac(t[0],t[1])),t=[0,100]);const c=a({...this.options,keyframes:t});r==="mirror"&&(u=a({...this.options,keyframes:[...t].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=pg(c));const{calculatedDuration:d}=c,p=d+i,f=p*(s+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:p,totalDuration:f}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:b}=this.options;return{done:!0,value:b[b.length-1]}}const{finalKeyframe:i,generator:r,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=s;if(this.startTime===null)return r.next(0);const{delay:p,repeat:f,repeatType:g,repeatDelay:v,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const C=this.currentTime-p*(this.speed>=0?1:-1),S=this.speed>=0?C<0:C>c;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let E=this.currentTime,A=r;if(f){const b=Math.min(this.currentTime,c)/d;let W=Math.floor(b),B=b%1;!B&&b>=1&&(B=1),B===1&&W--,W=Math.min(W,f+1),!!(W%2)&&(g==="reverse"?(B=1-B,v&&(B-=v/d)):g==="mirror"&&(A=o)),E=Ye(0,1,B)*d}const I=S?{done:!1,value:l[0]}:A.next(E);a&&(I.value=a(I.value));let{done:N}=I;!S&&u!==null&&(N=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return k&&i!==void 0&&(I.value=Qn(l,this.options,i)),x&&x(I.value),k&&this.finish(),I}get duration(){const{resolved:t}=this;return t?Me(t.calculatedDuration):0}get time(){return Me(this.currentTime)}set time(t){t=Fe(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Me(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=mg,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const lc=e=>Array.isArray(e)&&typeof e[0]=="number";function cc(e){return!!(!e||typeof e=="string"&&e in Hi||lc(e)||Array.isArray(e)&&e.every(cc))}const Rt=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,Hi={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Rt([0,.65,.55,1]),circOut:Rt([.55,0,1,.45]),backIn:Rt([.31,.01,.66,-.59]),backOut:Rt([.33,1.53,.69,.99])};function vg(e){return uc(e)||Hi.easeOut}function uc(e){if(e)return lc(e)?Rt(e):Array.isArray(e)?e.map(vg):Hi[e]}function xg(e,t,n,{delay:s=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:a,times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=uc(a);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:s,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}const Cg=ql(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Dn=10,Sg=2e4;function Ag(e){return e.type==="spring"||!cc(e.ease)}function Eg(e,t){const n=new Vi({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const i=[];let r=0;for(;!s.done&&r<Sg;)s=n.sample(r),i.push(s.value),r+=Dn;return{times:void 0,keyframes:i,duration:r-Dn,ease:"linear"}}class rr extends Yl{constructor(t){super(t);const{name:n,motionValue:s,element:i,keyframes:r}=this.options;this.resolver=new Xl(r,(o,a)=>this.onKeyframesResolved(o,a),n,s,i),this.resolver.scheduleResolve()}initPlayback(t,n){var s;let{duration:i=300,times:r,ease:o,type:a,motionValue:l,name:u,startTime:c}=this.options;if(!(!((s=l.owner)===null||s===void 0)&&s.current))return!1;if(Ag(this.options)){const{onComplete:p,onUpdate:f,motionValue:g,element:v,...x}=this.options,C=Eg(t,x);t=C.keyframes,t.length===1&&(t[1]=t[0]),i=C.duration,r=C.times,o=C.ease,a="keyframes"}const d=xg(l.owner.current,u,t,{...this.options,duration:i,times:r,ease:o});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(d.timeline=this.pendingTimeline,this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:p}=this.options;l.set(Qn(t,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:r,type:a,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Me(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Me(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=Fe(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return ue;const{animation:s}=n;s.timeline=t,s.onfinish=null}return ue}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:i,type:r,ease:o,times:a}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:p,...f}=this.options,g=new Vi({...f,keyframes:s,duration:i,type:r,ease:o,times:a,isGenerator:!0}),v=Fe(this.time);u.setWithVelocity(g.sample(v-Dn).value,g.sample(v).value,Dn)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:i,repeatType:r,damping:o,type:a}=t;return Cg()&&s&&bl.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&r!=="mirror"&&o!==0&&a!=="inertia"}}function wg(e,t){let n;const s=()=>{const{currentTime:i}=t,o=(i===null?0:i.value)/100;n!==o&&e(o),n=o};return V.update(s,!0),()=>He(s)}const Tg=ql(()=>window.ScrollTimeline!==void 0);class bg{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t){const n=this.animations.map(s=>{if(Tg()&&s.attachTimeline)s.attachTimeline(t);else return s.pause(),wg(i=>{s.time=s.duration*i},t)});return()=>{n.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const Gi=(e,t,n,s={},i,r,o)=>a=>{const l=Ni(s,e)||{},u=l.delay||s.delay||0;let{elapsed:c=0}=s;c=c-Fe(u);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-c,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{a(),l.onComplete&&l.onComplete(),o&&o()},onStop:o,name:e,motionValue:t,element:r?void 0:i};om(l)||(d={...d,...im(e,d)}),d.duration&&(d.duration=Fe(d.duration)),d.repeatDelay&&(d.repeatDelay=Fe(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(p=!0)),p&&!r&&t.get()!==void 0){const f=Qn(d.keyframes,l);if(f!==void 0)return V.update(()=>{d.onUpdate(f),d.onComplete()}),new bg([])}return!r&&rr.supports(d)?new rr(d):new Vi(d)};class Ki{constructor(){this.subscriptions=[]}add(t){return qn(this.subscriptions,t),()=>Yn(this.subscriptions,t)}notify(t,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,s);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ar=30,Ig=e=>!isNaN(parseFloat(e));class dc{constructor(t,n={}){this.version="11.3.28",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{const r=Be.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Be.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Ig(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Ki);const s=this.events[t].add(n);return t==="change"?()=>{s(),V.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Be.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>ar)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ar);return Jl(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zt(e,t){return new dc(e,t)}function _g(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,zt(n))}function Pg(e,t){const n=Zn(e,t);let{transitionEnd:s={},transition:i={},...r}=n||{};r={...r,...s};for(const o in r){const a=Dp(r[o]);_g(e,o,a)}}function hc(e){return e.getProps()[ul]}class Lg extends dc{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(t){const n=Il(t);if(!n)return;const s=this.counts.get(n)||0;this.counts.set(n,s+1),s===0&&(this.output.push(n),this.update());let i=!1;return()=>{if(i)return;i=!0;const r=this.counts.get(n)-1;this.counts.set(n,r),r===0&&(Yn(this.output,n),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function Rg(e){return!!(ce(e)&&e.add)}function Ys(e,t){var n;if(!e.applyWillChange)return;let s=e.getValue("willChange");if(!s&&!(!((n=e.props.style)===null||n===void 0)&&n.willChange)&&(s=new Lg("auto"),e.addValue("willChange",s)),Rg(s))return s.add(t)}function Og({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function fc(e,t,{delay:n=0,transitionOverride:s,type:i}={}){var r;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=t;s&&(o=s);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const p=e.getValue(d,(r=e.latestValues[d])!==null&&r!==void 0?r:null),f=l[d];if(f===void 0||c&&Og(c,d))continue;const g={delay:n,...Ni(o||{},d)};let v=!1;if(window.MotionHandoffAnimation){const C=hc(e);if(C){const S=window.MotionHandoffAnimation(C,d,V);S!==null&&(g.startTime=S,v=!0)}}p.start(Gi(d,p,f,e.shouldReduceMotion&&Ze.has(d)?{type:!1}:g,e,v,Ys(e,d)));const x=p.animation;x&&u.push(x)}return a&&Promise.all(u).then(()=>{V.update(()=>{a&&Pg(e,a)})}),u}function Js(e,t,n={}){var s;const i=Zn(e,t,n.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:r=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(fc(e,i,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:p}=r;return $g(e,t,c+u,d,p,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[u,c]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>c())}else return Promise.all([o(),a(n.delay)])}function $g(e,t,n=0,s=0,i=1,r){const o=[],a=(e.variantChildren.size-1)*s,l=i===1?(u=0)=>u*s:(u=0)=>a-u*s;return Array.from(e.variantChildren).sort(Dg).forEach((u,c)=>{u.notify("AnimationStart",t),o.push(Js(u,t,{...r,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Dg(e,t){return e.sortNodePosition(t)}function jg(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(r=>Js(e,r,n));s=Promise.all(i)}else if(typeof t=="string")s=Js(e,t,n);else{const i=typeof t=="function"?Zn(e,t,n.custom):t;s=Promise.all(fc(e,i,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}const Ng=[...Ai].reverse(),kg=Ai.length;function Ug(e){return t=>Promise.all(t.map(({animation:n,options:s})=>jg(e,n,s)))}function Wg(e){let t=Ug(e),n=lr(),s=!0;const i=l=>(u,c)=>{var d;const p=Zn(e,c,l==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(p){const{transition:f,transitionEnd:g,...v}=p;u={...u,...v,...g}}return u};function r(l){t=l(e)}function o(l){const u=e.getProps(),c=e.getVariantContext(!0)||{},d=[],p=new Set;let f={},g=1/0;for(let x=0;x<kg;x++){const C=Ng[x],S=n[C],E=u[C]!==void 0?u[C]:c[C],A=Vt(E),I=C===l?S.isActive:null;I===!1&&(g=x);let N=E===c[C]&&E!==u[C]&&A;if(N&&s&&e.manuallyAnimateOnMount&&(N=!1),S.protectedKeys={...f},!S.isActive&&I===null||!E&&!S.prevProp||Ht(E)||typeof E=="boolean")continue;let b=Fg(S.prevProp,E)||C===l&&S.isActive&&!N&&A||x>g&&A,W=!1;const B=Array.isArray(E)?E:[E];let re=B.reduce(i(C),{});I===!1&&(re={});const{prevResolvedValues:K={}}=S,de={...K,...re},ye=O=>{b=!0,p.has(O)&&(W=!0,p.delete(O)),S.needsAnimating[O]=!0;const H=e.getValue(O);H&&(H.liveStyle=!1)};for(const O in de){const H=re[O],P=K[O];if(f.hasOwnProperty(O))continue;let L=!1;Bs(H)&&Bs(P)?L=!Dl(H,P):L=H!==P,L?H!=null?ye(O):p.add(O):H!==void 0&&p.has(O)?ye(O):S.protectedKeys[O]=!0}S.prevProp=E,S.prevResolvedValues=re,S.isActive&&(f={...f,...re}),s&&e.blockInitialAnimation&&(b=!1),b&&(!N||W)&&d.push(...B.map(O=>({animation:O,options:{type:C}})))}if(p.size){const x={};p.forEach(C=>{const S=e.getBaseTarget(C),E=e.getValue(C);E&&(E.liveStyle=!0),x[C]=S??null}),d.push({animation:x})}let v=!!d.length;return s&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),s=!1,v?t(d):Promise.resolve()}function a(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=e.variantChildren)===null||c===void 0||c.forEach(p=>{var f;return(f=p.animationState)===null||f===void 0?void 0:f.setActive(l,u)}),n[l].isActive=u;const d=o(l);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>n,reset:()=>{n=lr(),s=!0}}}function Fg(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Dl(t,e):!1}function et(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lr(){return{animate:et(!0),whileInView:et(),whileHover:et(),whileTap:et(),whileDrag:et(),whileFocus:et(),exit:et()}}class Mg extends Qe{constructor(t){super(t),t.animationState||(t.animationState=Wg(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ht(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let Bg=0;class Vg extends Qe{constructor(){super(...arguments),this.id=Bg++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Hg={animation:{Feature:Mg},exit:{Feature:Vg}},cr=(e,t)=>Math.abs(e-t);function Gg(e,t){const n=cr(e.x,t.x),s=cr(e.y,t.y);return Math.sqrt(n**2+s**2)}class pc{constructor(t,n,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=_s(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,f=Gg(d.offset,{x:0,y:0})>=3;if(!p&&!f)return;const{point:g}=d,{timestamp:v}=se;this.history.push({...g,timestamp:v});const{onStart:x,onMove:C}=this.handlers;p||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Is(p,this.transformPagePoint),V.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:f,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=_s(d.type==="pointercancel"?this.lastMoveEventInfo:Is(p,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,x),g&&g(d,x)},!Pl(t))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=s,this.contextWindow=i||window;const o=Jn(t),a=Is(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=se;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,_s(a,this.history)),this.removeListeners=We(Ue(this.contextWindow,"pointermove",this.handlePointerMove),Ue(this.contextWindow,"pointerup",this.handlePointerUp),Ue(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),He(this.updatePoint)}}function Is(e,t){return t?{point:t(e.point)}:e}function ur(e,t){return{x:e.x-t.x,y:e.y-t.y}}function _s({point:e},t){return{point:e,delta:ur(e,mc(t)),offset:ur(e,Kg(t)),velocity:zg(t,.1)}}function Kg(e){return e[0]}function mc(e){return e[e.length-1]}function zg(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const i=mc(e);for(;n>=0&&(s=e[n],!(i.timestamp-s.timestamp>Fe(t)));)n--;if(!s)return{x:0,y:0};const r=Me(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const gc=1e-4,Xg=1-gc,qg=1+gc,yc=.01,Yg=0-yc,Jg=0+yc;function Se(e){return e.max-e.min}function Zg(e,t,n){return Math.abs(e-t)<=n}function dr(e,t,n,s=.5){e.origin=s,e.originPoint=Y(t.min,t.max,e.origin),e.scale=Se(n)/Se(t),e.translate=Y(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Xg&&e.scale<=qg||isNaN(e.scale))&&(e.scale=1),(e.translate>=Yg&&e.translate<=Jg||isNaN(e.translate))&&(e.translate=0)}function Nt(e,t,n,s){dr(e.x,t.x,n.x,s?s.originX:void 0),dr(e.y,t.y,n.y,s?s.originY:void 0)}function hr(e,t,n){e.min=n.min+t.min,e.max=e.min+Se(t)}function Qg(e,t,n){hr(e.x,t.x,n.x),hr(e.y,t.y,n.y)}function fr(e,t,n){e.min=t.min-n.min,e.max=e.min+Se(t)}function kt(e,t,n){fr(e.x,t.x,n.x),fr(e.y,t.y,n.y)}function ey(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Y(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Y(n,e,s.max):Math.min(e,n)),e}function pr(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function ty(e,{top:t,left:n,bottom:s,right:i}){return{x:pr(e.x,n,i),y:pr(e.y,t,s)}}function mr(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function ny(e,t){return{x:mr(e.x,t.x),y:mr(e.y,t.y)}}function sy(e,t){let n=.5;const s=Se(e),i=Se(t);return i>s?n=Kt(t.min,t.max-s,e.min):s>i&&(n=Kt(e.min,e.max-i,t.min)),Ye(0,1,n)}function iy(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Zs=.35;function oy(e=Zs){return e===!1?e=0:e===!0&&(e=Zs),{x:gr(e,"left","right"),y:gr(e,"top","bottom")}}function gr(e,t,n){return{min:yr(e,t),max:yr(e,n)}}function yr(e,t){return typeof e=="number"?e:e[t]||0}const vr=()=>({translate:0,scale:1,origin:0,originPoint:0}),mt=()=>({x:vr(),y:vr()}),xr=()=>({min:0,max:0}),J=()=>({x:xr(),y:xr()});function we(e){return[e("x"),e("y")]}function vc({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function ry({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function ay(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Ps(e){return e===void 0||e===1}function Qs({scale:e,scaleX:t,scaleY:n}){return!Ps(e)||!Ps(t)||!Ps(n)}function tt(e){return Qs(e)||xc(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function xc(e){return Cr(e.x)||Cr(e.y)}function Cr(e){return e&&e!=="0%"}function jn(e,t,n){const s=e-n,i=t*s;return n+i}function Sr(e,t,n,s,i){return i!==void 0&&(e=jn(e,i,s)),jn(e,n,s)+t}function ei(e,t=0,n=1,s,i){e.min=Sr(e.min,t,n,s,i),e.max=Sr(e.max,t,n,s,i)}function Cc(e,{x:t,y:n}){ei(e.x,t.translate,t.scale,t.originPoint),ei(e.y,n.translate,n.scale,n.originPoint)}const Ar=.999999999999,Er=1.0000000000001;function ly(e,t,n,s=!1){const i=n.length;if(!i)return;t.x=t.y=1;let r,o;for(let a=0;a<i;a++){r=n[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&yt(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Cc(e,o)),s&&tt(r.latestValues)&&yt(e,r.latestValues))}t.x<Er&&t.x>Ar&&(t.x=1),t.y<Er&&t.y>Ar&&(t.y=1)}function gt(e,t){e.min=e.min+t,e.max=e.max+t}function wr(e,t,n,s,i=.5){const r=Y(e.min,e.max,i);ei(e,t,n,r,s)}function yt(e,t){wr(e.x,t.x,t.scaleX,t.scale,t.originX),wr(e.y,t.y,t.scaleY,t.scale,t.originY)}function Sc(e,t){return vc(ay(e.getBoundingClientRect(),t))}function cy(e,t,n){const s=Sc(e,n),{scroll:i}=t;return i&&(gt(s.x,i.offset.x),gt(s.y,i.offset.y)),s}const Ac=({current:e})=>e?e.ownerDocument.defaultView:null,uy=new WeakMap;class dy{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=J(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Jn(c,"page").point)},r=(c,d)=>{var p;const{drag:f,dragPropagation:g,onDragStart:v}=this.getProps();if(f&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Rl(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),we(C=>{let S=this.getAxisMotionValue(C).get()||0;if(Oe.test(S)){const{projection:E}=this.visualElement;if(E&&E.layout){const A=E.layout.layoutBox[C];A&&(S=Se(A)*(parseFloat(S)/100))}}this.originPoint[C]=S}),v&&V.postRender(()=>v(c,d)),(p=this.removeWillChange)===null||p===void 0||p.call(this),this.removeWillChange=Ys(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(c,d)=>{const{dragPropagation:p,dragDirectionLock:f,onDirectionLock:g,onDrag:v}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:x}=d;if(f&&this.currentDirection===null){this.currentDirection=hy(x),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),v&&v(c,d)},a=(c,d)=>this.stop(c,d),l=()=>we(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new pc(t,{onSessionStart:i,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Ac(this.visualElement)})}stop(t,n){var s;(s=this.removeWillChange)===null||s===void 0||s.call(this);const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&V.postRender(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:i}=this.getProps();if(!s||!pn(t,i,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=ey(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,r=this.constraints;n&&ft(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=ty(i.layoutBox,n):this.constraints=!1,this.elastic=oy(s),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&we(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=iy(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ft(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=cy(s,i.root,this.visualElement.getTransformPagePoint());let o=ny(i.layout.layoutBox,r);if(n){const a=n(ry(o));this.hasMutatedConstraints=!!a,a&&(o=vc(a))}return o}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=we(c=>{if(!pn(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const p=i?200:1e6,f=i?40:1e7,g={type:"inertia",velocity:s?t[c]:0,bounceStiffness:p,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return s.start(Gi(t,s,0,n,this.visualElement,!1,Ys(this.visualElement,t)))}stopAnimation(){we(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){we(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){we(n=>{const{drag:s}=this.getProps();if(!pn(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];r.set(t[n]-Y(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!ft(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};we(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=sy({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),we(o=>{if(!pn(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Y(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;uy.set(this.visualElement,this);const t=this.visualElement.current,n=Ue(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),s=()=>{const{dragConstraints:l}=this.getProps();ft(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),V.read(s);const o=ke(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(we(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=Zs,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function pn(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function hy(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class fy extends Qe{constructor(t){super(t),this.removeGroupControls=ue,this.removeListeners=ue,this.controls=new dy(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ue}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tr=e=>(t,n)=>{e&&V.postRender(()=>e(t,n))};class py extends Qe{constructor(){super(...arguments),this.removePointerDownListener=ue}onPointerDown(t){this.session=new pc(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ac(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:Tr(t),onStart:Tr(n),onMove:s,onEnd:(r,o)=>{delete this.session,i&&V.postRender(()=>i(r,o))}}}mount(){this.removePointerDownListener=Ue(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function my(){const e=m.useContext(Kn);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,i=m.useId();m.useEffect(()=>s(i),[]);const r=m.useCallback(()=>n&&n(i),[i,n]);return!t&&n?[!1,r]:[!0]}const wn={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function br(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const It={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(D.test(e))e=parseFloat(e);else return e;const n=br(e,t.target.x),s=br(e,t.target.y);return`${n}% ${s}%`}},gy={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,i=Je.parse(e);if(i.length>5)return s;const r=Je.createTransformer(e),o=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+o]/=a,i[1+o]/=l;const u=Y(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),r(i)}};class yy extends m.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=t;up(vy),r&&(n.group&&n.group.add(r),s&&s.register&&i&&s.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),wn.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:i,isPresent:r}=this.props,o=s.projection;return o&&(o.isPresent=r,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||V.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Si.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ec(e){const[t,n]=my(),s=m.useContext(wi);return h.jsx(yy,{...e,layoutGroup:s,switchLayoutGroup:m.useContext(hl),isPresent:t,safeToRemove:n})}const vy={borderRadius:{...It,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:It,borderTopRightRadius:It,borderBottomLeftRadius:It,borderBottomRightRadius:It,boxShadow:gy},wc=["TopLeft","TopRight","BottomLeft","BottomRight"],xy=wc.length,Ir=e=>typeof e=="string"?parseFloat(e):e,_r=e=>typeof e=="number"||D.test(e);function Cy(e,t,n,s,i,r){i?(e.opacity=Y(0,n.opacity!==void 0?n.opacity:1,Sy(s)),e.opacityExit=Y(t.opacity!==void 0?t.opacity:1,0,Ay(s))):r&&(e.opacity=Y(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let o=0;o<xy;o++){const a=`border${wc[o]}Radius`;let l=Pr(t,a),u=Pr(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||_r(l)===_r(u)?(e[a]=Math.max(Y(Ir(l),Ir(u),s),0),(Oe.test(u)||Oe.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=Y(t.rotate||0,n.rotate||0,s))}function Pr(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Sy=Tc(0,.5,ic),Ay=Tc(.5,.95,ue);function Tc(e,t,n){return s=>s<e?0:s>t?1:n(Kt(e,t,s))}function Lr(e,t){e.min=t.min,e.max=t.max}function Ee(e,t){Lr(e.x,t.x),Lr(e.y,t.y)}function Rr(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Or(e,t,n,s,i){return e-=t,e=jn(e,1/n,s),i!==void 0&&(e=jn(e,1/i,s)),e}function Ey(e,t=0,n=1,s=.5,i,r=e,o=e){if(Oe.test(t)&&(t=parseFloat(t),t=Y(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Y(r.min,r.max,s);e===r&&(a-=t),e.min=Or(e.min,t,n,a,i),e.max=Or(e.max,t,n,a,i)}function $r(e,t,[n,s,i],r,o){Ey(e,t[n],t[s],t[i],t.scale,r,o)}const wy=["x","scaleX","originX"],Ty=["y","scaleY","originY"];function Dr(e,t,n,s){$r(e.x,t,wy,n?n.x:void 0,s?s.x:void 0),$r(e.y,t,Ty,n?n.y:void 0,s?s.y:void 0)}function jr(e){return e.translate===0&&e.scale===1}function bc(e){return jr(e.x)&&jr(e.y)}function Nr(e,t){return e.min===t.min&&e.max===t.max}function by(e,t){return Nr(e.x,t.x)&&Nr(e.y,t.y)}function kr(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Ic(e,t){return kr(e.x,t.x)&&kr(e.y,t.y)}function Ur(e){return Se(e.x)/Se(e.y)}function Wr(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Iy{constructor(){this.members=[]}add(t){qn(this.members,t),t.scheduleRender()}remove(t){if(Yn(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _y(e,t,n){let s="";const i=e.x.translate/t.x,r=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||r||o)&&(s=`translate3d(${i}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:p,skewX:f,skewY:g}=n;u&&(s=`perspective(${u}px) ${s}`),c&&(s+=`rotate(${c}deg) `),d&&(s+=`rotateX(${d}deg) `),p&&(s+=`rotateY(${p}deg) `),f&&(s+=`skewX(${f}deg) `),g&&(s+=`skewY(${g}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(s+=`scale(${a}, ${l})`),s||"none"}const Py=(e,t)=>e.depth-t.depth;class Ly{constructor(){this.children=[],this.isDirty=!1}add(t){qn(this.children,t),this.isDirty=!0}remove(t){Yn(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Py),this.isDirty=!1,this.children.forEach(t)}}function Ry(e,t){const n=Be.now(),s=({timestamp:i})=>{const r=i-n;r>=t&&(He(s),e(r-t))};return V.read(s,!0),()=>He(s)}function Oy(e){return e instanceof SVGElement&&e.tagName!=="svg"}function $y(e,t,n){const s=ce(e)?e:zt(e);return s.start(Gi("",s,t,n)),s.animation}const nt={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ot=typeof window<"u"&&window.MotionDebug!==void 0,Ls=["","X","Y","Z"],Dy={visibility:"hidden"},Fr=1e3;let jy=0;function Rs(e,t,n,s){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),s&&(s[e]=0))}function _c(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return!1;const{visualElement:t}=e.options;return t?window.MotionHasOptimisedTransformAnimation(hc(t))?!0:e.parent&&!e.parent.hasCheckedOptimisedAppear?_c(e.parent):!1:!1}function Pc({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},a=t==null?void 0:t()){this.id=jy++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ot&&(nt.totalNodes=nt.resolvedTargetDeltas=nt.recalculatedProjection=0),this.nodes.forEach(Uy),this.nodes.forEach(Vy),this.nodes.forEach(Hy),this.nodes.forEach(Wy),Ot&&window.MotionDebug.record(nt)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ly)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ki),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Oy(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),e){let d;const p=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Ry(p,250),wn.hasAnimatedSinceResize&&(wn.hasAnimatedSinceResize=!1,this.nodes.forEach(Br))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||qy,{onLayoutAnimationStart:x,onLayoutAnimationComplete:C}=c.getProps(),S=!this.targetLayout||!Ic(this.targetLayout,g)||f,E=!p&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,E);const A={...Ni(v,"layout"),onPlay:x,onComplete:C};(c.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else p||Br(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,He(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Gy),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionHandoffCancelAll&&_c(this)&&window.MotionHandoffCancelAll(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Mr);return}this.isUpdating||this.nodes.forEach(My),this.isUpdating=!1,this.nodes.forEach(By),this.nodes.forEach(Ny),this.nodes.forEach(ky),this.clearAllSnapshots();const a=Be.now();se.delta=Ye(0,1e3/60,a-se.timestamp),se.timestamp=a,se.isProcessing=!0,Cs.update.process(se),Cs.preRender.process(se),Cs.render.process(se),se.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Si.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Fy),this.sharedNodes.forEach(Ky)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,V.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){V.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=J(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!bc(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||tt(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Yy(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return J();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Jy))){const{scroll:c}=this.root;c&&(gt(l.x,c.offset.x),gt(l.y,c.offset.y))}return l}removeElementScroll(o){var a;const l=J();if(Ee(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:p}=c;c!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&Ee(l,o),gt(l.x,d.offset.x),gt(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=J();Ee(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&yt(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),tt(c.latestValues)&&yt(l,c.latestValues)}return tt(this.latestValues)&&yt(l,this.latestValues),l}removeTransform(o){const a=J();Ee(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!tt(u.latestValues))continue;Qs(u.latestValues)&&u.updateSnapshot();const c=J(),d=u.measurePageBox();Ee(c,d),Dr(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return tt(this.latestValues)&&Dr(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==se.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=se.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=J(),this.relativeTargetOrigin=J(),kt(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Ee(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=J(),this.targetWithTransforms=J()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qg(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ee(this.target,this.layout.layoutBox),Cc(this.target,this.targetDelta)):Ee(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=J(),this.relativeTargetOrigin=J(),kt(this.relativeTargetOrigin,this.target,f.target),Ee(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ot&&nt.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Qs(this.parent.latestValues)||xc(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===se.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Ee(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,f=this.treeScale.y;ly(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=J());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Rr(this.prevProjectionDelta.x,this.projectionDelta.x),Rr(this.prevProjectionDelta.y,this.projectionDelta.y)),Nt(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==f||!Wr(this.projectionDelta.x,this.prevProjectionDelta.x)||!Wr(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Ot&&nt.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mt(),this.projectionDelta=mt(),this.projectionDeltaWithTransform=mt()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=mt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=J(),f=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=f!==g,x=this.getStack(),C=!x||x.members.length<=1,S=!!(v&&!C&&this.options.crossfade===!0&&!this.path.some(Xy));this.animationProgress=0;let E;this.mixTargetDelta=A=>{const I=A/1e3;Vr(d.x,o.x,I),Vr(d.y,o.y,I),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kt(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zy(this.relativeTarget,this.relativeTargetOrigin,p,I),E&&by(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=J()),Ee(E,this.relativeTarget)),v&&(this.animationValues=c,Cy(c,u,this.latestValues,I,S,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(He(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=V.update(()=>{wn.hasAnimatedSinceResize=!0,this.currentAnimation=$y(0,Fr,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Fr),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&Lc(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||J();const d=Se(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=Se(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Ee(a,l),yt(a,c),Nt(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Iy),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Rs("z",o,u,this.animationValues);for(let c=0;c<Ls.length;c++)Rs(`rotate${Ls[c]}`,o,u,this.animationValues),Rs(`skew${Ls[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Dy;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=An(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=An(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!tt(this.latestValues)&&(v.transform=c?c({},""):"none",this.hasProjected=!1),v}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=_y(this.projectionDeltaWithTransform,this.treeScale,p),c&&(u.transform=c(p,u.transform));const{x:f,y:g}=this.projectionDelta;u.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const v in Ln){if(p[v]===void 0)continue;const{correct:x,applyTo:C}=Ln[v],S=u.transform==="none"?p[v]:x(p[v],d);if(C){const E=C.length;for(let A=0;A<E;A++)u[C[A]]=S}else u[v]=S}return this.options.layoutId&&(u.pointerEvents=d===this?An(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Mr),this.root.sharedNodes.clear()}}}function Ny(e){e.updateLayout()}function ky(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:r}=e.options,o=n.source!==e.layout.source;r==="size"?we(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],f=Se(p);p.min=s[d].min,p.max=p.min+f}):Lc(r,n.layoutBox,s)&&we(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],f=Se(s[d]);p.max=p.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+f)});const a=mt();Nt(a,s,n.layoutBox);const l=mt();o?Nt(l,e.applyTransform(i,!0),n.measuredBox):Nt(l,s,n.layoutBox);const u=!bc(a);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:f}=d;if(p&&f){const g=J();kt(g,n.layoutBox,p.layoutBox);const v=J();kt(v,s,f.layoutBox),Ic(g,v)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function Uy(e){Ot&&nt.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Wy(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Fy(e){e.clearSnapshot()}function Mr(e){e.clearMeasurements()}function My(e){e.isLayoutDirty=!1}function By(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Br(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Vy(e){e.resolveTargetDelta()}function Hy(e){e.calcProjection()}function Gy(e){e.resetSkewAndRotation()}function Ky(e){e.removeLeadSnapshot()}function Vr(e,t,n){e.translate=Y(t.translate,0,n),e.scale=Y(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Hr(e,t,n,s){e.min=Y(t.min,n.min,s),e.max=Y(t.max,n.max,s)}function zy(e,t,n,s){Hr(e.x,t.x,n.x,s),Hr(e.y,t.y,n.y,s)}function Xy(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const qy={duration:.45,ease:[.4,0,.1,1]},Gr=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Kr=Gr("applewebkit/")&&!Gr("chrome/")?Math.round:ue;function zr(e){e.min=Kr(e.min),e.max=Kr(e.max)}function Yy(e){zr(e.x),zr(e.y)}function Lc(e,t,n){return e==="position"||e==="preserve-aspect"&&!Zg(Ur(t),Ur(n),.2)}function Jy(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const Zy=Pc({attachResizeListener:(e,t)=>ke(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Os={current:void 0},Rc=Pc({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Os.current){const e=new Zy({});e.mount(window),e.setOptions({layoutScroll:!0}),Os.current=e}return Os.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Qy={pan:{Feature:py},drag:{Feature:fy,ProjectionNode:Rc,MeasureLayout:Ec}},ti={current:null},Oc={current:!1};function ev(){if(Oc.current=!0,!!Ci)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ti.current=e.matches;e.addListener(t),t()}else ti.current=!1}function tv(e,t,n){for(const s in t){const i=t[s],r=n[s];if(ce(i))e.addValue(s,i);else if(ce(r))e.addValue(s,zt(i,{owner:e}));else if(r!==i)if(e.hasValue(s)){const o=e.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(s);e.addValue(s,zt(o!==void 0?o:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const Xr=new WeakMap,nv=[...Wl,le,Je],sv=e=>nv.find(Ul(e)),qr=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],iv=Ei.length;class ov{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},a={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ki,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,V.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=Xn(n),this.isVariantNode=pl(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in d){const f=d[p];l[p]!==void 0&&ce(f)&&f.set(l[p],!1)}}mount(t){this.current=t,Xr.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),Oc.current||ev(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ti.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Xr.delete(this.current),this.projection&&this.projection.unmount(),He(this.notifyUpdate),He(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){const s=Ze.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&V.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),r(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in vt){const n=vt[t];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[t]&&i&&s(this.props)&&(this.features[t]=new i(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):J()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<qr.length;s++){const i=qr[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,o=t[r];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=tv(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const n={};for(let s=0;s<iv;s++){const i=Ei[s],r=this.props[i];(Vt(r)||r===!1)&&(n[i]=r)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=zt(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var s;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Nl(i)||jl(i))?i=parseFloat(i):!sv(i)&&Je.test(n)&&(i=zl(t,n)),this.setBaseTarget(t,ce(i)?i.get():i)),ce(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const o=Di(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[t])}if(s&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!ce(r)?r:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Ki),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class $c extends ov{constructor(){super(...arguments),this.KeyframeResolver=Xl}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}}function rv(e){return window.getComputedStyle(e)}class av extends $c{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=Al}readValueFromInstance(t,n){if(Ze.has(n)){const s=Wi(n);return s&&s.default||0}else{const s=rv(t),i=(vl(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Sc(t,n)}build(t,n,s){Pi(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return $i(t,n,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ce(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class lv extends $c{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=J}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ze.has(n)){const s=Wi(n);return s&&s.default||0}return n=El.has(n)?n:zn(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return Tl(t,n,s)}build(t,n,s){Ri(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,i){wl(t,n,s,i)}mount(t){this.isSVGTag=Oi(t.tagName),super.mount(t)}}const cv=(e,t)=>Ti(e)?new lv(t):new av(t,{allowProjection:e!==m.Fragment}),uv={layout:{ProjectionNode:Rc,MeasureLayout:Ec}},dv={...Hg,...Qp,...Qy,...uv},zi=lp((e,t)=>Fp(e,t,dv,cv));class hv extends m.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function fv({children:e,isPresent:t}){const n=m.useId(),s=m.useRef(null),i=m.useRef({width:0,height:0,top:0,left:0}),{nonce:r}=m.useContext(xi);return m.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=i.current;if(t||!s.current||!o||!a)return;s.current.dataset.motionPopId=n;const c=document.createElement("style");return r&&(c.nonce=r),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),h.jsx(hv,{isPresent:t,childRef:s,sizeRef:i,children:m.cloneElement(e,{ref:s})})}const pv=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:r,mode:o})=>{const a=ji(mv),l=m.useId(),u=m.useMemo(()=>({id:l,initial:t,isPresent:n,custom:i,onExitComplete:c=>{a.set(c,!0);for(const d of a.values())if(!d)return;s&&s()},register:c=>(a.set(c,!1),()=>a.delete(c))}),r?[Math.random()]:[n]);return m.useMemo(()=>{a.forEach((c,d)=>a.set(d,!1))},[n]),m.useEffect(()=>{!n&&!a.size&&s&&s()},[n]),o==="popLayout"&&(e=h.jsx(fv,{isPresent:n,children:e})),h.jsx(Kn.Provider,{value:u,children:e})};function mv(){return new Map}const mn=e=>e.key||"";function Yr(e){const t=[];return m.Children.forEach(e,n=>{m.isValidElement(n)&&t.push(n)}),t}const Dc=({children:e,exitBeforeEnter:t,custom:n,initial:s=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync"})=>{const a=m.useMemo(()=>Yr(e),[e]),l=a.map(mn),u=m.useRef(!0),c=m.useRef(a),d=ji(()=>new Map),[p,f]=m.useState(a),[g,v]=m.useState(a);ll(()=>{u.current=!1,c.current=a;for(let S=0;S<g.length;S++){const E=mn(g[S]);l.includes(E)?d.delete(E):d.get(E)!==!0&&d.set(E,!1)}},[g,l.length,l.join("-")]);const x=[];if(a!==p){let S=[...a];for(let E=0;E<g.length;E++){const A=g[E],I=mn(A);l.includes(I)||(S.splice(E,0,A),x.push(A))}o==="wait"&&x.length&&(S=x),v(Yr(S)),f(a);return}const{forceRender:C}=m.useContext(wi);return h.jsx(h.Fragment,{children:g.map(S=>{const E=mn(S),A=a===g||l.includes(E),I=()=>{if(d.has(E))d.set(E,!0);else return;let N=!0;d.forEach(k=>{k||(N=!1)}),N&&(C==null||C(),v(c.current),i&&i())};return h.jsx(pv,{isPresent:A,initial:!u.current||s?void 0:!1,custom:A?void 0:n,presenceAffectsLayout:r,mode:o,onExitComplete:A?void 0:I,children:S},E)})})},gv=()=>{const{title:e}=Gf(),t=w(s=>s.stepDirection),n=w(s=>s.step);return h.jsx(Dc,{mode:"popLayout",initial:!1,custom:t,children:h.jsx(yv,{custom:t,variants:Qa,initial:"enter",animate:"center",exit:"exit",transition:el,slot:"header",id:"header",children:h.jsx(Re,{weight:"semiBold",children:e})},n)})},yv=T(zi.div)`
  position: absolute;
  top: 16px;
  width: 100%;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  flex-wrap: wrap;
`;var vv=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Jr=3,jc=()=>{const{wallets:e,connectExternalWallet:t}=De(),n=w(f=>f.setSelectedExternalWalletId),s=w(f=>f.setStep),i=w(f=>f.step===y.EX_WALLET_MORE),[r,o]=m.useState(""),a=e.length>Jr,l=i||!a?r?e.filter(f=>f.name.toLowerCase().includes(r.toLowerCase())):e:e.slice(0,Jr),u=!i&&a,c=()=>{s(y.EX_WALLET_MORE)},d=()=>{s(y.AUTH_MORE)},p=f=>()=>{n(f.id),s(y.EX_WALLET_SELECTED),f.installed?t(f):f.isMobile&&t(f,!0)};return h.jsxs(xv,{$maxHeight:i,children:[i&&h.jsxs(h.Fragment,{children:[h.jsx(wv,{children:h.jsx(Tv,{placeholder:"Search for your wallet",onCpslInput:f=>vv(void 0,void 0,void 0,function*(){o(f.target.value)}),value:r,style:{width:"100%"},children:h.jsx(Ev,{slot:"start",icon:"search"})})}),h.jsx(G,{fullWidth:!0,variant:"tertiary",onClick:d,children:h.jsxs(Zr,{children:[h.jsxs(Qr,{children:[h.jsx(M,{slot:"start",icon:"capsule"}),h.jsx(j,{weight:"medium",children:"Capsule"})]}),h.jsx(ea,{$show:!0,$variant:"installed",children:h.jsx(j,{variant:"body2XS",weight:"medium",children:"Available"})})]})})]}),l.map(f=>i?h.jsx(G,{fullWidth:!0,variant:"tertiary",onClick:p(f),children:h.jsxs(Zr,{children:[h.jsxs(Qr,{children:[h.jsx(M,{slot:"start",src:f.iconUrl}),h.jsx(j,{weight:"medium",children:f.name})]}),h.jsx(ea,{$show:f.isMobile||f.installed,$variant:f.installed?"installed":"mobile",children:h.jsx(j,{variant:"body2XS",weight:"medium",children:f.installed?"Installed":"Mobile"})})]})},f.id):h.jsx(Cv,{src:f.iconUrl,onClick:p(f),children:h.jsxs(Av,{children:[f.installed&&h.jsx(Sv,{}),h.jsx(j,{variant:"bodyXS",color:"secondary",weight:"medium",children:f.name})]})},f.id)),u&&h.jsxs(G,{variant:"tertiary",fullWidth:!0,onClick:c,children:[h.jsx(M,{slot:"start",icon:"wallet"}),"More Wallets"]}),i&&h.jsx(bv,{})]})},xv=T.div`
  position: relative;
  display: flex;
  justify-content: center;
  gap: 8px;
  flex-wrap: wrap;

  max-height: ${({$maxHeight:e})=>e?"348px":"none"};
  overflow-y: auto;

  &::-webkit-scrollbar {
    display: none;
  }
  -ms-overflow-style: none;
  scrollbar-width: none;
`,Cv=T(Bn)`
  flex: 1;
`,Zr=T.div`
  width: 100%;
  display: flex;
  align-items: center;
  gap: 8px;
  justify-content: space-between;
`,Qr=T.div`
  display: flex;
  align-items: center;
  gap: 8px;

  cpsl-icon {
    --icon-color: var(--cpsl-color-contrast);
  }
  cpsl-text {
    color: var(--cpsl-color-contrast);
  }
`,ea=T.div`
  visibility: ${({$show:e})=>e?"visible":"hidden"};
  padding: 2px 4px;
  border-radius: 4px;
  border: 1px solid;
  border-color: ${({$variant:e})=>e==="installed"?"var(--cpsl-color-utility-green)":"var(--cpsl-color-text-primary)"};
  cpsl-text {
    color: ${({$variant:e})=>e==="installed"?"var(--cpsl-color-utility-green)":"var(--cpsl-color-text-primary)"};
  }
`,Sv=T.span`
  width: 8px;
  height: 8px;
  border-radius: 100%;
  background-color: var(--cpsl-color-utility-green);
`,Av=T.div`
  display: flex;
  gap: 4px;
  align-items: center;
`,Ev=T(M)`
  --icon-color: var(--cpsl-color-contrast);
`,wv=T.div`
  width: 100%;
  background-color: var(--cpsl-color-background-0);

  position: sticky;
  top: 0;
  padding-bottom: 4px;
  margin-bottom: -4px;
`,Tv=T(ai)`
  width: 100%;
  --container-background-color: var(--cpsl-color-background-8);
  --input-background-color: var(--cpsl-color-background-8);
`,bv=T.div`
  position: sticky;
  height: 56px;
  width: 100%;
  bottom: 0;

  background: linear-gradient(0deg, var(--cpsl-color-background-0) 0%, rgba(234, 239, 211, 0) 100%);
  pointer-events: none;
`,Nc={GOOGLE:"googleBrand",TWITTER:"twitter",APPLE:"apple",DISCORD:"discordBrand",FACEBOOK:"facebookBrand",FARCASTER:"farcasterBrand"},kc={GOOGLE:"google",TWITTER:"twitter",APPLE:"apple",DISCORD:"discord",FACEBOOK:"facebook",FARCASTER:"farcaster"},Iv=(e,t)=>{if(t<2)return"1 1 auto";if(t%3===0)return`0 0 calc(33.333333% - ${5.336}px)`;if(t%3===1)return e<4?"0 0 calc(50% - 8px)":`0 0 calc(33.333333% - ${5.336}px)`;if(t%3===2)return e<2?"0 0 calc(50% - 8px)":`0 0 calc(33.333333% - ${5.336}px)`};var _v=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const _t=3,Pv=({methods:e})=>{const t=pe(S=>S.oAuthLogoVariant),n=pe(S=>S.isDark),s=Q(S=>S.capsule),i=w(S=>S.setFlow),r=w(S=>S.setStep),o=Z(S=>S.setIdentifier),a=Z(S=>S.setIdentifierType),l=w(S=>S.setWebAuthURLForLogin),u=w(S=>S.setWebAuthURLForCreate),c=w(S=>S.step===y.AUTH_MORE),d=e.length>_t,p=c||!d?e:e.slice(0,_t-1),f=()=>{r(y.AUTH_MORE)},g=S=>()=>_v(void 0,void 0,void 0,function*(){if(S===ru.FARCASTER){r(y.FARCASTER_OAUTH);return}r(y.AWAITING_OAUTH);const E=yield s.getOAuthURL(S);Pn(E,`${S}AuthPopup`,"OAUTH");const{email:A,userExists:I}=yield s.waitForOAuth();if(!A)throw r(y.AUTH_MAIN),new Error("email is required");if(o(A),a("email"),I){const N=yield s.initiateUserLogin(A);i("login"),l(N),r(y.BIOMETRIC_LOGIN)}else{const N=yield s.getSetUpBiometricsURL(!1);i("signUp"),u(N),r(y.BIOMETRIC_CREATION)}}),v=t==="default",x=v?n:t!=="dark",C=!c&&d;return h.jsxs(Lv,{children:[p.map((S,E)=>h.jsx(ta,{$isDark:x,icon:v?Nc[S]:kc[S],onClick:g(S),$index:E,$totalItems:C?_t:p.length},S)),C&&h.jsx(ta,{$isDark:x,icon:"moreLoginOptions",onClick:f,$index:_t-1,$totalItems:_t})]})},Lv=T.div`
  display: flex;
  justify-content: center;
  gap: 8px;
  flex-wrap: wrap;
`,ta=T(Bn)`
  flex: ${({$index:e,$totalItems:t})=>Iv(e,t)};

  --button-icon-color: ${({$isDark:e})=>e?"white":"black"};
`,Rv=["AC","CG","CI","CV","GF","GP","MF","NC","PM","RE","SD","SH","SJ","TA","VA","WF","XK","YT"],Ov=()=>au().filter(n=>!Rv.includes(n)).map(n=>{const s=lu(n);return{label:new Intl.DisplayNames(["en"],{type:"region"}).of(n),value:`+${s}`,selectedLabel:n,icon:n}}).sort((n,s)=>n.label.localeCompare(s.label)),gn=Ov(),Xi=e=>{const[t,n]=m.useState(),[s,i]=m.useState(),[r,o]=m.useState(),a=()=>{var l,u,c;const d=Math.max(window.innerHeight-((l=e==null?void 0:e.current)===null||l===void 0?void 0:l.getBoundingClientRect().bottom)-20,window.innerHeight*.25);n(d),i((u=e==null?void 0:e.current)===null||u===void 0?void 0:u.getBoundingClientRect().width),o((c=e==null?void 0:e.current)===null||c===void 0?void 0:c.getBoundingClientRect().height)};return e.current&&!t&&a(),m.useEffect(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[]),{dropdownMaxHeight:t,dropdownWidth:s,mobileAnchor:r,resize:a}},$v="#################",Dv={AF:"### ### ####",AX:"## ### ####",AL:"(###) ### ###",DZ:"(###) ### ###",AS:"(###) ###-####",AD:"### ###",AO:"(###) ### ###",AI:"(###) ###-####",AG:"(###) ###-####",AR:"(###) ###-####",AM:"## ### ###",AW:"### ####",AU:"# #### ####",AT:"(###) ### ####",AZ:"(###) ### ## ##",BS:"(###) ###-####",BH:"#### ####",BD:"# ### ###",BB:"(###) ###-####",BY:"(##) ###-##-##",BE:"(###) ### ###",BZ:"###-####",BJ:"##-##-####",BM:"(###) ###-####",BT:"# ### ###",BO:"# ### ####",BA:"## ###-###",BW:"## ### ###",BR:"(##) ####-####",IO:"### ####",BN:"### ####",BG:"(###) ### ###",BF:"## ## ####",BI:"## ## ####",KH:"## ### ###",CM:"#### ####",CA:"(###) ###-####",CV:"(###) ## ##",KY:"(###) ###-####",CF:"## ## ####",TD:"## ## ## ##",CL:"# #### ####",CN:"(###) #### ####",CX:"# ## ## ##",CC:"# ## ## ##",CO:"(###) ### ####",KM:"## ## ## ##",CG:"## ### ####",CK:"## ###",CR:"#### ####",HR:"## #### ###",CU:"# ### ####",CY:"## ### ###",CZ:"### ### ###",CD:"### ### ###",DK:"## ## ## ##",DJ:"## ## ## ##",DM:"(###) ###-####",DO:"(###) ###-####",EC:"## ### ####",EG:"# #### ####",SV:"#### ####",GQ:"## ### ####",ER:"# ### ###",EE:"#### ####",SZ:"#### ####",ET:"## ### ####",FK:"#####",FO:"######",FJ:"### ####",FI:"## ### ####",FR:"## ## ## ## ##",GF:"### ## ## ##",PF:"## ## ##",GA:"# ## ## ##",GM:"### ####",GE:"(###) ## ## ##",DE:"(###) ### ####",GH:"## ### ####",GI:"### #####",GR:"(###) ### ####",GL:"## ## ##",GD:"(###) ###-####",GP:"### ## ## ##",GU:"(###) ###-####",GT:"# ### ####",GG:"(####) ### ###",GN:"## ### ###",GW:"# #######",GY:"### ####",HT:"## ## ####",VA:"### ####",HN:"####-####",HK:"#### ####",HU:"(##) ### ####",IS:"### ####",IN:"####### ###",ID:"(###) ###-####",IR:"(###) ### ####",IQ:"(###) ### ####",IE:"(###) ### ###",IM:"(####) ### ###",IL:"#-###-####",IT:"(###) #### ###",CI:"## ## ## ##",JM:"(###) ###-####",JP:"(###) ###-####",JE:"(####) ### ###",JO:"# #### ####",KZ:"(###) ###-##-##",KE:"### ######",KI:"## ###",KP:"###-###-####",KR:"(###) ####-####",XK:"## ### ###",KW:"#### ####",KG:"(###) ###-###",LA:"## ## ####",LV:"## ### ###",LB:"## ### ###",LS:"# ### ####",LR:"## ### ###",LY:"##-#######",LI:"(###) ###-####",LT:"(###) ## ###",LU:"### ### ###",MO:"#### ####",MG:"## ## ### ##",MW:"# #### ####",MY:"(###) ###-###",MV:"###-####",ML:"## ## ####",MT:"#### ####",MH:"###-####",MQ:"### ## ## ##",MR:"## ## ####",MU:"### ####",YT:"### ## ## ##",MX:"(###) ###-####",FM:"### ####",MD:"#### ####",MC:"(###) ###-###",MN:"## ## ####",ME:"## ### ###",MS:"(###) ###-####",MA:"#-####-####",MZ:"## ### ####",MM:"# ### ####",NA:"## ### ####",NR:"### ####",NP:"#-######",NL:"## ### ####",NC:"##.##.##",NZ:"## ### ###",NI:"#### ####",NE:"## ## ## ##",NG:"## ### ####",NU:"####",NF:"### ###",MK:"## ### ###",MP:"(###) ###-####",NO:"### ## ###",OM:"#### ####",PK:"(###) #######",PW:"### ####",PS:"## ### ####",PA:"####-####",PG:"(###) ## ###",PY:"## ### ####",PE:"(###) ### ###",PH:"(###) ###-####",PN:"### ####",PL:"### ### ###",PT:"## ### ####",PR:"(###) ###-####",QA:"#### ####",RE:"##### ####",RO:"## ### ####",RU:"(###) ###-##-##",RW:"(###) ### ###",BL:"### ## ## ##",SH:"####",KN:"(###) ###-####",LC:"(###) ###-####",MF:"### ## ## ##",PM:"## ## ##",VC:"(###) ###-####",WS:"####",SM:"(####) ######",ST:"## ####",SA:"# ### ####",SN:"## ### ####",RS:"## ### ####",SC:"# ### ###",SL:"## ######",SG:"#### ####",SX:"(###) ###-####",SK:"(###) ### ###",SI:"## ### ###",SB:"### ####",SO:"# ### ###",ZA:"## ### ####",GS:"####",SS:"# ### ####",ES:"### ### ###",LK:"## ### ####",SD:"## ### ####",SR:"###-####",SJ:"### ## ###",SE:"## ### ####",CH:"## ### ####",SY:"## #### ###",TW:"#### ####",TJ:"## ### ####",TZ:"## ### ####",TH:"# #### ####",TL:"#### ####",TG:"## ## ## ##",TK:"####",TO:"####",TT:"(###) ###-####",TN:"## ### ###",TR:"(###) ### ####",TM:"# ### ###",TC:"(###) ###-####",TV:"####",UG:"## ### ####",UA:"## ### ####",AE:"# ### ####",GB:"#### ### ###",US:"(###) ###-####",UM:"(###) ###-####",UY:"# ### ## ##",UZ:"## ### ####",VU:"## ####",VE:"###-###-####",VN:"## #### ###",VG:"(###) ###-####",VI:"(###) ###-####",WF:"## ####",EH:"###-###-###",YE:"# ### ###",ZM:"## ### ####",ZW:"# #######"};var yn=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const jv={label:"United States",value:"+1",selectedLabel:"US",icon:"US"},Nv=({disableEmailLogin:e,disablePhoneLogin:t})=>{var n;const s=m.useRef(null),{dropdownMaxHeight:i,dropdownWidth:r}=Xi(s),o=Q(P=>P.capsule),a=Z(P=>P.setCountryCode),l=Z(P=>P.setIdentifier),u=Z(P=>P.identifier),c=Z(P=>P.identifierType),d=Z(P=>P.countryCode),p=Z(P=>P.setIdentifierType),f=w(P=>P.setFlow),g=w(P=>P.setStep),v=w(P=>P.setWebAuthURLForLogin),[x,C]=m.useState(jv),[S,E]=m.useState(!1),[A,I]=m.useState(""),[N,k]=m.useState(""),b=c==="email",W=c==="phone",B=!c,re=N?gn.filter(P=>P.selectedLabel.toLowerCase().includes(N.toLowerCase())||P.label.toLowerCase().includes(N.toLowerCase())||P.value.toLowerCase().includes(N.toLowerCase())):gn,K=P=>{k(P.detail)},de=P=>{const L=P.detail.value;if(!t){const me=gn.find(ve=>ve.value===L);if(me){a(me.value),C(me),p("phone"),l("");return}const je=!b&&W?/\d+$/.test(L):/\d\d\d+$/.test(L);p(je?"phone":void 0)}if(!e){const me=/\D.*$/.test(L);p(me?"email":void 0)}l(L)},ye=P=>{const L=gn.find(me=>me.selectedLabel===P.detail);a(L.value),C(L)},O=()=>yn(void 0,void 0,void 0,function*(){if(I(""),B){I("Please enter a valid email or phone number!");return}if(b){if(!Ih.test(u)){I("Please enter a valid email!");return}if(yield o.logout(!0),yield o.checkIfUserExists(u)){const L=yield o.initiateUserLogin(u);f("login"),g(y.BIOMETRIC_LOGIN),v(L);return}yield o.createUser(u),f("signUp"),g(y.VERIFICATIONS);return}if(W){yield o.logout(!0);let P=!1;try{P=yield o.checkIfUserExistsByPhone(u,d)}catch{I("Please enter a valid phone number!");return}if(P){const L=yield o.initiateUserLoginForPhone(u,d);f("login"),g(y.BIOMETRIC_LOGIN),v(L);return}yield o.createUserByPhone(u,d),f("signUp"),g(y.VERIFICATIONS);return}}),H=()=>yn(void 0,void 0,void 0,function*(){E(!0),yield O(),E(!1)});return e&&t?null:h.jsx("form",{onSubmit:P=>yn(void 0,void 0,void 0,function*(){P.preventDefault(),yield H()}),children:h.jsxs(Mv,{ref:s,id:"authInput",placeholder:b||t?"Enter email":W||e?"Enter phone":"Enter email or phone",onCpslInput:de,value:u,errorText:A,autofocus:!0,inputMode:"email",onKeyDown:P=>yn(void 0,void 0,void 0,function*(){return P.key==="Enter"&&H()}),contrastText:!0,mask:c==="phone"?(n=Dv[x.selectedLabel])!==null&&n!==void 0?n:$v:void 0,enterkeyhint:"go",noAutoDisable:!0,disabled:S,children:[h.jsxs(kv,{slot:"start",children:[!e&&(B||b)&&h.jsx(M,{icon:"mail"}),!t&&B&&h.jsx(M,{icon:"phone"}),W&&h.jsxs(Uv,{selectedValue:x.selectedLabel,onCpslSelectValueChange:ye,showFormattedSelectedItem:!0,autoWidth:!0,dropdownMaxHeight:i,anchorElId:"authInput",$width:r,showSearch:!0,searchPlaceholder:"Search Countries",onCpslSearchChange:K,children:[x&&h.jsxs(Fv,{slot:"selected-item",children:[h.jsx(j,{children:x.selectedLabel}),h.jsx(j,{children:x.value})]}),re.map(P=>h.jsxs(Wv,{slot:"items",value:P.selectedLabel,children:[h.jsx(j,{children:P.label}),h.jsx(j,{children:P.value})]},P.selectedLabel))]})]}),u&&h.jsx(G,{slot:"end",size:"small",fullWidth:!0,disabled:S,onClick:H,children:S?h.jsx(ge,{size:16}):h.jsx(M,{icon:"arrowNarrow"})})]},"email")})},kv=T.div`
  height: 100%;
  display: flex;
  align-items: center;
  gap: 8px;
  padding-right: 12px;
  border-right: 1px solid var(--cpsl-color-background-16);

  & cpsl-icon {
    --icon-color: var(--cpsl-color-contrast);
  }
`,Uv=T(wa)`
  --container-height: 100%;
  --container-padding-start: 0px;
  --container-padding-end: 0px;
  --container-border-width: 0px;
  --container-gap: 4px;
  --container-background-color: transparent;
  --container-box-shadow: none;

  &::part(dropdown) {
    width: ${({$width:e})=>`${e-2}px`};
  }

  &::part(popover) {
    @media (max-width: ${mi}px) {
      top: unset !important;
      bottom: 16px;
    }
  }
`,Wv=T(Ta)`
  &::part(inner-container) {
    justify-content: space-between;
  }
`,Fv=T.div`
  display: flex;
  gap: 4px;
  align-items: center;
`,Mv=T(ai)`
  --container-background-color: var(--cpsl-color-background-8);
  --input-background-color: var(--cpsl-color-background-8);
  --container-padding-end: 8px;
`,Uc=({oAuthMethods:e,disableEmailLogin:t,disablePhoneLogin:n})=>{const{wallets:s}=De(),i=w(o=>o.step===y.AUTH_MORE),r=m.useMemo(()=>{const o=[];return e!=null&&e.length&&o.push(h.jsx(Pv,{methods:e},"oAuth")),(!t||!n)&&o.push(h.jsx(Nv,{disableEmailLogin:t,disablePhoneLogin:n},"input")),h.jsx(h.Fragment,{children:o})},[i,e,t,n,s]);return h.jsx(Bv,{children:r})},Bv=T.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,Vv=({oAuthMethods:e,disableEmailLogin:t,disablePhoneLogin:n})=>{const{wallets:s}=De(),i=pe(f=>f.authLayout),r=w(f=>f.setStep),o=pe(f=>f.oAuthLogoVariant),a=pe(f=>f.isDark),l=o==="default",u=l?a:o!=="dark",c=()=>{r(y.AUTH_MORE)},d=()=>{r(y.EX_WALLET_MORE)},p=m.useMemo(()=>{const f=[];return i.forEach(g=>{switch(f.length>0&&f.push(h.jsx(Fn,{children:"or"},"or")),g){case Le.AUTH_FULL:{f.push(h.jsx(Uc,{oAuthMethods:e,disableEmailLogin:t,disablePhoneLogin:n}));break}case Le.AUTH_CONDENSED:{const v=[];e==null||e.forEach(x=>v.push(l?Nc[x]:kc[x])),f.push(h.jsxs(sa,{onClick:c,variant:"tertiary",fullWidth:!0,children:[h.jsx(na,{slot:"start",icons:[],$isDark:u}),"Sign Up or Login",h.jsx(ni,{slot:"end",icons:v.splice(0,3),$isDark:u})]},"authCondensed"));break}case Le.EXTERNAL_FULL:{s.length&&f.push(h.jsx(jc,{},"externalWallets"));break}case Le.EXTERNAL_CONDENSED:{const v=[];s==null||s.forEach(x=>v.push(x.iconUrl)),f.push(h.jsxs(sa,{onClick:d,variant:"tertiary",fullWidth:!0,children:[h.jsx(na,{slot:"start",icons:[],$isDark:u}),"Connect Wallet",h.jsx(ni,{slot:"end",icons:v.splice(0,3),$isDark:u})]},"authCondensed"));break}}}),h.jsx(h.Fragment,{children:f})},[e,t,n,s]);return h.jsx(Hv,{"data-testid":"main-auth-step-content",children:p})},Hv=T.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,ni=T(Cu)`
  --icon-item-color: ${({$isDark:e})=>e?"white":"black"};
  flex: 1;
  justify-content: flex-end;
`,na=T(ni)`
  visibility: hidden;
`,sa=T(G)`
  --button-justify-content: space-between;

  &::part(button-native) {
    max-height: 50px;
  }
`,Gv=({oAuthMethods:e,disableEmailLogin:t,disablePhoneLogin:n})=>{const s=pe(l=>l.getLogo()),i=pe(l=>l.appName),a=pe(l=>l.authLayout)[0].split(":")[0]==="AUTH"?"Sign Up or Login":"Connect Wallet";return h.jsxs(h.Fragment,{children:[s&&h.jsx(Kv,{src:s,alt:`${i?`${i} -`:""}logo`}),h.jsx(Re,{variant:s?"bodyM":"headingS",weight:"semiBold",children:a}),h.jsx(Vv,{disableEmailLogin:t,disablePhoneLogin:n,oAuthMethods:e})]})},Kv=T.img`
  height: 100px;
  max-width: 260px;
  object-fit: contain;
  padding: 16px 0px;
  margin: 16px 0px;
  box-sizing: content-box;
  align-self: center;
`;var zv=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Xv=({onClose:e})=>{var t,n;const s=il(),i=w(x=>x.onRampConfig),r=w(x=>x.setAccountAddFundTab),o=Q(x=>x.capsule),{disconnectExternalWallet:a}=De(),[l,u]=m.useState(!1),c=!i.enabledFlows,d=(t=i.enabledFlows)===null||t===void 0?void 0:t.includes(Xe.BUY),p=(n=i.enabledFlows)===null||n===void 0?void 0:n.includes(Xe.RECEIVE),f=()=>{r(Xe.BUY),s()},g=()=>{r(Xe.RECEIVE),s()},v=()=>zv(void 0,void 0,void 0,function*(){u(!0),yield o.logout(),yield a(),e(),u(!1)});return h.jsx(oe,{$wide:!0,children:h.jsxs(U,{children:[h.jsxs(qv,{children:[(c||d)&&h.jsx(ia,{icon:"creditCard",onClick:f,children:h.jsx(j,{variant:"bodyXS",color:"secondary",weight:"medium",children:"Buy Crypto"})}),(c||p)&&h.jsx(ia,{icon:"qrCode02",onClick:g,children:h.jsx(j,{variant:"bodyXS",color:"secondary",weight:"medium",children:"Receive"})})]}),h.jsx(Yv,{variant:"destructive",fullWidth:!0,onClick:v,disabled:l,children:l?h.jsx(ge,{size:16}):h.jsxs(h.Fragment,{children:["Disconnect Wallet",h.jsx(M,{icon:"logOut",slot:"end"})]})})]})})},qv=T.div`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
`,ia=T(Bn)`
  flex: 1;

  --button-icon-color: var(--cpsl-color-text-primary);
`,Yv=T(G)`
  --button-border-width: 0px;
`,Wc=e=>{if(_e()){if(!e)return;if(e.startsWith("http")){const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noreferrer noopener",t.click()}else window.location.href=e}};var Jv=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Zv=()=>{const[e,t]=At(),n=w(d=>d.externalWalletError),s=w(d=>d.setStep),{connectExternalWallet:i,wallet:r,qrUri:o,walletDisplayHelpers:a}=De();r||s(y.AUTH_MAIN),m.useEffect(()=>{Wc(o),console.log("ðŸš€ ~ ExternalWalletStep ~ qrUri:",o)},[o]);const l=()=>Jv(void 0,void 0,void 0,function*(){yield i(r)}),u=()=>{t(o)},c=m.useMemo(()=>{var d,p,f;if(!r)return null;_e()&&r.id==="walletConnect"&&h.jsx(U,{children:h.jsx(oa,{weight:"semiBold",children:"Continue in the WalletConnect modal."})});const{showExtension:v,showMobile:x,isSolanaMobileSafari:C}=a;if(!x&&!v||C){const S=C?`Solana wallets aren't available on mobile safari browsers.

Please continue in another browser.`:`${r.name} isn't supported on mobile devices.

Please choose another wallet or continue on desktop.`;return h.jsx(U,{children:h.jsx(oa,{weight:"semiBold",children:S})})}if(v){const S=r.installed;return h.jsxs(U,{children:[S&&!(n!=null&&n.length)?h.jsx(Re,{color:"contrast",weight:"semiBold",children:`Confirm connection request in the ${r.name} browser extension.`}):h.jsxs(ex,{children:[h.jsx(tx,{icon:"alertCircle"}),h.jsx(j,{weight:"semiBold",color:"error",children:S?n==null?void 0:n[0]:`${r.name} not detected`})]}),h.jsxs(G,{as:S?"button":"a",href:(d=r.downloadUrl)!==null&&d!==void 0?d:"",target:"_blank",variant:"secondary",onClick:l,children:[h.jsx(M,{slot:"start",icon:S?"refresh":"linkExternal"}),S?"Try Again":`Get ${r.name}`]})]})}if(x){if(_e()){const S=r.type!==he.SOLANA||r.installed;return h.jsxs(h.Fragment,{children:[h.jsx(U,{children:!S&&h.jsx(j,{weight:"semiBold",color:"error",children:`${r.name} not detected`})}),r.id!=="walletConnect"&&h.jsxs(U,{children:[h.jsx(j,{weight:"medium",color:"secondary",children:`Donâ€™t have have ${r.name} Wallet`}),h.jsxs(G,{as:"a",href:(p=r.downloadUrl)!==null&&p!==void 0?p:"",target:"_blank",variant:"secondary",children:[h.jsx(M,{slot:"start",icon:"linkExternal"}),`Get ${r.name}`]})]})]})}return h.jsxs(h.Fragment,{children:[h.jsxs(U,{children:[h.jsx(j,{weight:"semiBold",children:"Scan with your mobile device"}),h.jsx(St,{children:o?h.jsx(Ct,{url:o,imageSrc:r.iconUrl}):h.jsx(ge,{size:100})}),h.jsxs(G,{size:"small",variant:"ghost",onClick:u,children:[h.jsx(M,{slot:"start",icon:e?"check":"copy"}),e?"Copied":"Copy Link"]})]}),h.jsxs(U,{children:[h.jsx(j,{weight:"medium",color:"secondary",children:`Donâ€™t have have ${r.name} Wallet`}),h.jsxs(G,{as:"a",href:(f=r.downloadUrl)!==null&&f!==void 0?f:"",target:"_blank",variant:"secondary",children:[h.jsx(M,{slot:"start",icon:"linkExternal"}),`Get ${r.name}`]})]})]})}},[r,a,n,o]);return r?h.jsx(Qv,{children:c}):null},Qv=T(oe)`
  flex: 1;
  justify-content: space-between;
`,ex=T.div`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
`,tx=T(M)`
  --height: 16px;
  --width: 16px;
  --icon-color: var(--cpsl-color-text-error);
`,oa=T(Re)`
  white-space: pre-line;
`,$s=({externalWalletError:e})=>{var t;return{[y.WALLET_CREATION_DONE]:{variant:"approved",topOffset:20,spacerHeight:158},[y.LOGIN_DONE]:{variant:"approved",topOffset:20,spacerHeight:158},[y.EX_WALLET_SELECTED]:{variant:"externalWalletConnection",topOffset:40,spacerHeight:158,hideFadeOut:!0},[y.TWO_FACTOR_DONE]:{variant:"approved",topOffset:40,spacerHeight:158},[y.ADD_FUNDS_SUCCESS]:{variant:"approved",topOffset:40,spacerHeight:158},[y.CHAIN_SWITCH]:{variant:((t=e==null?void 0:e[0])===null||t===void 0?void 0:t.toLowerCase())===Za?"failed":"externalWalletConnection",topOffset:20,spacerHeight:158,hideFadeOut:!0},[y.ACCOUNT_MAIN]:{variant:"customContent",topOffset:0,spacerHeight:104,hideFadeOut:!0}}},nx=()=>{const{wallet:e,walletDisplayHelpers:t,avatar:n}=De(),s=w(I=>I.step),i=w(I=>I.externalWalletError),{wallet:r}=Vn(),[o,a]=m.useState(s),[l,u]=m.useState(r==null?void 0:r.address),c=$s({externalWalletError:i})[o];m.useEffect(()=>{r!=null&&r.address&&r.address!==l&&u(r==null?void 0:r.address)},[r==null?void 0:r.address]),m.useEffect(()=>{const I=$s({externalWalletError:i})[o],N=$s({externalWalletError:i})[s];setTimeout(()=>{a(s)},N&&I||N&&!I?0:200)},[s]);const d=o===y.EX_WALLET_SELECTED,p=o===y.CHAIN_SWITCH,f=o===y.ACCOUNT_MAIN,{showExtension:g,isCosmosMobileWallet:v}=t,x=!c||!_e()&&d&&!g||!_e()&&p&&v,{variant:C,topOffset:S,spacerHeight:E,hideFadeOut:A}=c??{};return h.jsxs(h.Fragment,{children:[h.jsx(sx,{$top:-45+S,children:x?null:h.jsxs(lx,{$isAccount:f,hideFadeOut:A,variant:C,height:480,withDefaultTheme:!0,children:[(d||p)&&h.jsx(ox,{slot:"connectionLeft",src:e==null?void 0:e.iconUrl}),f&&(n?h.jsx(rx,{slot:"image",src:n}):l?h.jsx(ax,{slot:"image",hash:l}):null)]})}),!x&&h.jsx(ix,{$height:E})]})},sx=T.div`
  display: flex;
  position: absolute;
  justify-content: center;
  align-items: center;
  width: 100%;

  top: ${({$top:e})=>`${e}px`};
`,ix=T.div`
  height: ${({$height:e})=>`${e}px`};
`,ox=T(M)`
  --height: 60px;
  --width: 60px;
`,rx=T.img`
  width: 100%;
  height: 100%;
  object-fit: contain;
`,ax=T(Aa)`
  width: 100%;
  height: 100%;
  border-radius: 1000px;
`,lx=T(xu)`
  ${({$isAccount:e})=>e&&`
      --ring-3-size: 560px;
      --ring-2-size: 402px;
      --ring-1-size: 228px;
      --ring-0-size: 104px;
      
      --default-theme-ring-3-opacity: 0.02;
      --default-theme-ring-2-opacity: 0.04;
      --default-theme-ring-1-opacity: 0.06;
      --default-theme-ring-0-opacity: 0.1;
  `}
`,cx=({children:e,className:t})=>{const n=m.useRef(null),[s,i]=m.useState("auto");return m.useEffect(()=>{if(n.current){const r=new ResizeObserver(o=>{const a=o[0].contentRect.height;i(a)});return r.observe(n.current),()=>{r.disconnect()}}},[]),h.jsx(ux,{className:t,style:{height:s},animate:{height:s},transition:{duration:.2},children:h.jsx("div",{ref:n,children:e})})},ux=T(zi.div)`
  overflow: hidden;
`;var dx=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const hx=()=>{const[e,t]=At(),n=w(f=>f.externalWalletError),s=w(f=>f.setStep),i=w(f=>f.setStepDirection),{switchChain:r,wallet:o,qrUri:a,chainIdSwitchingTo:l,walletDisplayHelpers:u}=De();o||(i(-1),s(y.ACCOUNT_MAIN)),m.useEffect(()=>{o.type===he.COSMOS&&Wc(a)},[a]);const c=()=>dx(void 0,void 0,void 0,function*(){l&&(yield r(l))}),d=()=>{t(a)},p=m.useMemo(()=>{if(!o)return null;const{isCosmosMobileWallet:f}=u;return f?h.jsx(h.Fragment,{children:h.jsxs(U,{children:[h.jsx(j,{weight:"semiBold",children:"Scan with your mobile device to switch networks"}),h.jsx(St,{children:a?h.jsx(Ct,{url:a,imageSrc:o.iconUrl}):h.jsx(ge,{size:100})}),h.jsxs(G,{size:"small",variant:"ghost",onClick:d,children:[h.jsx(M,{slot:"start",icon:e?"check":"copy"}),e?"Copied":"Copy Link"]})]})}):h.jsxs(U,{children:[n!=null&&n.length?h.jsxs(h.Fragment,{children:[h.jsxs(px,{children:[h.jsx(mx,{icon:"alertCircle"}),h.jsx(Re,{weight:"semiBold",color:"error",children:n[0]})]}),n[1]&&h.jsx(Re,{color:"secondary",weight:"medium",children:n[1]})]}):h.jsx(Re,{color:"contrast",weight:"semiBold",children:`Confirm the request to change networks in your ${o.name} wallet.`}),(n==null?void 0:n[0].toLowerCase())!==Za&&h.jsxs(G,{variant:"secondary",onClick:c,children:[h.jsx(M,{slot:"start",icon:"refresh"}),"Try Again"]})]})},[o,u,n,a]);return o?h.jsx(fx,{children:p}):null},fx=T(oe)`
  flex: 1;
  justify-content: space-between;
`,px=T.div`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
`,mx=T(M)`
  --height: 16px;
  --width: 16px;
  --icon-color: var(--cpsl-color-text-error);
`;var gx=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const yx=()=>{var e,t,n,s,i;const r=m.useRef(null),{dropdownMaxHeight:o,dropdownWidth:a,mobileAnchor:l,resize:u}=Xi(r),c=Q(E=>E.capsule),{switchChain:d,chainId:p,chains:f,chainIdSwitchingTo:g}=De();m.useEffect(()=>{o&&p&&u()},[p,g,o]);const v=(n=c.externalWallets[(t=(e=c.currentExternalWalletAddresses)===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:""])===null||n===void 0?void 0:n.type,x=E=>gx(void 0,void 0,void 0,function*(){yield d(E)});if(!v||v===he.SOLANA)return null;const C=g??p,S=(s=f.find(E=>E.id.toString()===C))===null||s===void 0?void 0:s.name;return h.jsx(Fc,{children:h.jsx(Mc,{ref:r,id:"inputContainer",children:h.jsxs(Bc,{selectedValue:(i=C==null?void 0:C.toString())!==null&&i!==void 0?i:"",onCpslSelectValueChange:E=>{x(E.detail)},showFormattedSelectedItem:!0,placeholder:"Choose chain...",anchorElId:"inputContainer",dropdownMaxHeight:o,$width:a,$top:l+16+1,autoWidth:!0,children:[C&&h.jsx(ra,{variant:"bodyXS",color:"contrast",slot:"selected-item",children:S}),f==null?void 0:f.map(E=>h.jsx(Vc,{slot:"items",value:E.id.toString(),children:h.jsx(ra,{variant:"bodyXS",color:"contrast",children:E.name})},E.id))]})})})},vx=()=>{var e;const t=Q(p=>p.capsule),{wallet:n,switchEmbeddedWallet:s}=Vn(),i=m.useRef(null),{dropdownMaxHeight:r,dropdownWidth:o,mobileAnchor:a,resize:l}=Xi(i),u=t.wallets?Object.values(t.wallets):[];m.useEffect(()=>{r&&(n!=null&&n.address)&&l()},[n,u,r]);const c=p=>{s(p)},d=n?h.jsxs("span",{slot:"selected-item",children:[n.name&&h.jsxs(j,{variant:"bodyXS",color:"contrast",children:[n.name," "]}),h.jsx(j,{variant:"bodyXS",color:n.name?"secondary":"contrast",children:Bt(n.address)})]}):null;return h.jsx(Fc,{children:h.jsx(Mc,{ref:i,id:"addressInputContainer",children:(u==null?void 0:u.length)>1?h.jsxs(Bc,{selectedValue:(e=n==null?void 0:n.id)!==null&&e!==void 0?e:"",onCpslSelectValueChange:p=>{c(p.detail)},showFormattedSelectedItem:!0,placeholder:"Choose wallet...",anchorElId:"addressInputContainer",dropdownMaxHeight:r,$width:o,$top:a+16+1,autoWidth:!0,children:[n&&d,u==null?void 0:u.map(p=>h.jsx(Vc,{slot:"items",value:p.id,children:h.jsxs("span",{children:[p.name&&h.jsxs(j,{variant:"bodyXS",color:"contrast",children:[p.name," "]}),h.jsx(j,{variant:"bodyXS",color:p.name?"secondary":"contrast",children:Bt(p.address)})]})},p.id))]}):d})})},Fc=T.div`
  flex: 0;
  width: 100%;
  display: flex;
  justify-content: center;
`,Mc=T.div`
  height: 24px;
  position: relative;
  display: flex;
  align-items: center;
  gap: 8px;
  border-radius: 1000px;
  background-color: var(--cpsl-color-background-8);
  padding: 8px;
`,ra=T(j)`
  text-transform: capitalize;
`,Bc=T(wa)`
  --container-height: auto;
  --container-border-width: 0px;
  --container-padding-end: 0px;
  --container-padding-start: 0px;
  --container-background-color: transparent;
  --container-box-shadow: none;
  --container-gap: 2px;
  --icon-width: 16px;
  --icon-height: 16px;

  &::part(dropdown) {
    min-width: ${({$width:e})=>`${e-2}px`};
  }

  &::part(popover) {
    /* Have to adjust the top of the popover here since we're using a transform on the modal which causes fixed position items to not be relative to the viewport */
    @media (max-width: ${mi}px) {
      top: ${({$top:e})=>e?`${e}px`:"0px"};
      bottom: 16px;
    }
  }

  &::part(icon) {
    --icon-color: var(--cpsl-color-contrast);
  }
`,Vc=T(Ta)`
  --outer-container-padding-start: 4px;
  --outer-container-padding-end: 4px;
  --outer-container-padding-top: 4px;
  --outer-container-padding-bottom: 4px;
`,xx=({onClose:e})=>{const t=pe(c=>c.bareModal),n=w(c=>c.hasPreviousStep()),s=w(c=>c.step),i=w(c=>c.isFullyLoggedIn),r=Hn(),o=s===y.ACCOUNT_MAIN,a=s===y.CHAIN_SWITCH,l=o||a,u=()=>{r()};return h.jsxs(Cx,{children:[h.jsx(Ex,{variant:"ghost",style:{visibility:n?"visible":"hidden"},onClick:u,children:h.jsx(M,{icon:"arrow"})}),h.jsx(Sx,{children:l&&i&&h.jsxs(h.Fragment,{children:[h.jsx(yx,{}),h.jsx(vx,{})]})}),h.jsx(Ax,{bareModal:t,variant:"ghost",onClick:e,children:h.jsx(M,{icon:"close"})})]})},Cx=T.div`
  position: absolute;
  width: 100%;
  top: 16px;

  z-index: 3;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
`,Sx=T.div`
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
`,Hc=T(G)`
  flex: 0;
  --button-padding-top: 2px;
  --button-padding-bottom: 2px;
  --button-padding-start: 2px;
  --button-padding-end: 2px;
  --button-border-radius: 1000px;
  --button-background-color: var(--cpsl-color-background-4);

  cpsl-icon {
    --height: 20px;
    --width: 20px;
  }
`,Ax=T(Hc)`
  transform: rotate(180deg);
  visibility: ${({bareModal:e})=>e?"hidden":"visible"};
`,Ex=T(Hc)`
  transform: rotate(180deg);
`,wx=({oAuthMethods:e,twoFactorAuthEnabled:t,recoverySecretStepEnabled:n,hasFinishedAnimation:s,disableEmailLogin:i,disablePhoneLogin:r,onClose:o})=>{const a=w(f=>f.step),l=w(f=>f.onRampConfig),u=w(f=>f.stepDirection),c=w(f=>f.setStepDirection),d=pe(f=>f.appName),p=()=>{switch(a){case y.AUTH_MAIN:return h.jsx(Gv,{oAuthMethods:e,disableEmailLogin:i,disablePhoneLogin:r});case y.EX_WALLET_MORE:return h.jsx(jc,{});case y.AUTH_MORE:return h.jsx(Uc,{oAuthMethods:e,disableEmailLogin:i,disablePhoneLogin:r});case y.VERIFICATIONS:return h.jsx(jh,{});case y.BIOMETRIC_LOGIN:return h.jsx(Fh,{});case y.SETUP_2FA:case y.VERIFY_2FA:return h.jsx(Gh,{onClose:o});case y.LOGIN_DONE:return h.jsx(Qh,{onClose:o});case y.AWAITING_BIOMETRIC_LOGIN:case y.AWAITING_BIOMETRIC_CREATION:return h.jsx(ef,{});case y.AWAITING_WALLET_CREATION:return h.jsx(tf,{});case y.WALLET_CREATION_DONE:return h.jsx(sf,{twoFactorAuthEnabled:t,recoverySecretStepEnabled:n,onClose:o});case y.SECRET:return h.jsx(uf,{});case y.TWO_FACTOR_DONE:return h.jsx(hf,{onClose:o});case y.BIOMETRIC_CREATION:return h.jsx(pf,{});case y.AWAITING_OAUTH:return h.jsx(mf,{});case y.FARCASTER_OAUTH:return h.jsx(Hf,{});case y.ADD_FUNDS:return h.jsx(Of,{hasFinishedAnimation:s});case y.ADD_FUNDS_AWAITING:return h.jsx(Vf,{});case y.ADD_FUNDS_SUCCESS:return h.jsx(Do,{isSuccess:!0,onClose:o});case y.ADD_FUNDS_FAILURE:return h.jsx(Do,{onClose:o});case y.ACCOUNT_MAIN:return h.jsx(Xv,{onClose:o});case y.EX_WALLET_SELECTED:return h.jsx(Zv,{});case y.CHAIN_SWITCH:return h.jsx(hx,{})}};return h.jsxs(Tx,{slot:"body","data-testid":"modal-content",children:[h.jsx(xx,{onClose:o}),h.jsx(gv,{}),h.jsx(bx,{children:h.jsx(Dc,{mode:"popLayout",initial:!1,onExitComplete:()=>{c(1)},custom:u,children:h.jsxs(Ix,{custom:u,variants:Qa,initial:"enter",animate:"center",exit:"exit",transition:el,children:[h.jsx(nx,{}),h.jsxs(_x,{children:[(l==null?void 0:l.testMode)&&[y.ADD_FUNDS,y.ADD_FUNDS_AWAITING,y.ADD_FUNDS_FAILURE,y.ADD_FUNDS_SUCCESS].includes(a)&&h.jsx(Ca,{children:h.jsxs(j,{variant:"bodyS",children:["This Capsule Modal is configured to run on-ramp services in ",h.jsx("b",{children:"test mode"})," only, for development purposes. If you are a user of ",d,", please contact support."]})}),p()]})]},a)})})]})},Tx=T.div`
  position: relative;
`,bx=T(cx)`
  margin-top: -16px;
`,Ix=T(zi.div)`
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 24px;
  will-change: auto !important;
`,_x=T.div`
  z-index: 1;
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 24px;
  padding: 72px 72px 32px;

  @media (max-width: ${mi}px) {
    padding: 72px 16px 0px;
  }
`,Px=()=>{const e=w(n=>n.isAccount()),t=m.useMemo(()=>e?h.jsxs($x,{children:[h.jsxs(jx,{variant:"bodyS",color:"secondary",weight:"medium",children:["Access all your walletâ€™s features at"," ",h.jsx("a",{href:Po,target:"blank",children:h.jsx(aa,{variant:"bodyS",weight:"medium",children:"Capsule Connect"})})]}),h.jsx(G,{as:"a",href:Po,target:"blank",variant:"ghost",children:h.jsx(Dx,{icon:"chevronUp"})})]}):h.jsxs(h.Fragment,{children:[h.jsxs(Nn,{variant:"body2XS",color:"secondary",weight:"medium",children:["By logging in you agree to our"," ",h.jsx("a",{href:bh,target:"blank",children:h.jsx(aa,{variant:"body2XS",weight:"medium",children:"Terms & Conditions"})})]}),h.jsxs(Ox,{children:[h.jsx(Nn,{variant:"bodyS",color:"secondary",weight:"medium",children:"Powered by"}),h.jsx(Nx,{icon:"capsuleLogo"})]})]}),[e]);return h.jsx(Lx,{slot:"footer",children:h.jsx(Rx,{children:t})})},Lx=T.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  padding: 8px 0px;
`,Rx=T.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
`,Ox=T.div`
  display: flex;
  gap: 5px;
  align-items: center;
  justify-content: center;
`,$x=T.div`
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: center;
`,Dx=T(M)`
  transform: rotate(90deg);

  /* --icon-color: var(--cpsl-color-text-tertiary); */
  --height: 24px;
  --width: 24px;
`,Nn=T(j)`
  text-align: center;
  display: inline-block;
`,jx=T(Nn)`
  line-height: 20px;
`,aa=T(Nn)`
  cursor: pointer;
  display: inline-block;
`,Nx=T(M)`
  display: inline-block;
  --icon-color: var(--cpsl-color-text-secondary);
  --width: 85px;
  --height: auto;
`,kn={POLLING_INTERVAL_MS:2e3,ANIMATION_DURATION:.15};var Pt=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const kx=m.forwardRef(({twoFactorAuthEnabled:e=!1,recoverySecretStepEnabled:t=!1,oAuthMethods:n,hasFinishedAnimation:s,disableEmailLogin:i,disablePhoneLogin:r,onClose:o,onRampConfig:a,loginTransitionOverride:l,createWalletOverride:u},c)=>{const d=Q(O=>O.capsule),p=w(O=>O.step),f=w(O=>O.webAuthURLForLogin),g=w(O=>O.webAuthURLForCreate),v=w(O=>O.isLogin()),x=w(O=>O.loginWindow),C=w(O=>O.setStep),S=w(O=>O.setWebAuthURLForLogin),E=w(O=>O.setWebAuthURLForCreate),A=w(O=>O.setLoginWindow),I=Z(O=>O.setRecoveryShare),N=Hn(),k=m.useRef(),b=m.useRef(),[W,B]=m.useState(!1);m.useImperativeHandle(c,()=>({handleModalClose(){ye()}}),[]);const re=()=>Pt(void 0,void 0,void 0,function*(){if(!e)return!0;try{const{isSetup:O}=yield d.check2FAStatus();return O}catch(O){return console.error("An error occurred while checking 2FA:",O),!1}});function K(){return Pt(this,void 0,void 0,function*(){const{isComplete:O,isError:H,needsWallet:P}=yield d.waitForLoginAndSetup(x);if(A(void 0),H){N();return}O&&(S(""),P?C(y.AWAITING_WALLET_CREATION):(yield re())?C(y.LOGIN_DONE):C(y.SETUP_2FA))})}function de(){return Pt(this,void 0,void 0,function*(){(yield d.waitForAccountCreation())&&(E(""),C(y.AWAITING_WALLET_CREATION))})}m.useEffect(()=>{if(p!==y.AWAITING_WALLET_CREATION||W)return;function O(){return Pt(this,void 0,void 0,function*(){B(!0);let H,P;if(u){const L=yield u(d),me=(yield d.fetchWallets()).filter(ve=>!!ve.address),je={};for(const ve of me)je[ve.id]={id:ve.id,address:ve.address,scheme:ve.scheme,signer:""};d.setWallets(je),H=L.recoverySecret,P=L.walletIds}else{const L=yield d.waitForPasskeyAndCreateWallet();H=L.recoverySecret,P=L.walletIds}yield d.setCurrentWalletIds(P),t&&I(H),B(!1),C(!H||!t?y.WALLET_CREATION_DONE:y.SECRET)})}O()},[v,p]),m.useEffect(()=>(g&&(b.current=window.setTimeout(de,kn.POLLING_INTERVAL_MS)),()=>clearTimeout(b.current)),[g]),m.useEffect(()=>{if(f){if(l){(function(){return Pt(this,void 0,void 0,function*(){yield l(d),S(""),(yield re())?C(y.LOGIN_DONE):C(y.SETUP_2FA)})})();return}k.current=window.setTimeout(K,kn.POLLING_INTERVAL_MS)}return()=>{window.clearTimeout(k.current),d.exitLogin()}},[f,x]);const ye=()=>{o()};return m.useEffect(()=>{[y.BIOMETRIC_CREATION,y.AWAITING_BIOMETRIC_CREATION].includes(p)||d.exitAccountCreation(),[y.BIOMETRIC_LOGIN,y.AWAITING_BIOMETRIC_LOGIN].includes(p)||d.exitLogin()},[p]),m.useEffect(()=>()=>{d.exitLoops()},[]),h.jsxs(h.Fragment,{children:[h.jsx(wx,{hasFinishedAnimation:s,oAuthMethods:n,twoFactorAuthEnabled:e,disableEmailLogin:i,disablePhoneLogin:r,onClose:ye,onRampConfig:a,recoverySecretStepEnabled:t}),h.jsx(Px,{})]})}),Ux={wallets:[],chains:[],chainId:void 0,username:void 0,avatar:void 0,disconnect:()=>Promise.resolve(),switchChain:()=>Promise.resolve({})},si=m.createContext(Ux);function la({children:e}){const t=[],n=[],o=()=>Promise.resolve(),a=()=>Promise.resolve({});return h.jsx(si.Provider,{value:m.useMemo(()=>({wallets:t,chains:n,chainId:void 0,username:void 0,avatar:void 0,disconnect:o,switchChain:a}),[t,n,void 0,void 0,void 0,o,a]),children:e})}var Un;(function(e){e.METAMASK="METAMASK",e.RAINBOW="RAINBOW",e.COINBASE="COINBASE",e.WALLETCONNECT="WALLETCONNECT",e.ZERION="ZERION"})(Un||(Un={}));Object.assign({},Un);const Wx={wallets:[],disconnect:()=>Promise.resolve()},ii=m.createContext(Wx);function ca({children:e}){const t=[],n=()=>Promise.resolve();return h.jsx(ii.Provider,{value:m.useMemo(()=>({wallets:t,disconnect:n}),[t,n]),children:e})}const Fx={wallets:[],chains:[],chainId:void 0,disconnect:()=>Promise.resolve(),switchChain:()=>Promise.resolve({})},oi=m.createContext(Fx);function ua({children:e}){const t=[],n=[],i=()=>Promise.resolve(),r=()=>Promise.resolve({});return h.jsx(oi.Provider,{value:m.useMemo(()=>({wallets:t,chains:n,chainId:void 0,disconnect:i,switchChain:r}),[t,n,void 0,i,r]),children:e})}var Mx=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Bx=({children:e,wallets:t})=>{const n=Q(S=>S.capsule),s=w(S=>S.resetState),i=Z(S=>S.resetState),[r,o]=m.useState(null),[a,l]=m.useState(null),[u,c]=m.useState(null),[d,p]=m.useState(null),[f,g]=m.useState(null),[v,x]=m.useState(null);m.useEffect(()=>{Mx(void 0,void 0,void 0,function*(){let E=!1,A,I,N,k,b,W;if(!(t!=null&&t.length))A=si,I=la,N=ii,k=ca,b=oi,W=ua;else for(let B=0;B<t.length;B++){if(t[B]in Un){E=!0;try{const{EvmExternalWalletProvider:K,EvmExternalWalletContext:de}=yield Te(()=>import("./index-B3yjlFXt.js"),__vite__mapDeps([11,1,2]));A=de,I=K}catch{throw new Error("@usecapsule/evm-wallet-connectors is required to use an external EVM wallet.")}}else E||(A=si,I=la);N=ii,k=ca,b=oi,W=ua}l(A),o(()=>I),p(N),c(()=>k),x(b),g(()=>W)})},[t]);const C=({address:S,error:E})=>{(E||!S)&&(s(),i())};return!n||!r||!u||!f?null:h.jsx(r,{capsule:n,onSwitchWallet:C,children:h.jsx(u,{capsule:n,onSwitchWallet:C,children:h.jsx(f,{capsule:n,onSwitchWallet:C,children:h.jsx(Ff,{evmContext:a,solanaContext:d,cosmosContext:v,walletSort:t,children:e})})})})};var da=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(d){o(d)}}function l(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})},Vx=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n};vd();const n0=m.forwardRef((e,t)=>{var{capsule:n,isOpen:s,theme:i,appName:r,logo:o,disableEmailLogin:a=!1,disablePhoneLogin:l=!1,oAuthMethods:u,bareModal:c=!1,className:d,onRampConfig:p,networks:f=[ma.ETHEREUM],currentStepOverride:g,externalWallets:v,authLayout:x=[Le.AUTH_FULL,Le.EXTERNAL_FULL],onModalStepChange:C,onClose:S}=e,E=Vx(e,["capsule","isOpen","theme","appName","logo","disableEmailLogin","disablePhoneLogin","oAuthMethods","bareModal","className","onRampConfig","networks","currentStepOverride","externalWallets","authLayout","onModalStepChange","onClose"]);const A=m.useRef(null),I=pe($=>$.updateState),N=w($=>$.setWebAuthURLForLogin),k=w($=>$.setWebAuthURLForCreate),b=w($=>$.step),W=w($=>$.setOnModalStepChange),B=w($=>$.setOnRampConfig),re=w($=>$.setNetworks),K=w($=>$.setStep),de=Q($=>$.setCapsule),ye=Z($=>$.setIdentifier),O=Z($=>$.setIdentifierType),H=Z($=>$.setCountryCode),P=w($=>$.hasPreviousStep()),L=w($=>$.setFlow),me=w($=>$.setIsFullyLoggedIn),je=Hn(),ve=pe($=>$.setAuthLayout),Qt=w($=>$.resetState),en=Z($=>$.resetState),tn=Z($=>$.setRecoveryShare),[nn,rt]=m.useState(!1),[sn,R]=m.useState(!1);m.useImperativeHandle(t,()=>({goBack(){je()},canGoBack(){return P},currentStep(){return b},handleModalClose(){var $;($=A==null?void 0:A.current)===null||$===void 0||$.handleModalClose()}}),[P,b]);const F=()=>da(void 0,void 0,void 0,function*(){g?K(y[g.toUpperCase()]):(yield n.isFullyLoggedIn())?(L("account"),K(y.ACCOUNT_MAIN),me(!0)):((b===y.ACCOUNT_MAIN||b===y.LOGIN_DONE||b===y.TWO_FACTOR_DONE||b===y.SETUP_2FA||b===y.SECRET||b===y.BIOMETRIC_LOGIN||b===y.BIOMETRIC_CREATION||b===y.WALLET_CREATION_DONE||b===y.EX_WALLET_SELECTED)&&(K(y.AUTH_MAIN),L(),N(),k()),me(!1));const $=n.getEmail();$&&(ye($),O("email"));const{phone:qi,countryCode:Gc}=n.getPhone();qi&&(ye(qi),H(Gc),O("phone"))});m.useEffect(()=>{ve(v!=null&&v.length?x:x.filter($=>!$.includes("EXTERNAL")))},[v,x]),m.useEffect(()=>{W(C)},[C]),m.useEffect(()=>{B(p)},[p]),m.useEffect(()=>{re(f.map(ri))},[f]),m.useEffect(()=>{var $;I({logo:o,appName:r,oAuthLogoVariant:($=i==null?void 0:i.oAuthLogoVariant)!==null&&$!==void 0?$:"default",bareModal:c})},[o,r,i==null?void 0:i.oAuthLogoVariant,c]),m.useEffect(()=>{i&&(zd(i),I({isDark:i.mode==="dark"}))},[i]),m.useEffect(()=>{n?(F(),de(n),c&&rt(!0)):console.error("A Capsule instance must be provided.")},[]),m.useEffect(()=>{de(n)},[n]),m.useEffect(()=>{s&&n&&F()},[s]);const X=()=>{rt(!0)},z=()=>{R(!0)},wt=()=>da(void 0,void 0,void 0,function*(){R(!1),rt(!1),b===y.LOGIN_DONE||b===y.TWO_FACTOR_DONE||b===y.SETUP_2FA||b===y.SECRET||b===y.BIOMETRIC_LOGIN||b===y.BIOMETRIC_CREATION||b===y.WALLET_CREATION_DONE||b===y.EX_WALLET_SELECTED?(Qt(),en(),tn(null)):(b===y.ADD_FUNDS||b===y.ADD_FUNDS_AWAITING||b===y.ADD_FUNDS_SUCCESS||b===y.ADD_FUNDS_FAILURE)&&K(y.LOGIN_DONE),n&&(F(),n.exitLoops())});return n?a&&l&&!(u!=null&&u.length)?(console.error("At least one OAuth method must be provided if email and phone login are disabled."),null):h.jsx(Bx,{wallets:v,children:h.jsx(vu,{enterTransitionDuration:kn.ANIMATION_DURATION,exitTransitionDuration:kn.ANIMATION_DURATION,open:s,onCpslModalExited:wt,onCpslModalEntered:z,onCpslModalEntering:X,onCpslModalRequestClose:S,noOverlay:c,className:d,"data-testid":"modal",children:nn&&h.jsx(Lf,{children:h.jsx(kx,Object.assign({hasFinishedAnimation:sn,oAuthMethods:u,disableEmailLogin:a,disablePhoneLogin:l,onClose:S},E))})})}):null});export{Le as A,Ch as B,pi as C,Yx as D,he as E,Xx as F,Sh as G,Vu as H,Ah as I,_e as J,Mt as K,Eh as L,qx as M,ys as N,Ja as O,xe as P,wh as Q,Eo as R,cf as S,Jx as a,sh as b,Kx as c,ds as d,y as e,zx as f,Xu as g,Ra as h,nh as i,n0 as j,vi as k,fe as l,za as m,eh as n,Pn as o,us as p,cs as q,Gx as r,qa as s,th as t,Zx as u,xf as v,Qx as w,Co as x,dh as y,xh as z};
